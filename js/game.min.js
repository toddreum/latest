/*!
 * BirdTurds Game Engine v19.6 - WAKE UP AMERICA EDITION!
 * Entertainment with PURPOSE - Awakening Hearts to Biblical Truth
 * Copyright (c) 2025 Dude.com. All Rights Reserved.
 * 
 * PROPRIETARY AND CONFIDENTIAL
 * 
 * This source code is protected intellectual property of Dude.com.
 * Unauthorized copying, modification, reverse engineering, decompilation,
 * disassembly, or distribution of this code, via any medium, is strictly
 * prohibited and may result in severe civil and criminal penalties.
 * 
 * Violators will be prosecuted to the maximum extent possible under law.
 * 
 * License: Proprietary - All Rights Reserved
 * Website: https://birdturds.com
 * Contact: support@birdturds.com
 * 
 * "Making the world laugh AND awakening hearts to biblical truth!"
 * 
 * v19.6 - WAKE UP AMERICA EDITION!
 * PURPOSE: This game is not just for humor - it's meant to IMPACT and AWAKEN
 * players to biblical truth. The rapture is coming. God doesn't want anyone left behind!
 * 
 * FEATURES:
 * - 4 Animated Woke Globalist types (Swamp Level 7)
 * - 4 Animated Demon sprites (White House Level 8)  
 * - 4 Phone Zombie types - Wake them with Bibles!
 * - Divine Golden Powder effect on awakening
 * - 78 Bible Scriptures (Wake-up, End Times, Teen, Rapture, Victory)
 * - Rapture Warning messages
 * - All Boss Birds attack at White House finale!
 * - Trump victory celebration with fist pump!
 * - 3 Difficulty modes: Beginner, Intermediate, Advanced
 * - Silent Mode shop item (no popups)
 */
const GAME_WIDTH=1280,GAME_HEIGHT=640,WORLD_WIDTH=2e4,TURD_SCALE=.04,BIRD_SCALE=.12,ANIMAL_SCALE=.08,HUNTER_SCALE=.24,DIFFICULTY_MODES={beginner:{name:"Beginner",emoji:"üü¢",description:"For new players - more health, slower enemies, helpful hints",playerHealth:150,playerMaxHealth:150,turdDamage:5,demonDamage:8,enemySpeed:.7,birdSpawnRate:.7,globalistSpawnRate:.5,demonSpawnRate:.5,bossHealth:.6,startingAmmo:120,startingCoins:100,birdsToAdvance:20,showHints:!0,angelDuration:20,respawnTime:5},intermediate:{name:"Intermediate",emoji:"üü°",description:"Balanced challenge - standard gameplay experience",playerHealth:100,playerMaxHealth:100,turdDamage:8,demonDamage:15,enemySpeed:1,birdSpawnRate:1,globalistSpawnRate:1,demonSpawnRate:1,bossHealth:1,startingAmmo:90,startingCoins:0,birdsToAdvance:25,showHints:!1,angelDuration:15,respawnTime:3},advanced:{name:"Advanced",emoji:"üî¥",description:"For experts - less health, faster enemies, no mercy!",playerHealth:75,playerMaxHealth:75,turdDamage:12,demonDamage:25,enemySpeed:1.4,birdSpawnRate:1.5,globalistSpawnRate:1.5,demonSpawnRate:1.8,bossHealth:1.5,startingAmmo:60,startingCoins:0,birdsToAdvance:35,showHints:!1,angelDuration:10,respawnTime:0,allBossesAtWhiteHouse:!0,doubleGlobalists:!0}};let currentDifficulty=DIFFICULTY_MODES.intermediate;const PHONE_ZOMBIE_TYPES=[{type:"teen_boy",name:"Distracted Teen",walkFrames:4,wakeFrames:4,helpFrames:4,quotes:["Just scrolling...","One more video...","Whatever...","Leave me alone..."],wokenQuotes:["Whoa, what's happening?!","I can see clearly now!","Thank you!","God is real!"],helpQuotes:["I'll help fight!","For America!","Let's go!"]},{type:"teen_girl",name:"Social Media Addict",walkFrames:4,wakeFrames:4,helpFrames:4,quotes:["Need more likes...","Posting selfie...","So bored...","Drama everywhere..."],wokenQuotes:["Wait, what's real?!","My eyes are open!","This matters more!","I was so blind!"],helpQuotes:["Count me in!","Truth matters!","Fighting back!"]},{type:"adult_man",name:"News Zombie",walkFrames:4,wakeFrames:4,helpFrames:4,quotes:["Must check news...","The experts say...","Trust the algorithm...","Can't look away..."],wokenQuotes:["It was all lies!","I've been deceived!","The truth shall set you free!","Wake up people!"],helpQuotes:["I'll spread the word!","No more fake news!","Truth warrior now!"]},{type:"adult_woman",name:"Doom Scroller",walkFrames:4,wakeFrames:4,helpFrames:4,quotes:["So anxious...","Everything's terrible...","Can't stop scrolling...","Need distraction..."],wokenQuotes:["There's hope!","God has a plan!","I feel peace now!","Fear is gone!"],helpQuotes:["Spreading hope!","Join us!","Light defeats darkness!"]}],BIBLE_PICKUP_CONFIG={spawnChance:.15,spawnInterval:20,maxOnScreen:3,glowColor:16766720,pickupRange:60},PHONE_ZOMBIE_CONFIG={spawnChance:.25,spawnInterval:15,maxOnScreen:4,wakeRange:80,pointsForWaking:200,coinsForWaking:15,helpDuration:30,helpDamage:10},WAKEUP_SCRIPTURES=[{verse:"Awake, O sleeper, and arise from the dead, and Christ will shine on you.",ref:"Ephesians 5:14"},{verse:"The truth will set you free.",ref:"John 8:32"},{verse:"Be sober-minded; be watchful. Your adversary the devil prowls around.",ref:"1 Peter 5:8"},{verse:"Do not conform to the pattern of this world, but be transformed.",ref:"Romans 12:2"},{verse:"Wake up! Strengthen what remains and is about to die.",ref:"Revelation 3:2"},{verse:"The night is nearly over; the day is almost here.",ref:"Romans 13:12"},{verse:"Come out of her, my people, so that you will not share in her sins.",ref:"Revelation 18:4"},{verse:"Open my eyes that I may see wonderful things.",ref:"Psalm 119:18"},{verse:"For you were once darkness, but now you are light in the Lord.",ref:"Ephesians 5:8"},{verse:"See to it that no one takes you captive through hollow philosophy.",ref:"Colossians 2:8"}],END_TIMES_FAMILY_SCRIPTURES=[{verse:"Children will rise against parents and have them put to death.",ref:"Matthew 10:21",message:"Don't let division destroy your family!"},{verse:"Brother will betray brother to death, and a father his child.",ref:"Mark 13:12",message:"Stay united with your loved ones!"},{verse:"A man's enemies will be the members of his own household.",ref:"Matthew 10:36",message:"Protect your family bonds!"},{verse:"From now on five in one household will be divided, three against two.",ref:"Luke 12:52",message:"Don't let the enemy divide you!"},{verse:"In the last days people will be lovers of self, disobedient to parents.",ref:"2 Timothy 3:2",message:"Honor your parents! Don't be deceived!"},{verse:"People will be ungrateful, unholy, without love for their families.",ref:"2 Timothy 3:2-3",message:"Choose love over selfishness!"},{verse:"Lovers of pleasure rather than lovers of God.",ref:"2 Timothy 3:4",message:"Put God first, not your phone!"},{verse:"They will have a form of godliness but deny its power.",ref:"2 Timothy 3:5",message:"Don't just pretend - truly follow Jesus!"},{verse:"He will turn the hearts of fathers to their children, and children to their fathers.",ref:"Malachi 4:6",message:"God can heal your family!"},{verse:"Honor your father and mother, that it may go well with you.",ref:"Ephesians 6:2-3",message:"Blessing comes through honoring parents!"},{verse:"Children, obey your parents in the Lord, for this is right.",ref:"Ephesians 6:1",message:"Obedience brings blessing!"},{verse:"Train up a child in the way he should go.",ref:"Proverbs 22:6",message:"Parents: teach your kids the truth!"},{verse:"Choose this day whom you will serve. As for me and my house, we will serve the Lord.",ref:"Joshua 24:15",message:"Make the choice TODAY!"},{verse:"If my people humble themselves and pray, I will heal their land.",ref:"2 Chronicles 7:14",message:"Revival starts with YOU!"},{verse:"Return to me, and I will return to you, says the Lord.",ref:"Malachi 3:7",message:"It's not too late to turn back!"},{verse:"Behold, I stand at the door and knock.",ref:"Revelation 3:20",message:"Jesus is waiting for you!"}],TEEN_AWAKENING_SCRIPTURES=[{verse:"Don't let anyone look down on you because you are young.",ref:"1 Timothy 4:12",message:"Your generation can make a difference!"},{verse:"Remember your Creator in the days of your youth.",ref:"Ecclesiastes 12:1",message:"Don't wait until you're older!"},{verse:"I have written to you, young people, because you are strong.",ref:"1 John 2:14",message:"You have the strength to stand!"},{verse:"How can a young person stay pure? By obeying your word.",ref:"Psalm 119:9",message:"God's Word is your guide!"},{verse:"Flee youthful passions and pursue righteousness.",ref:"2 Timothy 2:22",message:"Run from distractions, run to God!"},{verse:"Your word is a lamp to my feet and a light to my path.",ref:"Psalm 119:105",message:"The Bible shows you the way!"},{verse:"The fear of the Lord is the beginning of wisdom.",ref:"Proverbs 9:10",message:"Real wisdom starts with God!"},{verse:"Trust in the Lord with all your heart, lean not on your own understanding.",ref:"Proverbs 3:5",message:"Don't trust the algorithm - trust God!"}],RAPTURE_SCRIPTURES=[{verse:"For the Lord himself will come down from heaven, with a loud command, with the voice of the archangel and with the trumpet call of God, and the dead in Christ will rise first.",ref:"1 Thessalonians 4:16",message:"Jesus is coming back! Are you ready?"},{verse:"Then we who are alive, who are left, will be caught up together with them in the clouds to meet the Lord in the air.",ref:"1 Thessalonians 4:17",message:"The rapture is REAL! Don't be left behind!"},{verse:"Look, he is coming with the clouds, and every eye will see him, even those who pierced him.",ref:"Revelation 1:7",message:"EVERY eye will see Him return!"},{verse:"Then will appear the sign of the Son of Man in heaven. And then all the peoples of the earth will mourn when they see the Son of Man coming on the clouds of heaven, with power and great glory.",ref:"Matthew 24:30",message:"He's coming with POWER and GLORY!"},{verse:"Look, I am coming soon! My reward is with me, and I will give to each person according to what they have done.",ref:"Revelation 22:12",message:"He's coming SOON with rewards!"},{verse:"This same Jesus, who has been taken from you into heaven, will come back in the same way you have seen him go into heaven.",ref:"Acts 1:11",message:"He's coming back just as He left!"},{verse:"The Lord is not slow in keeping his promise, as some understand slowness. Instead, he is patient with you, not wanting anyone to perish, but everyone to come to repentance.",ref:"2 Peter 3:9",message:"God doesn't want ANYONE left behind!"},{verse:"For many are called, but few are chosen.",ref:"Matthew 22:14",message:"Many are called - will YOU be chosen?"},{verse:"Be ready, for the Son of Man is coming at an hour you do not expect.",ref:"Matthew 24:44",message:"No one knows the day or hour - BE READY!"},{verse:"Watch therefore, for you know neither the day nor the hour.",ref:"Matthew 25:13",message:"Stay awake! Stay ready! Stay faithful!"},{verse:"In a moment, in the twinkling of an eye, at the last trumpet. For the trumpet will sound, the dead will be raised imperishable, and we shall be changed.",ref:"1 Corinthians 15:52",message:"It will happen in an INSTANT!"},{verse:"Be always on the watch, and pray that you may be able to escape all that is about to happen, and that you may be able to stand before the Son of Man.",ref:"Luke 21:36",message:"Watch and PRAY!"}],END_TIMES_SIGNS_SCRIPTURES=[{verse:"You will hear of wars and rumors of wars, but see to it that you are not alarmed. Such things must happen, but the end is still to come.",ref:"Matthew 24:6",message:"Wars and rumors of wars - just as predicted!"},{verse:"Nation will rise against nation, and kingdom against kingdom. There will be earthquakes in various places, and famines. These are the beginning of birth pains.",ref:"Mark 13:8",message:"Birth pains of the end times!"},{verse:"There will be great earthquakes, famines, and pestilences in various places, and fearful events and great signs from heaven.",ref:"Luke 21:11",message:"Look around - the signs are HERE!"},{verse:"And this gospel of the kingdom will be preached in the whole world as a testimony to all nations, and then the end will come.",ref:"Matthew 24:14",message:"The Gospel is reaching the whole world!"},{verse:"But the one who stands firm to the end will be saved.",ref:"Matthew 24:13",message:"Stand firm to the END!"},{verse:"Do not be afraid of what you are about to suffer. Be faithful, even to the point of death, and I will give you life as your victor's crown.",ref:"Revelation 2:10",message:"Be FAITHFUL - receive the crown of LIFE!"},{verse:"Blessed is the one who perseveres under trial because, having stood the test, that person will receive the crown of life that the Lord has promised to those who love him.",ref:"James 1:12",message:"Persevere and receive the crown!"},{verse:"When the Son of Man comes in his glory, and all the angels with him, he will sit on his glorious throne.",ref:"Matthew 25:31",message:"He will judge from His throne!"},{verse:"For we must all appear before the judgment seat of Christ, so that each of us may receive what is due us for the things done while in the body, whether good or bad.",ref:"2 Corinthians 5:10",message:"We will ALL stand before Christ!"},{verse:"And I saw the dead, great and small, standing before the throne, and books were opened.",ref:"Revelation 20:12",message:"The books will be opened!"}],HOPE_SCRIPTURES=[{verse:"He will wipe every tear from their eyes. There will be no more death or mourning or crying or pain, for the old order of things has passed away.",ref:"Revelation 21:4",message:"No more tears, no more pain - FOREVER!"},{verse:"While we wait for the blessed hope‚Äîthe appearing of the glory of our great God and Savior, Jesus Christ.",ref:"Titus 2:13",message:"Our BLESSED HOPE is coming!"},{verse:"I have told you these things, so that in me you may have peace. In this world you will have trouble. But take heart! I have overcome the world.",ref:"John 16:33",message:"Take heart - Jesus has OVERCOME!"},{verse:"No, in all these things we are more than conquerors through him who loved us.",ref:"Romans 8:37",message:"You are MORE than a conqueror!"},{verse:"But those who hope in the Lord will renew their strength. They will soar on wings like eagles; they will run and not grow weary; they will walk and not be faint.",ref:"Isaiah 40:31",message:"Hope in the Lord - soar like eagles!"},{verse:"So do not fear, for I am with you; do not be dismayed, for I am your God. I will strengthen you and help you.",ref:"Isaiah 41:10",message:"Do NOT fear - God is WITH you!"},{verse:"For I know the plans I have for you, declares the Lord, plans to prosper you and not to harm you, plans to give you hope and a future.",ref:"Jeremiah 29:11",message:"God has GOOD plans for you!"},{verse:"To the one who is victorious, I will give the right to sit with me on my throne, just as I was victorious and sat down with my Father on his throne.",ref:"Revelation 3:21",message:"Be victorious - sit with Jesus on His throne!"}],PRAYER_SCRIPTURES=[{verse:"The end of all things is near. Therefore be alert and of sober mind so that you may pray.",ref:"1 Peter 4:7",message:"The end is near - PRAY!"},{verse:"Pray continually.",ref:"1 Thessalonians 5:17",message:"Never stop praying!"},{verse:"Do not be anxious about anything, but in every situation, by prayer and petition, with thanksgiving, present your requests to God.",ref:"Philippians 4:6",message:"Don't be anxious - PRAY!"},{verse:"The prayer of a righteous person is powerful and effective.",ref:"James 5:16",message:"Your prayers are POWERFUL!"},{verse:"Be joyful in hope, patient in affliction, faithful in prayer.",ref:"Romans 12:12",message:"Stay faithful in prayer!"}],PASTOR_VIDEO_RESOURCES=[{title:"The Rapture Just Happened: What You Need To Know",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"rapture",description:"What if you've been left behind? What should you expect?"},{title:"Defining the Rapture",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"rapture",description:"Biblical teaching on the rapture and why it matters"},{title:"Signs of the Coming Antichrist",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"end_times",description:"End times prophecy and what to watch for"},{title:"A Post-Rapture World",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"rapture",description:"What the Bible says will happen after the rapture"},{title:"Ask Pastor Jack - Youth Edition",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"youth",description:"Real questions and biblical answers from the next generation"},{title:"United In Truth",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"family",description:"Building up brothers and sisters in Christ"},{title:"Navigating Family Dynamics with Grace",pastor:"Jack Hibbs",channel:"Real Life with Jack Hibbs",url:"https://www.youtube.com/@reallifejackhibbs",topic:"family",description:"God's wisdom for family relationships"},{title:"TPUSA Faith - Freedom Night in America",pastor:"Various",channel:"TPUSA Faith",url:"https://www.youtube.com/@tpusafaith",topic:"faith",description:"Christians rising to put faith into action"},{title:"The Believers Summit",pastor:"Various",channel:"TPUSA Faith",url:"https://www.youtube.com/@tpusafaith",topic:"faith",description:"Onward for the Kingdom - engaging the world with truth"}],REWARD_SCRIPTURES=[{verse:"Well done, good and faithful servant! You have been faithful with a few things; I will put you in charge of many things.",ref:"Matthew 25:21",message:"God rewards faithfulness!"},{verse:"I have fought the good fight, I have finished the race, I have kept the faith.",ref:"2 Timothy 4:7",message:"Keep fighting the good fight!"},{verse:"Do you not know that in a race all the runners run, but only one gets the prize? Run in such a way as to get the prize.",ref:"1 Corinthians 9:24",message:"Run to WIN!"},{verse:"Blessed is the one who perseveres under trial because, having stood the test, that person will receive the crown of life.",ref:"James 1:12",message:"Persevere and receive the crown!"},{verse:"And whatever you do, work at it with all your heart, as working for the Lord, not for human masters.",ref:"Colossians 3:23",message:"Work for the Lord in all you do!"},{verse:"His master replied, 'Well done, good and faithful servant! Come and share your master's happiness!'",ref:"Matthew 25:23",message:"Share in the Master's joy!"}],TESTIMONY_SCRIPTURES=[{verse:"Let the redeemed of the Lord tell their story‚Äîthose he redeemed from the hand of the foe.",ref:"Psalm 107:2",message:"Tell your story of redemption!"},{verse:"They triumphed over him by the blood of the Lamb and by the word of their testimony.",ref:"Revelation 12:11",message:"Your testimony is powerful!"},{verse:"Always be prepared to give an answer to everyone who asks you to give the reason for the hope that you have.",ref:"1 Peter 3:15",message:"Be ready to share your hope!"},{verse:"You are the light of the world. A town built on a hill cannot be hidden.",ref:"Matthew 5:14",message:"Let your light shine!"},{verse:"Go into all the world and preach the gospel to all creation.",ref:"Mark 16:15",message:"Share the good news everywhere!"},{verse:"But you will receive power when the Holy Spirit comes on you; and you will be my witnesses.",ref:"Acts 1:8",message:"Be a witness for Christ!"}],SHARING_SCRIPTURES=[{verse:"Give, and it will be given to you. A good measure, pressed down, shaken together and running over.",ref:"Luke 6:38",message:"Give generously!"},{verse:"Each of you should use whatever gift you have received to serve others, as faithful stewards of God's grace.",ref:"1 Peter 4:10",message:"Use your gifts to serve!"},{verse:"Do not forget to do good and to share with others, for with such sacrifices God is pleased.",ref:"Hebrews 13:16",message:"Share with others!"},{verse:"A generous person will prosper; whoever refreshes others will be refreshed.",ref:"Proverbs 11:25",message:"Be generous and be blessed!"},{verse:"Freely you have received; freely give.",ref:"Matthew 10:8",message:"Share freely what you've received!"}],ALL_BOSS_BIRDS=[{name:"Thunderbird",key:"thunderbird",health:150,damage:25,speed:80,color:16766720,size:1.5,ability:"lightning",desc:"Summons lightning bolts!"},{name:"Phoenix",key:"phoenix",health:200,damage:20,speed:70,color:16729344,size:1.4,ability:"fire",desc:"Rises from ashes, shoots fireballs!"},{name:"Dragon",key:"dragon",health:300,damage:35,speed:60,color:2263842,size:2,ability:"breath",desc:"Breathes fire in a cone!"},{name:"Pterodactyl",key:"pterodactyl",health:180,damage:30,speed:90,color:9127187,size:1.6,ability:"dive",desc:"Devastating dive attacks!"},{name:"Giant Eagle",key:"goldeneagle",health:120,damage:20,speed:100,color:4286945,size:1.3,ability:"swoop",desc:"Lightning fast swoops!"},{name:"Vulture King",key:"vulture",health:160,damage:15,speed:50,color:3100495,size:1.4,ability:"poison",desc:"Toxic cloud attacks!"},{name:"Storm Crow",key:"crow",health:100,damage:18,speed:85,color:1710638,size:1.2,ability:"storm",desc:"Calls swarms of crows!"},{name:"Frost Owl",key:"owl",health:140,damage:22,speed:55,color:8900331,size:1.3,ability:"freeze",desc:"Freezing wind attacks!"}];var CHARACTER_ROSTER={buck:{id:"buck",name:"Buck",gender:"male",desc:"Rugged cowboy with a trusty rifle",weapon:"Lever-Action Rifle",style:"Western Cowboy",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},daisy:{id:"daisy",name:"Daisy",gender:"female",desc:"Sharpshooting cowgirl with attitude",weapon:"Shotgun",style:"Country Cowgirl",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},clyde:{id:"clyde",name:"Clyde",gender:"male",desc:'Patriotic muscleman - "Freedom ain\'t free!"',weapon:"AR-15",style:"The Patriot",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},bubba:{id:"bubba",name:"Bubba",gender:"male",desc:'Good ol\' boy - "Hold my beer!"',weapon:"Double-Barrel Shotgun",style:"The Redneck",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},gunner:{id:"gunner",name:"Gunner",gender:"male",desc:'Grizzled veteran - "I\'ve seen things..."',weapon:"M16 Tactical",style:"The Veteran",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},jolene:{id:"jolene",name:"Jolene",gender:"female",desc:'Southern belle - "Bless your heart!"',weapon:"Pink Rifle",style:"The Belle",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},sierra:{id:"sierra",name:"Sierra",gender:"female",desc:'Fitness queen - "Great for my macros!"',weapon:"Tactical Crossbow",style:"CrossFit Queen",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}},tammy:{id:"tammy",name:"Tammy",gender:"female",desc:'Truck stop waitress - "I deal with worse!"',weapon:"Sawed-Off Shotgun",style:"The Waitress",animations:{idle:{frames:4,cols:2,rows:2,frameRate:6,loop:!0},walk:{frames:9,cols:3,rows:3,frameRate:10,loop:!0},run:{frames:9,cols:3,rows:3,frameRate:14,loop:!0},shoot:{frames:4,cols:2,rows:2,frameRate:12,loop:!1},jump:{frames:4,cols:2,rows:2,frameRate:10,loop:!1},hurt:{frames:4,cols:2,rows:2,frameRate:8,loop:!1}}}};const ANIM_IDLE="idle",ANIM_WALK="walk",ANIM_RUN="run",ANIM_SHOOT="shoot",ANIM_JUMP="jump",ANIM_HURT="hurt";function getSelectedCharacter(){let e=localStorage.getItem("birdturds_character");return!e||!e.startsWith("hunter_")&&CHARACTER_ROSTER[e]||(console.log("Migrating old character to Buck:",e),e="buck",localStorage.setItem("birdturds_character","buck")),e&&CHARACTER_ROSTER[e]?e:"buck"}const btState={score:0,health:100,maxHealth:100,turdMeter:0,maxTurdMeter:100,turdCount:0,ammo:90,ammoMax:130,coins:0,coinsEarnedToday:0,dailyCoinLimit:500,lastCoinDate:null,weaponName:"Semi-Auto Rifle",difficulty:"intermediate",kills:0,accuracy:0,shots:0,invincible:!1,doublePoints:!1,slowMotion:!1,triplePoints:!1,timeFrozen:!1,currentWeapon:"rifle",animalKills:0,funnyDeaths:0,shakesUsed:0,hasBow:!1,hasCrossbow:!1,hasShotgun:!1,bowArrows:0,crossbowBolts:0,shotgunShells:0,hatProtection:!1,hatTimer:0,grenades:0,molotovs:0,flashbangs:0,bazookaAmmo:0,silentMode:!1,noCommentaryMode:!1,commentaryBonus:1,biblesHeld:0,zombiesAwakened:0,helpersActive:0,jetpackActive:!1,jetpackFuel:0,jetpackMaxFuel:30,hasDirtbike:!1,hasATV:!1,hasTruck:!1,hasJeep:!1,hasTank:!1,hasHelicopter:!1,vehicleHelperTimer:0,hasHandgun:!1,hasRevolver:!1,hasDeagle:!1,hasMachinegun:!1,hasMinigun:!1,hasSniper:!1,hasBarrett:!1,hasBazooka:!1,hasRocketLauncher:!1,hasMountedMinigun:!1,extraEagles:0,goldenEagles:0,hasFalcon:!1,hasOwlHelper:!1,hasCoinMagnet:!1,hasLuckyCharm:!1,camoActive:!1,hazmatImmune:!1,devMode:!1,devModeCode:"BIRDTURDS777",currentLevel:1,birdsKilledThisLevel:0,birdsNeededThisLevel:25,levelComplete:!1,gameWon:!1,reachedWhiteHouse:!1,whiteHouseBossesReleased:!1,bossesDefeated:0,totalBossesToDefeat:8,currentSkin:"default",armorReduction:0,speedModifier:1,fireRateModifier:1,coinDropModifier:1,damageModifier:1,upgrades:{fireRate:1,damage:1,armor:0,ammoCapacity:0,coinMultiplier:1},angelProtectionActive:!1,angelProtectionTimer:0,angelProtectionLevel:0,hasBibleWeapon:!1,bibleAmmo:0,bibleMaxAmmo:10,_sessionId:Math.random().toString(36).substr(2,16),_gameStartTime:Date.now(),_lastScoreTime:Date.now(),_scoreHistory:[],_maxScorePerMinute:2e3,_flaggedActivity:0,_verified:!1,badges:[],badgesEarned:[],referrals:0,shareCount:0,dailyLoginStreak:0,lastLoginDate:null,bonusCoinsEarned:0},ANGEL_PROTECTION={1:{name:"Guardian Angel",cost:50,duration:30,turdBlock:.5,damageReduction:.25,description:"Blocks 50% turds, 25% damage reduction"},2:{name:"Warrior Angel",cost:100,duration:45,turdBlock:.75,damageReduction:.5,description:"Blocks 75% turds, 50% damage reduction"},3:{name:"Divine Shield",cost:200,duration:60,turdBlock:1,damageReduction:.75,description:"Blocks ALL turds, 75% damage reduction"}},AntiCheat={_k:btState._sessionId,hash:function(e,t,a){const i=`${e}-${t}-${a}-${this._k}`;let s=0;for(let e=0;e<i.length;e++){s=(s<<5)-s+i.charCodeAt(e),s&=s}return Math.abs(s).toString(36)},validateScore:function(e,t,a){const i=Date.now(),s=(i-btState._lastScoreTime)/1e3,o=e-t;if(o>1e3&&s<1)return btState._flaggedActivity++,console.warn("Anti-cheat: Suspicious score jump detected"),!1;btState._scoreHistory.push({score:o,time:i,action:a}),btState._scoreHistory.length>100&&btState._scoreHistory.shift();return btState._scoreHistory.filter(e=>i-e.time<6e4).reduce((e,t)=>e+t.score,0)>btState._maxScorePerMinute?(btState._flaggedActivity++,console.warn("Anti-cheat: Score rate exceeded"),!1):(btState._lastScoreTime=i,!0)},verifySession:function(){const e=(Date.now()-btState._gameStartTime)/1e3,t=5*btState.kills,a=200*btState.kills+50*e;return btState.score<.5*t||btState.score>2*a?(btState._flaggedActivity++,!1):btState._flaggedActivity<3},generateAwardToken:function(){if(!this.verifySession())return null;const e={sessionId:btState._sessionId,score:btState.score,kills:btState.kills,zombiesAwakened:btState.zombiesAwakened,gameTime:Date.now()-btState._gameStartTime,hash:this.hash(btState.score,btState.kills,btState._gameStartTime),timestamp:Date.now()};return btoa(JSON.stringify(e))},validateAwardEligibility:function(e){if(!this.verifySession())return{eligible:!1,reason:"Session integrity check failed"};const t=(Date.now()-btState._gameStartTime)/1e3/60;switch(e){case"bible":if(btState.score<5e4)return{eligible:!1,reason:"Score requirement not met (50,000 needed)"};if(t<30)return{eligible:!1,reason:"Minimum play time not met (30 min)"};if(btState.kills<100)return{eligible:!1,reason:"Minimum kills not met (100 needed)"};break;case"germproof":if(btState.score<25e3)return{eligible:!1,reason:"Score too low for weekly competition"};if(t<15)return{eligible:!1,reason:"Minimum play time not met (15 min)"};break;case"awakener":if(btState.zombiesAwakened<100)return{eligible:!1,reason:`Need ${100-btState.zombiesAwakened} more zombies awakened`}}return{eligible:!0,token:this.generateAwardToken()}}},BADGES={first_kill:{id:"first_kill",name:"First Blood",icon:"üéØ",description:"Get your first kill",requirement:{kills:1},coins:10},bird_slayer:{id:"bird_slayer",name:"Bird Slayer",icon:"ü¶Ö",description:"Kill 100 birds",requirement:{kills:100},coins:50},bird_master:{id:"bird_master",name:"Bird Master",icon:"üëë",description:"Kill 500 birds",requirement:{kills:500},coins:200},sharpshooter:{id:"sharpshooter",name:"Sharpshooter",icon:"üéØ",description:"90% accuracy in a game",requirement:{accuracy:90},coins:100},score_1k:{id:"score_1k",name:"Getting Started",icon:"‚≠ê",description:"Score 1,000 points",requirement:{score:1e3},coins:20},score_10k:{id:"score_10k",name:"Rising Star",icon:"üåü",description:"Score 10,000 points",requirement:{score:1e4},coins:75},score_50k:{id:"score_50k",name:"Champion",icon:"üèÜ",description:"Score 50,000 points",requirement:{score:5e4},coins:250},score_100k:{id:"score_100k",name:"Legend",icon:"üëë",description:"Score 100,000 points",requirement:{score:1e5},coins:500},awakener_10:{id:"awakener_10",name:"Soul Sower",icon:"üå±",description:"Awaken 10 phone zombies",requirement:{zombiesAwakened:10},coins:30},awakener_50:{id:"awakener_50",name:"Soul Winner",icon:"‚úùÔ∏è",description:"Awaken 50 phone zombies",requirement:{zombiesAwakened:50},coins:100},awakener_100:{id:"awakener_100",name:"Soul Awakener",icon:"üëº",description:"Awaken 100 phone zombies",requirement:{zombiesAwakened:100},coins:300},level_4:{id:"level_4",name:"Adventurer",icon:"üó∫Ô∏è",description:"Reach Level 4",requirement:{level:4},coins:40},level_8:{id:"level_8",name:"White House Hero",icon:"üèõÔ∏è",description:"Reach the White House",requirement:{level:8},coins:150},first_share:{id:"first_share",name:"Evangelist",icon:"üì¢",description:"Share the game once",requirement:{shares:1},coins:25},super_sharer:{id:"super_sharer",name:"Super Sharer",icon:"üåç",description:"Share 10 times",requirement:{shares:10},coins:150},daily_3:{id:"daily_3",name:"Faithful",icon:"üìÖ",description:"3 day login streak",requirement:{streak:3},coins:30},daily_7:{id:"daily_7",name:"Dedicated",icon:"üî•",description:"7 day login streak",requirement:{streak:7},coins:100},daily_30:{id:"daily_30",name:"Devoted",icon:"üíé",description:"30 day login streak",requirement:{streak:30},coins:500}};function checkBadges(e){const t=[],a=JSON.parse(localStorage.getItem("birdturds_badges")||"[]");for(const[e,i]of Object.entries(BADGES)){if(a.includes(e))continue;let s=!1;const o=i.requirement;o.kills&&btState.kills>=o.kills&&(s=!0),o.score&&btState.score>=o.score&&(s=!0),o.accuracy&&btState.accuracy>=o.accuracy&&(s=!0),o.zombiesAwakened&&btState.zombiesAwakened>=o.zombiesAwakened&&(s=!0),o.level&&btState.currentLevel>=o.level&&(s=!0),o.shares&&btState.shareCount>=o.shares&&(s=!0),o.streak&&btState.dailyLoginStreak>=o.streak&&(s=!0),s&&(a.push(e),t.push(i),btState.coins+=i.coins,btState.bonusCoinsEarned+=i.coins)}return localStorage.setItem("birdturds_badges",JSON.stringify(a)),t.forEach((t,a)=>{setTimeout(()=>{e&&e.showBadgeNotification&&e.showBadgeNotification(t)},2e3*a)}),t}const YouthEngagement={checkDailyLogin:function(){const e=(new Date).toDateString(),t=localStorage.getItem("birdturds_lastLogin");if(t!==e){localStorage.setItem("birdturds_lastLogin",e);t===new Date(Date.now()-864e5).toDateString()?btState.dailyLoginStreak++:btState.dailyLoginStreak=1,localStorage.setItem("birdturds_streak",btState.dailyLoginStreak.toString());const a=Math.min(5*btState.dailyLoginStreak,50);return btState.coins+=a,btState.bonusCoinsEarned+=a,{isNew:!0,streak:btState.dailyLoginStreak,bonus:a}}return btState.dailyLoginStreak=parseInt(localStorage.getItem("birdturds_streak")||"0"),{isNew:!1,streak:btState.dailyLoginStreak,bonus:0}},trackShare:function(e){btState.shareCount++,localStorage.setItem("birdturds_shares",btState.shareCount.toString());return btState.coins+=10,btState.bonusCoinsEarned+=10,{shareCount:btState.shareCount,bonus:10}},generateReferralCode:function(){const e=localStorage.getItem("birdturds_userId")||Math.random().toString(36).substr(2,8);return localStorage.setItem("birdturds_userId",e),`BT-${e.toUpperCase()}`},getEncouragementMessage:function(){const e=[{text:"üéÆ Share this game with friends and earn FREE COINS!",scripture:"Go and make disciples ‚Äî Matthew 28:19"},{text:"üì¢ Tell your youth group about BirdTurds!",scripture:"Let no one despise your youth ‚Äî 1 Timothy 4:12"},{text:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Play with your family and earn bonus points!",scripture:"Train up a child in the way he should go ‚Äî Proverbs 22:6"},{text:"üèÜ Compete with friends for the top spot!",scripture:"Run to win the prize ‚Äî 1 Corinthians 9:24"},{text:"‚úùÔ∏è Every zombie you wake is a soul being reached!",scripture:"He who wins souls is wise ‚Äî Proverbs 11:30"},{text:"üî• Login daily to build your streak and earn more coins!",scripture:"Be faithful in small things ‚Äî Luke 16:10"},{text:"üìñ Earn the Soul Awakener badge - wake 100 zombies!",scripture:"The harvest is plentiful ‚Äî Matthew 9:37"},{text:"üåü Share on social media and spread the Word!",scripture:"Let your light shine ‚Äî Matthew 5:16"}];return e[Math.floor(Math.random()*e.length)]}};!function(){YouthEngagement.checkDailyLogin();btState.shareCount=parseInt(localStorage.getItem("birdturds_shares")||"0")}();const DEMON_CONFIG={spawnChance:.2,minLevel:3,speed:100,lieInterval:2,health:8,score:500,lieSpeed:180,lieDamage:20,isBoss:!0,coinDrop:25},BIBLE_WEAPON={cost:150,damage:5,ammo:10,speed:400,scriptures:["John 3:16","Romans 8:31","Psalm 23:4","Isaiah 54:17","James 4:7","1 John 4:4","Ephesians 6:11","Philippians 4:13","2 Timothy 1:7","Psalm 91:11","Romans 8:37","Joshua 1:9"]},GOD_VS_DEVIL_SCRIPTURES=[{verse:"With God all things are possible.",ref:"Matthew 19:26",truth:"God is omnipotent"},{verse:"The devil prowls around like a roaring lion... but resist him, firm in faith.",ref:"1 Peter 5:8-9",truth:"Satan is limited"},{verse:"Great is our Lord and mighty in power; His understanding has no limit.",ref:"Psalm 147:5",truth:"God knows all"},{verse:"The Lord knows the thoughts of man.",ref:"Psalm 94:11",truth:"Only God reads hearts"},{verse:"Where can I go from Your Spirit? Where can I flee from Your presence?",ref:"Psalm 139:7",truth:"God is everywhere"},{verse:"The devil... was seeking someone to devour.",ref:"1 Peter 5:8",truth:"Satan must seek - he's not omnipresent"},{verse:"The God of peace will soon crush Satan under your feet.",ref:"Romans 16:20",truth:"Satan's defeat is certain"},{verse:"And the devil... was thrown into the lake of fire.",ref:"Revelation 20:10",truth:"Satan's end is sealed"}],DEMON_LIES=["You can't win!","Give up now!","Trump lost!","You're weak!","Surrender!","No hope!","Fake news!","You'll fail!","It's over!","Impossible!","Too hard!","Why try?","God forgot you!","You're alone!","No one cares!","Just quit!"],parachuterMessages=["ü™Ç ALLY DEPLOYED!","ü™Ç BACKUP ARRIVED!","ü™Ç FRIENDLY INBOUND!","ü™Ç REINFORCEMENTS!","ü™Ç WINGMAN DROPPING!","ü™Ç HELP IS HERE!"],weaponPickupMessages=["üèπ BOW ACQUIRED!","üèπ GOT A BOW!","üèπ ARROWS READY!","‚öîÔ∏è CROSSBOW FOUND!","‚öîÔ∏è CROSSBOW LOADED!","‚öîÔ∏è BOLTS READY!"],DEMON_SCRIPTURES=[{verse:"Submit to God. Resist the devil and he will flee from you.",ref:"James 4:7"},{verse:"Greater is He that is in you than he that is in the world.",ref:"1 John 4:4"},{verse:"The light shines in the darkness, and the darkness has not overcome it.",ref:"John 1:5"},{verse:"For God has not given us a spirit of fear, but of power and love.",ref:"2 Timothy 1:7"},{verse:"No weapon formed against you shall prosper.",ref:"Isaiah 54:17"},{verse:"The Lord is my light and my salvation‚Äîwhom shall I fear?",ref:"Psalm 27:1"},{verse:"Be strong and courageous. Do not be afraid; the Lord is with you.",ref:"Joshua 1:9"},{verse:"I have given you authority to trample on snakes and scorpions.",ref:"Luke 10:19"},{verse:"Put on the full armor of God to stand against the devil's schemes.",ref:"Ephesians 6:11"},{verse:"The God of peace will soon crush Satan under your feet.",ref:"Romans 16:20"}],ANGEL_SCRIPTURES=[{verse:"For He will command His angels to guard you in all your ways.",ref:"Psalm 91:11"},{verse:"If God is for us, who can be against us?",ref:"Romans 8:31"},{verse:"The angel of the Lord encamps around those who fear Him.",ref:"Psalm 34:7"},{verse:"Are not all angels ministering spirits sent to serve?",ref:"Hebrews 1:14"},{verse:"He will cover you with His feathers; under His wings you will find refuge.",ref:"Psalm 91:4"},{verse:"The Lord is my shepherd; I shall not want.",ref:"Psalm 23:1"},{verse:"God is our refuge and strength, an ever-present help in trouble.",ref:"Psalm 46:1"},{verse:"Cast all your anxiety on Him because He cares for you.",ref:"1 Peter 5:7"}],LOVE_SCRIPTURES=[{verse:"For God so loved the world that He gave His only Son.",ref:"John 3:16"},{verse:"God demonstrates His love: while we were sinners, Christ died for us.",ref:"Romans 5:8"},{verse:"I have not come to call the righteous, but sinners to repentance.",ref:"Luke 5:32"},{verse:"There is more rejoicing in heaven over one sinner who repents.",ref:"Luke 15:7"},{verse:"Come to me, all who are weary, and I will give you rest.",ref:"Matthew 11:28"},{verse:"Neither do I condemn you. Go and sin no more.",ref:"John 8:11"},{verse:"The Son of Man came to seek and save the lost.",ref:"Luke 19:10"},{verse:"God is love. Whoever lives in love lives in God.",ref:"1 John 4:16"}],WARRIOR_SCRIPTURES=[{verse:"Fight the good fight of the faith.",ref:"1 Timothy 6:12"},{verse:"Be watchful, stand firm in the faith, act like men, be strong.",ref:"1 Corinthians 16:13"},{verse:"The Lord is a warrior; the Lord is His name.",ref:"Exodus 15:3"},{verse:"Be strong in the Lord and in His mighty power.",ref:"Ephesians 6:10"},{verse:"Do not be overcome by evil, but overcome evil with good.",ref:"Romans 12:21"},{verse:"Stand firm then, with the belt of truth buckled around your waist.",ref:"Ephesians 6:14"},{verse:"The weapons we fight with are not of this world.",ref:"2 Corinthians 10:4"},{verse:"Have I not commanded you? Be strong and courageous!",ref:"Joshua 1:9"},{verse:"Through God we will do valiantly.",ref:"Psalm 60:12"},{verse:"The righteous are as bold as a lion.",ref:"Proverbs 28:1"}],VICTORY_SCRIPTURES=[{verse:"Thanks be to God! He gives us the victory through our Lord Jesus Christ.",ref:"1 Corinthians 15:57"},{verse:"In all these things we are more than conquerors through Him who loved us.",ref:"Romans 8:37"},{verse:"This is the victory that has overcome the world‚Äîour faith.",ref:"1 John 5:4"},{verse:"The Lord your God is with you, the Mighty Warrior who saves.",ref:"Zephaniah 3:17"},{verse:"I can do all things through Christ who strengthens me.",ref:"Philippians 4:13"},{verse:"The battle is not yours, but God's.",ref:"2 Chronicles 20:15"}],ENCOURAGEMENT_SCRIPTURES=[{verse:"A cheerful heart is good medicine.",ref:"Proverbs 17:22"},{verse:"The joy of the Lord is your strength.",ref:"Nehemiah 8:10"},{verse:"Be joyful in hope, patient in affliction, faithful in prayer.",ref:"Romans 12:12"},{verse:"Rejoice always, pray continually, give thanks in all circumstances.",ref:"1 Thessalonians 5:16-18"},{verse:"Do not be anxious about anything, but in everything by prayer.",ref:"Philippians 4:6"},{verse:"Trust in the Lord with all your heart.",ref:"Proverbs 3:5"},{verse:"Delight yourself in the Lord and He will give you the desires of your heart.",ref:"Psalm 37:4"},{verse:"For I know the plans I have for you, declares the Lord.",ref:"Jeremiah 29:11"},{verse:"The Lord is good, a refuge in times of trouble.",ref:"Nahum 1:7"},{verse:"Blessed are those who hunger and thirst for righteousness.",ref:"Matthew 5:6"}],turdExclamations=["SPLAT! üí©","OH NO! üí©","GROSS! ü§¢","YUCK! üò±","NOT AGAIN! üí©","RIGHT IN THE FACE! üò´","BIRD DOWN! ...on you! üí©","INCOMING! üí©","THAT'S FOWL PLAY! üêîüí©","DIRECT HIT! üí©","TURD ALERT! üö®","SPLASHDOWN! üí¶üí©","BULLSEYE! (the bad kind) üéØüí©","UGHHH! ü§Æ","HOLY TURDS! üí©‚úùÔ∏è","SWEET MOTHER OF TURDS! üí©","HOLY GUACAMOLE... wait that's turd! üí©","JESUS TAKE THE... TURD?! üí©","LORD HAVE MERCY! üí©","HOLY COW... POO! üêÑüí©","WOULD YA LOOK AT ALL THESE TURDS! üí©üí©üí©","TURD CITY OVER HERE! üèôÔ∏èüí©","IT'S RAININ' TURDS! ‚òîüí©","TURD-NADO! üå™Ô∏èüí©","THE TURDS ARE COMIN'! üí©","TURD STORM INCOMING! ‚õàÔ∏èüí©","THEY'RE EVERYWHERE! üí©üí©","WELL BUTTER MY BISCUIT... IN TURD! üí©","DAG NABBIT! üí©","TARNATION! üí©","WHAT IN TURD-NATION?! üí©","AW SHUCKS... LITERALLY! üí©","CONSARNIT! üí©","TURD INCOMING! TAKE COVER! üõ°Ô∏èüí©","HOSTILE TURD! üí©","TURD AT 12 O'CLOCK! ‚è∞üí©","WE'RE TAKING TURD FIRE! üí©","MAN DOWN... IN TURD! üí©","NOOOOO! üí©","WHY MEEEE?! üí©","THIS IS THE WORST DAY! üí©","I DIDN'T SIGN UP FOR THIS! üí©","THEY GOT ME! üí©","TURD ATTACK! üí©","THAT BIRD HAD TACO BELL! üåÆüí©","SOMEONE HAD FIBER! üí©","BIG TURD ENERGY! üí©","THAT'S A CHONKER! üí©","SIZE XL TURD! üí©","PREMIUM ORGANIC TURD! üí©","SWAMP MISSILE! üí©","BAYOU BOMB! üí©","GATOR BAIT... I MEAN TURD! üí©","EVERYTHING'S BIGGER IN TEXAS... INCLUDING TURDS! üí©","YEEHAW... NOT! üí©","SPLAT ATTACK! üí©","TURD TORPEDO! üí©","POOP PROJECTILE! üí©","DOOKIE DELIVERY! üì¶üí©","SPECIAL DELIVERY! üí©","AIR MAIL FROM HELL! ‚úâÔ∏èüí©"],shakeMessages=["SHAKE IT OFF! üíÉ","EWWW BEGONE! üôÖ","TURD-B-GONE! ‚ú®","SHAKE SHAKE SHAKE! üï∫","NOT TODAY TURD! üö´üí©","BYEBYE BIRD BOMBS! üëã","CLEANED UP! üßπ","GET OFF ME! üí©","SHAKIN' THE TURDS! üíÉ","FRESH AND CLEAN! ‚ú®","TURD FREE ZONE! üö´üí©","BACK TO FRESH! üå∏","SMELL YA LATER! üëÉüí©"],animalMessages={bear:["BEAR DOWN! üêª","THAT'S UNBEARABLE! üêª","BEAR WITH ME! üêª"],wolf:["HOWL YOU DOIN'? üê∫","WOLF DOWN! üê∫","THAT'S RUFF! üê∫"],cougar:["COUGAR ALERT! ü¶Å","CAT-ASTROPHE! üê±","PURRFECT SHOT! üéØ"],deer:["OH DEER! ü¶å","DEER ME! ü¶å","FAWN-TASTIC! ü¶å"],dog:["BAD DOG! üêï","GOOD BOY... NOT! üê∂","RUFF DAY! üêï"],elk:["ELK-CELLENT! ü¶å","WHAT THE ELK! ü¶å","ELK YEAH! ü¶å"]},stormMessages=["‚õàÔ∏è STORM INCOMING!","üå©Ô∏è LIGHTNING APPROACHING!","‚ö° TAKE COVER!","üåßÔ∏è STORM CLOUDS GATHERING!","‚õàÔ∏è SEEK SHELTER!","üå©Ô∏è WATCH THE SKIES!"],WOKE_GLOBALIST_TYPES=[{type:1,title:"Syringe Pusher",points:500,coins:25,speed:42,walkFrames:4,throwFrames:4,arrestedFrames:3,hasSyringePush:!0,quotes:["Trust the science!","Take your medicine!","It's for your own good!","Just one more shot!"]},{type:2,title:"The Suit",points:500,coins:25,speed:45,walkFrames:12,throwFrames:4,arrestedFrames:3,quotes:["Hope and change!","Yes we can!","You didn't build that!","Elections have consequences!"]},{type:3,title:"Phone Addict",points:500,coins:25,speed:48,walkFrames:4,throwFrames:4,arrestedFrames:3,quotes:["Delete those emails!","What difference does it make?!","I'm with her!","Deplorables everywhere!"]},{type:4,title:"The Hoodie",points:500,coins:25,speed:40,walkFrames:4,throwFrames:4,arrestedFrames:3,quotes:["Censor everything!","That's misinformation!","Trust the fact checkers!","You're banned!"]}],SPIRITUAL_WARFARE_SCRIPTURES=[{verse:"No weapon formed against you shall prosper.",ref:"Isaiah 54:17"},{verse:"Submit to God. Resist the devil and he will flee from you.",ref:"James 4:7"},{verse:"Put on the full armor of God to stand against the devil's schemes.",ref:"Ephesians 6:11"},{verse:"The Lord is my light and my salvation‚Äîwhom shall I fear?",ref:"Psalm 27:1"},{verse:"If God is for us, who can be against us?",ref:"Romans 8:31"},{verse:"Greater is He that is in you than he that is in the world.",ref:"1 John 4:4"},{verse:"Be strong in the Lord and in His mighty power.",ref:"Ephesians 6:10"},{verse:"The God of peace will soon crush Satan under your feet.",ref:"Romans 16:20"},{verse:"We are more than conquerors through Him who loved us.",ref:"Romans 8:37"},{verse:"Fight the good fight of the faith.",ref:"1 Timothy 6:12"},{verse:"The battle is not yours, but God's.",ref:"2 Chronicles 20:15"},{verse:"Stand firm then, with the belt of truth buckled around your waist.",ref:"Ephesians 6:14"}],DEMON_FLEE_SCRIPTURES=[{verse:"Resist the devil, and he will flee from you.",ref:"James 4:7"},{verse:"The God of peace will soon crush Satan under your feet.",ref:"Romans 16:20"},{verse:"Greater is He that is in you than he that is in the world.",ref:"1 John 4:4"},{verse:"They overcame him by the blood of the Lamb and by the word of their testimony.",ref:"Revelation 12:11"},{verse:"The devil prowls around like a roaring lion, but resist him, standing firm in the faith.",ref:"1 Peter 5:8-9"},{verse:"I have given you authority to trample on snakes and scorpions and over all the power of the enemy.",ref:"Luke 10:19"},{verse:"The reason the Son of God appeared was to destroy the devil's work.",ref:"1 John 3:8"},{verse:"Be strong in the Lord and in his mighty power.",ref:"Ephesians 6:10"},{verse:"In all things we are more than conquerors through Him who loved us.",ref:"Romans 8:37"},{verse:"For our struggle is not against flesh and blood, but against the spiritual forces of evil.",ref:"Ephesians 6:12"},{verse:"The Lord will rescue me from every evil attack and bring me safely to His heavenly kingdom.",ref:"2 Timothy 4:18"},{verse:"Put on the full armor of God, so that you can take your stand against the devil's schemes.",ref:"Ephesians 6:11"},{verse:"You, dear children, are from God and have overcome them.",ref:"1 John 4:4"},{verse:"Thanks be to God! He gives us the victory through our Lord Jesus Christ.",ref:"1 Corinthians 15:57"}],SHOP_SILENT_MODE={name:"Silent Mode",description:"Play without comments, jokes, or scripture popups",cost:500,id:"silent_mode"},GLOBALIST_QUOTES=["You'll own nothing and like it!","The Great Reset is coming!","Trust the experts!","It's for your own good!","We know what's best!","Borders are outdated!","Nationalism is evil!","Obey the science!","Diversity is our strength!","Check your privilege!","That's misinformation!","You need re-education!","Comply or else!","Free speech is dangerous!","We're the good guys!","Think globally!","Your carbon footprint!","Eat the bugs!","Digital ID for all!","One world government!"],ARREST_QUOTES=["GOTCHA GLOBALIST!","SWAMP CREATURE CAUGHT!","DRAINING THE SWAMP!","PATRIOT POWER!","OFF TO JAIL!","NO ESCAPE!","AMERICA FIRST!","FREEDOM WINS!","CAUGHT RED-HANDED!","CLEANING UP DC!","TAKE THAT GLOBALIST!","LOCKED UP!","NO WEAPON SHALL PROSPER!","RESIST THE DEVIL!","TRUTH PREVAILS!"],VILLAIN_CONFIG={minLevel:7,arrestRange:100,escapeTime:25,levelMultipliers:{1:{chance:0,interval:999},2:{chance:0,interval:999},3:{chance:0,interval:999},4:{chance:0,interval:999},5:{chance:0,interval:999},6:{chance:0,interval:999},7:{chance:.85,interval:2.5},8:{chance:.15,interval:10}}},DEMON_WHITEHOUSE_CONFIG={spawnChance:.7,spawnInterval:4,maxDemons:5,damagePerHit:15},SWAMP_MESSAGES=["DRAIN THE SWAMP!","WOKE TURD GLOBALISTS EVERYWHERE!","STOP THEM FROM REACHING THE WHITE HOUSE!","CLEAN UP THESE WOKE TURDS!","HELP THE TEAM DRAIN THE SWAMP!","ARREST THEM ALL FOR BIG POINTS!","KEEP THE GLOBALISTS OUT!","PROTECT THE WHITE HOUSE!","THE SWAMP CREATURES ARE COMING!","DRAIN IT! DRAIN IT! DRAIN IT!"],WHITEHOUSE_SWAMP_MESSAGES=["STRAGGLERS FROM THE SWAMP!","THEY MADE IT PAST THE SWAMP!","FINISH DRAINING THE SWAMP!","PROTECT TRUMP!","LAST OF THE GLOBALISTS!","CLEAN HOUSE LITERALLY!"],lightningHitMessages=["‚ö° ZAP!","‚ö° SHOCKING!","‚ö° ELECTRIFYING!","‚ö° THUNDERSTRUCK!"],shootableBirdKillMessages=["Way to shoot that turder! üí©","That bird had it coming! üéØ","Bye bye birdie! üëã","BOOM! Feathers everywhere! üí•","That's what you get for turding! üí©","No more turds from that one! üö´üí©","Turd machine DESTROYED! üî•","Another turder bites the dust! üéµ","Fowl play? More like FAIR play! üéØ","That bird won't turd again! üéØ","SPLAT goes the turder! üí©","One less turd in the sky! ‚òÅÔ∏è","That's for all the car washes! üöó","Revenge is sweet! üç¨","Target eliminated! üéØ","That bird was full of... well, you know! üí©","Feather duster! üßπ","You showed that turder! üëä","Nice shot, hunter! üèÜ","That bird was asking for it! üò§","KABOOM! No more turds! üí•","Bird down! Turd count: -1! üìâ","You're on FIRE! üî•","The turder has been terminated! ü§ñ","Clean shot! Dirty bird! üí©"],protectedBirdHitMessages=["Dude, that bird was your FRIEND! üò±","Whoa! That one helps YOU! ü¶Ö","Wrong bird, genius! üôÑ","That eagle was on YOUR side! üò§","Are you TRYING to lose?! ü§¶","That's a HELPER bird! Read the rules! üìñ","Friendly fire! NOT cool! üò†","That bird eats turders FOR you! üçΩÔ∏è","Bro, that's an ALLY! ü§ù","Eagles are FRIENDS not FOOD! ü¶Ö","That hawk was helping you! ü¶Ö","You just shot your wingman! ‚úàÔ∏è","That bird was MVP! Now YOU'RE not! üòÖ","Protected species, dude! üö´","That's like shooting your own goalie! ‚öΩ","The EPA is NOT happy! üåø","Conservation officers incoming! üöî","That bird had a FAMILY! üò¢","Bad hunter! No cookie! üç™üö´","You monster! üëπ","That eagle did nothing to you! üò≠","Read the bird guide! üìö"],protectedParkMessages=["üèûÔ∏è NO HUNTING ZONE! -100 pts!","üö´ This is a WILDLIFE SANCTUARY!","üå≤ Protected area! Put the gun DOWN!","üèûÔ∏è Can't shoot here, ranger's watching!","üöî GAME WARDEN ALERT! -100 pts!","üåø Nature preserve! No shooting!","ü¶å The animals here are PROTECTED!","üìã That'll be a $100 fine, hunter!"],tireShotMessages=["üéØ FLAT TIRE! Tractor stopped!","üí® PSSSHHH! Nice shot!","üîß That farmer's gonna be MAD!","üöú Tractor DOWN!","üí• TIRE BLOWOUT! You showed that tractor!","üõû Wheel deal! +15 pts!","üéØ Bullseye on the rubber!","üöú Tractor trouble! Haha!","üí® Air goes WHOOSH!","üõû That tire had a family! Just kidding!"],windMessages=["üå™Ô∏è TORNADO INCOMING!","üí® WIND PICKING UP!","üåÄ TWISTER APPROACHING!","üí® Hold onto your hat!","üå™Ô∏è Birds getting blown away!"],tornadoKillMessages=["üå™Ô∏è SWEPT AWAY!","üí® BLOWN TO BITS!","üåÄ TWISTER TAKEDOWN!","üí® Wind did the work!","üå™Ô∏è Nature's cleanup crew!"],speciesConfig={duck:{sprite:"duck",shootable:!0,score:10,turdRate:.35,speed:120,coinDrop:2,size:.025},mallard:{sprite:"duck",shootable:!0,score:12,turdRate:.35,speed:115,coinDrop:2,size:.025},goose:{sprite:"goose",shootable:!0,score:12,turdRate:.35,speed:110,coinDrop:3,size:.025},canadagoose:{sprite:"goose",shootable:!0,score:14,turdRate:.4,speed:105,coinDrop:3,size:.025},chicken:{sprite:"chicken",shootable:!0,score:8,turdRate:.3,speed:90,coinDrop:1,size:.02},pigeon:{sprite:"pigeon",shootable:!0,score:8,turdRate:.3,speed:100,coinDrop:1,size:.025},turkey:{sprite:"turkey",shootable:!0,score:15,turdRate:.4,speed:85,coinDrop:4,size:.025},wildturkey:{sprite:"turkey",shootable:!0,score:18,turdRate:.45,speed:80,coinDrop:5,size:.0255},seagull:{sprite:"seagull",shootable:!0,score:12,turdRate:.45,speed:130,coinDrop:2,size:.02},magpie:{sprite:"magpie",shootable:!0,score:10,turdRate:.35,speed:125,coinDrop:2,size:.025},crow:{sprite:"crow",shootable:!0,score:6,turdRate:.3,speed:115,coinDrop:1,size:.025},raven:{sprite:"crow",shootable:!0,score:8,turdRate:.32,speed:110,coinDrop:1,size:.02},vulture:{sprite:"vulture",shootable:!0,score:14,turdRate:.35,speed:95,coinDrop:3,size:.025},owl:{sprite:"owl",shootable:!0,score:10,turdRate:.25,speed:80,coinDrop:2,size:.02,nightOnly:!0},pheasant:{sprite:"pheasant",shootable:!0,score:20,turdRate:.3,speed:100,coinDrop:5,size:.025},quail:{sprite:"quail",shootable:!0,score:8,turdRate:.2,speed:140,coinDrop:2,size:.02},grouse:{sprite:"grouse",shootable:!0,score:15,turdRate:.25,speed:95,coinDrop:4,size:.02},partridge:{sprite:"partridge",shootable:!0,score:12,turdRate:.25,speed:105,coinDrop:3,size:.025},dove:{sprite:"dove",shootable:!0,score:10,turdRate:.2,speed:135,coinDrop:2,size:.025},woodcock:{sprite:"woodcock",shootable:!0,score:14,turdRate:.22,speed:90,coinDrop:3,size:.025},snipe:{sprite:"snipe",shootable:!0,score:12,turdRate:.2,speed:145,coinDrop:3,size:.02},teal:{sprite:"teal",shootable:!0,score:10,turdRate:.3,speed:140,coinDrop:2,size:.02},pintail:{sprite:"pintail",shootable:!0,score:12,turdRate:.32,speed:125,coinDrop:3,size:.02},woodduck:{sprite:"woodduck",shootable:!0,score:14,turdRate:.3,speed:120,coinDrop:3,size:.02},baldeagle:{sprite:"baldeagle",shootable:!1,helper:!0,score:-50,turdRate:0,coinDropRate:.15,speed:150,size:.0255},goldeneagle:{sprite:"goldeneagle",shootable:!1,helper:!0,score:-50,turdRate:0,coinDropRate:.15,speed:145,size:.025},hawk:{sprite:"hawk",shootable:!1,helper:!0,score:-30,turdRate:0,coinDropRate:.12,speed:140,size:.025},falcon:{sprite:"falcon",shootable:!1,helper:!0,score:-40,turdRate:0,coinDropRate:.12,speed:180,size:.02},osprey:{sprite:"osprey",shootable:!1,helper:!0,score:-35,turdRate:0,coinDropRate:.12,speed:135,size:.025},parrot:{sprite:"parrot",shootable:!1,score:-20,turdRate:.25,speed:115,size:.02},peacock:{sprite:"peacock",shootable:!1,score:-25,turdRate:.25,speed:80,size:.0255},pelican:{sprite:"pelican",shootable:!1,score:-20,turdRate:.3,speed:95,size:.025},stork:{sprite:"stork",shootable:!1,score:-20,turdRate:.25,speed:105,size:.025},flamingo:{sprite:"flamingo",shootable:!1,score:-20,turdRate:.25,speed:90,size:.025},heron:{sprite:"heron",shootable:!1,score:-20,turdRate:.25,speed:85,size:.0255},crane:{sprite:"crane",shootable:!1,score:-25,turdRate:.25,speed:95,size:.0255},swan:{sprite:"swan",shootable:!1,score:-30,turdRate:.3,speed:100,size:.025},dodo:{sprite:"dodo",shootable:!1,score:-30,turdRate:.4,speed:70,size:.025},toucan:{sprite:"toucan",shootable:!1,score:-15,turdRate:.25,speed:100,size:.02},penguin:{sprite:"penguin",shootable:!1,score:-20,turdRate:.2,speed:60,size:.025,groundBird:!0},bat:{sprite:"bat",shootable:!1,score:-15,turdRate:.1,speed:160,nightOnly:!0,coinDrop:0,size:.025,protected:!0},pterodactyl:{sprite:"pterodactyl",shootable:!0,score:100,turdRate:.5,speed:180,coinDrop:25,size:.07,health:5,boss:!0},phoenix:{sprite:"phoenix",shootable:!0,score:150,turdRate:.4,speed:200,coinDrop:50,size:.06,health:3,respawns:!0,boss:!0},dragon:{sprite:"dragon",shootable:!0,score:500,turdRate:.6,speed:120,coinDrop:100,size:.09,health:10,boss:!0},thunderbird:{sprite:"thunderbird",shootable:!0,score:300,turdRate:.55,speed:160,coinDrop:75,size:.075,health:8,boss:!0}},groundAnimals={deer:{sprite:"deer",speed:80,dangerous:!1,penalty:-15,canCharge:!0,chargeDamage:15},elk:{sprite:"elk",speed:70,dangerous:!1,penalty:-25,canCharge:!0,chargeDamage:20},bear:{sprite:"bear",speed:60,dangerous:!0,points:25,coins:5},cougar:{sprite:"cougar",speed:100,dangerous:!0,points:20,coins:4},wolf:{sprite:"wolf",speed:90,dangerous:!0,points:15,coins:3},dog:{sprite:"dog",speed:70,dangerous:!1,penalty:-30},cat:{sprite:"cat",speed:50,dangerous:!1,penalty:-25},rabbit:{sprite:"rabbit",speed:120,dangerous:!1,penalty:-15},fox:{sprite:"fox",speed:85,dangerous:!1,penalty:-15},skunk:{sprite:"skunk",speed:40,dangerous:!1,penalty:-10},cow:{sprite:"cow",speed:30,dangerous:!1,penalty:-50,isFarmAnimal:!0,message:"üêÑ You shot a cow! -50 pts! God's creatures are precious!"},pig:{sprite:"pig",speed:45,dangerous:!1,penalty:-40,isFarmAnimal:!0,message:"üê∑ You shot a pig! -40 pts! That poor piggy!"},horse:{sprite:"horse",speed:90,dangerous:!1,penalty:-75,isFarmAnimal:!0,canNudge:!0,message:"üê¥ You shot a horse! -75 pts! Horses are majestic!"},sheep:{sprite:"sheep",speed:35,dangerous:!1,penalty:-35,isFarmAnimal:!0,message:"üêë You shot a sheep! -35 pts! The Lord is our shepherd!"},goat:{sprite:"goat",speed:50,dangerous:!1,penalty:-30,isFarmAnimal:!0,message:"üêê You shot a goat! -30 pts! Be kind to all creatures!"},chicken_ground:{sprite:"chicken",speed:60,dangerous:!1,penalty:-20,isFarmAnimal:!0,message:"üêî You shot a chicken! -20 pts! It was just pecking!"},rooster:{sprite:"rooster",speed:55,dangerous:!1,penalty:-25,isFarmAnimal:!0,message:"üêì You shot a rooster! -25 pts! It was just crowing!"},turkey_ground:{sprite:"turkey",speed:40,dangerous:!1,penalty:-30,isFarmAnimal:!0,message:"ü¶É You shot a turkey! -30 pts! It wasn't Thanksgiving!"}},npcTypes={hiker:{sprite:"hiker",speed:50},farmer:{sprite:"farmer",speed:40},jogger:{sprite:"jogger",speed:90},cyclist:{sprite:"cyclist",speed:120},child:{sprite:"child",speed:60},fisherman:{sprite:"fisherman",speed:30}},LEVEL_CONFIG={0:{birdsToKill:10,spawnRate:3,birdSpeed:.85,turdChance:.04,bossChance:.02,name:"Christmas Celebration üéÑ"},1:{birdsToKill:15,spawnRate:2.6,birdSpeed:.95,turdChance:.08,bossChance:.03,name:"Country Farm"},2:{birdsToKill:20,spawnRate:2,birdSpeed:1.05,turdChance:.15,bossChance:.05,name:"Deep Forest"},3:{birdsToKill:25,spawnRate:1.8,birdSpeed:1.1,turdChance:.18,bossChance:.07,name:"Fishing Lake"},4:{birdsToKill:0,spawnRate:2.5,birdSpeed:.8,turdChance:.1,bossChance:0,name:"STATE PARK (NO HUNTING!)"},5:{birdsToKill:30,spawnRate:1.6,birdSpeed:1.15,turdChance:.22,bossChance:.1,name:"Wild West Desert"},6:{birdsToKill:35,spawnRate:1.4,birdSpeed:1.2,turdChance:.25,bossChance:.12,name:"Frozen Peaks"},7:{birdsToKill:40,spawnRate:1.3,birdSpeed:1.25,turdChance:.28,bossChance:.14,name:"Coastal Beach"},8:{birdsToKill:45,spawnRate:1.2,birdSpeed:1.3,turdChance:.3,bossChance:.16,name:"Quiet Suburbs"},9:{birdsToKill:50,spawnRate:1.1,birdSpeed:1.35,turdChance:.33,bossChance:.18,name:"Western Town"},10:{birdsToKill:30,spawnRate:1.5,birdSpeed:1.2,turdChance:.2,bossChance:.1,name:"Church Camp"},11:{birdsToKill:60,spawnRate:.9,birdSpeed:1.4,turdChance:.5,bossChance:.22,name:"THE SWAMP"},12:{birdsToKill:100,spawnRate:.7,birdSpeed:1.5,turdChance:.45,bossChance:.3,name:"WHITE HOUSE FINAL"},13:{birdsToKill:100,spawnRate:.7,birdSpeed:1.5,turdChance:.45,bossChance:.3,name:"WHITE HOUSE FINAL"}},isChristmasSeason=void 0!==window.isChristmasSeason?window.isChristmasSeason:()=>!0,CHRISTMAS_SCRIPTURES=['"For unto us a child is born, unto us a son is given." ‚Äî Isaiah 9:6','"Glory to God in the highest, and on earth peace, good will toward men." ‚Äî Luke 2:14','"For God so loved the world, that he gave his only begotten Son." ‚Äî John 3:16','"She will bear a son, and you shall call his name Jesus." ‚Äî Matthew 1:21','"Today in the town of David a Savior has been born to you; he is Christ the Lord." ‚Äî Luke 2:11','"The Word became flesh and dwelt among us." ‚Äî John 1:14','"Thanks be to God for his indescribable gift!" ‚Äî 2 Corinthians 9:15','"Every good gift and every perfect gift is from above." ‚Äî James 1:17','"Behold, I bring you good tidings of great joy." ‚Äî Luke 2:10','"And she brought forth her firstborn son, and wrapped him in swaddling clothes." ‚Äî Luke 2:7'],CHRISTMAS_MESSAGES=["üéÑ Merry Christmas! Jesus is the reason for the season!","‚≠ê Glory to God in the highest!","üéÅ Jesus is the greatest gift ever given!","üïØÔ∏è The Light of the World has come!","üîî Joy to the world, the Lord has come!","‚úùÔ∏è For unto us a child is born!","‚õ™ O come let us adore Him!","‚ùÑÔ∏è Be thankful for family and blessings!","üôè Give thanks for what you have!","üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Cherish your family this Christmas!"],buildSceneSequence=()=>{const e=[];isChristmasSeason()&&e.push({key:"christmas",name:"CHRISTMAS CELEBRATION üéÑ",level:0,attire:"casual",animals:["deer","rabbit","sheep","goat"],npcs:["farmer","hiker"],skyColor:661032,ambientTint:16772829,music:"peaceful",groundColor:16777215,groundColorLight:15658751,birdsToKill:10,isChristmas:!0,description:"üéÑ Merry Christmas! Celebrate the birth of Jesus! Kill 10 birds to begin your journey!"});const t=isChristmasSeason()?1:0;return e.push({key:"farm",name:`Level ${1+t}: Country Farm`,level:1+t,attire:"casual",animals:["deer","rabbit","dog","cat","cow","pig","chicken_ground","sheep","horse"],npcs:["farmer","hiker"],skyColor:8900331,ambientTint:16777215,music:"country",groundColor:4881443,groundColorLight:7052090,birdsToKill:15,description:"Start your journey! Kill 15 birds to advance. üêÑ Don't shoot the farm animals!"},{key:"forest",name:`Level ${2+t}: Deep Forest`,level:2+t,attire:"forest",animals:["deer","elk","bear","fox","rabbit"],npcs:["hiker"],skyColor:7058393,ambientTint:15267305,music:"forest",groundColor:2969622,groundColorLight:4025118,birdsToKill:20,description:"Into the wild! Kill 20 birds to advance."},{key:"lake",name:`Level ${3+t}: Fishing Lake`,level:3+t,attire:"casual",animals:["deer","dog"],npcs:["fisherman","hiker"],skyColor:8900331,ambientTint:14938877,music:"peaceful",groundColor:6064701,groundColorLight:8038485,birdsToKill:25,description:"Waterfowl galore! Kill 25 birds to advance."},{key:"statepark",name:`Level ${4+t}: STATE PARK`,level:4+t,attire:"casual",animals:["deer","rabbit","fox"],npcs:["hiker"],skyColor:8900331,ambientTint:16775388,music:"peaceful",groundColor:4876097,groundColorLight:6062930,birdsToKill:0,isProtectedPark:!0,description:"üö´ NO HUNTING! Walk through without shooting to advance."},{key:"desert",name:`Level ${5+t}: Wild West Desert`,level:5+t,attire:"desert",animals:["rabbit","fox"],npcs:["hiker"],skyColor:16498468,ambientTint:16708551,music:"desert",groundColor:13214247,groundColorLight:14399562,birdsToKill:30,description:"Vultures and heat! Kill 30 birds to advance."},{key:"snowmountain",name:`Level ${6+t}: Frozen Peaks`,level:6+t,attire:"winter",animals:["rabbit","wolf","cougar"],npcs:["hiker"],skyColor:12573694,ambientTint:14742270,music:"winter",groundColor:15263976,groundColorLight:16777215,birdsToKill:35,description:"Brutal cold! Kill 35 birds to advance."},{key:"beach",name:`Level ${7+t}: Coastal Beach`,level:7+t,attire:"casual",animals:["dog","cat"],npcs:["fisherman","hiker"],skyColor:8900331,ambientTint:14743546,music:"peaceful",groundColor:12755814,groundColorLight:14598280,birdsToKill:40,description:"Seagulls everywhere! Kill 40 birds to advance."},{key:"suburbs",name:`Level ${8+t}: Quiet Suburbs`,level:8+t,attire:"casual",animals:["dog","cat","rabbit","chicken_ground"],npcs:["farmer","hiker"],skyColor:8900331,ambientTint:16777215,music:"country",groundColor:6060613,groundColorLight:7244885,birdsToKill:45,description:"Neighborhood crows! Kill 45 birds to advance."},{key:"town",name:`Level ${9+t}: Western Town`,level:9+t,attire:"urban",animals:["dog","cat"],npcs:["farmer","hiker"],skyColor:8900331,ambientTint:16775388,music:"country",groundColor:9139029,groundColorLight:10518624,birdsToKill:50,description:"Urban swarms! Kill 50 birds to advance."},{key:"churchcamp",name:`Level ${10+t}: Church Camp`,level:10+t,attire:"casual",animals:["deer","rabbit","sheep","goat","chicken_ground","rooster"],npcs:["hiker"],skyColor:16498468,ambientTint:16708551,music:"peaceful",groundColor:4881443,groundColorLight:6065717,birdsToKill:30,isChurchCamp:!0,description:"Peaceful retreat! Kill 30 birds. üêë Don't harm the peaceful animals!"},{key:"swamp",name:`Level ${11+t}: THE SWAMP`,level:11+t,attire:"swamp",animals:[],npcs:[],isSwamp:!0,skyColor:4873507,ambientTint:13952677,music:"swamp",groundColor:4016682,groundColorLight:5069878,birdsToKill:60,description:"DRAIN THE SWAMP! Kill 60 globalist turds!"},{key:"whitehouse",name:`Level ${12+t}: THE WHITE HOUSE`,level:12+t,attire:"formal",animals:[],npcs:[],isWhiteHouse:!0,hasTrump:!0,skyColor:1982639,ambientTint:16777215,music:"anthem",groundColor:2969622,groundColorLight:4025118,birdsToKill:100,isFinalLevel:!0,description:"FINAL LEVEL! Defeat all bosses to WIN!"}),e},sceneSequence=buildSceneSequence(),sceneTransitionMessages={christmas:["üéÑ MERRY CHRISTMAS!","Jesus is the reason for the season!","Be thankful for family and blessings!"],farm:["Fresh country air!","Easy hunting ahead!","Kill 15 birds to advance!"],forest:["Into the wild!","Bears ahead! Be careful!","Kill 20 birds to advance!"],lake:["Great fishing spot!","Ducks love it here!","Kill 25 birds to advance!"],statepark:["STATE PARK!","üö´ NO HUNTING ZONE!","Don't shoot - just walk through!"],desert:["It's getting hot!","Vultures circling!","Kill 30 birds to advance!"],snowmountain:["Bundle up!","Ice cold hunting!","Kill 35 birds to advance!"],beach:["Coastal vibes!","Seagulls everywhere!","Kill 40 birds to advance!"],suburbs:["Quiet neighborhood!","Watch for crows!","Kill 45 birds to advance!"],town:["Urban jungle!","Pigeons swarm!","Kill 50 birds to advance!"],churchcamp:["Church Camp!","Peaceful retreat!","Kill 30 birds - extra scriptures!"],swamp:["THE SWAMP!","DRAIN THE SWAMP!","Kill 60 globalist turds!"],whitehouse:["THE WHITE HOUSE!","FINAL LEVEL!","Defeat ALL bosses to WIN!"]},TRUMP_QUOTES={entrance:["Make America Great Again, Shooters!","DRAIN THE TURDS!","We have the BEST hunters, believe me!","This is TREMENDOUS! Just tremendous!","We're gonna win SO much!","God bless America!"],welcome:["You made it! TREMENDOUS!","Welcome to the White House, patriot!","Only the BEST hunters get here!","You're a TRUE American hero!","Come on in, you've EARNED it!"],fistShake:["We'll build a wall! Keep these turds OUT!","I've been shot at and survived ‚Äî may God be with us!","Turds may happen, but I'm not worried!","This is a GREAT, GREAT game!","Nobody's tougher than us!"],protected:["TREMENDOUS job, patriot!","You're a winner!","That's what I call AMERICAN!","Keep America Great!","God bless you!"]};class BirdTurdsScene extends Phaser.Scene{constructor(){super("BirdTurds"),this.soundEnabled=!0}preload(){const e=this.add.rectangle(640,320,1280,640,1710638),t=this.add.text(640,260,"üéÆ BIRDTURDS üéÆ",{fontSize:"32px",fontStyle:"bold",color:"#ffd700"}).setOrigin(.5),a=this.add.text(640,300,"Loading...",{fontSize:"18px",color:"#ffffff"}).setOrigin(.5),i=this.add.rectangle(640,350,300,20,3355443),s=this.add.rectangle(492,350,4,16,2278750).setOrigin(0,.5),o=this.add.text(640,380,"0%",{fontSize:"14px",color:"#88ccff"}).setOrigin(.5);this.load.on("progress",e=>{s.width=296*e,o.setText(Math.round(100*e)+"%")}),this.load.on("complete",()=>{e.destroy(),t.destroy(),a.destroy(),i.destroy(),s.destroy(),o.destroy()});const n=(e,t)=>{try{this.load.image(e,t)}catch(t){console.warn("Failed to load:",e,t)}};this.failedAssets=[],this.load.on("loaderror",e=>{console.warn("‚ö†Ô∏è Asset failed to load:",e.key,e.src),this.failedAssets.push(e.key)}),this.load.spritesheet("buck_idle","/sprites/characters/buck_idle.png",{frameWidth:414,frameHeight:516}),this.load.spritesheet("buck_walk","/sprites/characters/buck_walk.png",{frameWidth:358,frameHeight:494}),this.load.spritesheet("buck_run","/sprites/characters/buck_run.png",{frameWidth:412,frameHeight:506}),this.load.spritesheet("buck_shoot","/sprites/characters/buck_shoot.png",{frameWidth:640,frameHeight:488}),this.load.spritesheet("buck_jump","/sprites/characters/buck_jump.png",{frameWidth:298,frameHeight:602}),this.load.spritesheet("buck_hurt","/sprites/characters/buck_hurt.png",{frameWidth:360,frameHeight:426}),this.load.spritesheet("daisy_idle","/sprites/characters/daisy_idle.png",{frameWidth:426,frameHeight:508}),this.load.spritesheet("daisy_walk","/sprites/characters/daisy_walk.png",{frameWidth:476,frameHeight:512}),this.load.spritesheet("daisy_run","/sprites/characters/daisy_run.png",{frameWidth:374,frameHeight:458}),this.load.spritesheet("daisy_shoot","/sprites/characters/daisy_shoot.png",{frameWidth:474,frameHeight:402}),this.load.spritesheet("daisy_jump","/sprites/characters/daisy_jump.png",{frameWidth:374,frameHeight:536}),this.load.spritesheet("daisy_hurt","/sprites/characters/daisy_hurt.png",{frameWidth:386,frameHeight:418}),this.load.spritesheet("clyde_idle","/sprites/characters/clyde_idle.png",{frameWidth:500,frameHeight:500}),this.load.spritesheet("clyde_walk","/sprites/characters/clyde_walk.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("clyde_run","/sprites/characters/clyde_run.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("clyde_shoot","/sprites/characters/clyde_shoot.png",{frameWidth:400,frameHeight:400}),this.load.spritesheet("clyde_jump","/sprites/characters/clyde_jump.png",{frameWidth:350,frameHeight:450}),this.load.spritesheet("clyde_hurt","/sprites/characters/clyde_hurt.png",{frameWidth:350,frameHeight:400}),this.load.spritesheet("bubba_idle","/sprites/characters/bubba_idle.png",{frameWidth:424,frameHeight:470}),this.load.spritesheet("bubba_walk","/sprites/characters/bubba_walk.png",{frameWidth:380,frameHeight:440}),this.load.spritesheet("bubba_run","/sprites/characters/bubba_run.png",{frameWidth:380,frameHeight:440}),this.load.spritesheet("bubba_shoot","/sprites/characters/bubba_shoot.png",{frameWidth:380,frameHeight:400}),this.load.spritesheet("bubba_jump","/sprites/characters/bubba_jump.png",{frameWidth:350,frameHeight:450}),this.load.spritesheet("bubba_hurt","/sprites/characters/bubba_hurt.png",{frameWidth:350,frameHeight:400}),this.load.spritesheet("gunner_idle","/sprites/characters/gunner_idle.png",{frameWidth:450,frameHeight:480}),this.load.spritesheet("gunner_walk","/sprites/characters/gunner_walk.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("gunner_run","/sprites/characters/gunner_run.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("gunner_shoot","/sprites/characters/gunner_shoot.png",{frameWidth:400,frameHeight:400}),this.load.spritesheet("gunner_jump","/sprites/characters/gunner_jump.png",{frameWidth:350,frameHeight:450}),this.load.spritesheet("gunner_hurt","/sprites/characters/gunner_hurt.png",{frameWidth:350,frameHeight:400}),this.load.spritesheet("jolene_idle","/sprites/characters/jolene_idle.png",{frameWidth:450,frameHeight:500}),this.load.spritesheet("jolene_walk","/sprites/characters/jolene_walk.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("jolene_run","/sprites/characters/jolene_run.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("jolene_shoot","/sprites/characters/jolene_shoot.png",{frameWidth:400,frameHeight:400}),this.load.spritesheet("jolene_jump","/sprites/characters/jolene_jump.png",{frameWidth:350,frameHeight:450}),this.load.spritesheet("jolene_hurt","/sprites/characters/jolene_hurt.png",{frameWidth:350,frameHeight:400}),this.load.spritesheet("sierra_idle","/sprites/characters/sierra_idle.png",{frameWidth:400,frameHeight:480}),this.load.spritesheet("sierra_walk","/sprites/characters/sierra_walk.png",{frameWidth:380,frameHeight:450}),this.load.spritesheet("sierra_run","/sprites/characters/sierra_run.png",{frameWidth:380,frameHeight:450}),this.load.spritesheet("sierra_shoot","/sprites/characters/sierra_shoot.png",{frameWidth:380,frameHeight:400}),this.load.spritesheet("sierra_jump","/sprites/characters/sierra_jump.png",{frameWidth:350,frameHeight:450}),this.load.spritesheet("sierra_hurt","/sprites/characters/sierra_hurt.png",{frameWidth:350,frameHeight:400}),this.load.spritesheet("tammy_idle","/sprites/characters/tammy_idle.png",{frameWidth:450,frameHeight:480}),this.load.spritesheet("tammy_walk","/sprites/characters/tammy_walk.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("tammy_run","/sprites/characters/tammy_run.png",{frameWidth:400,frameHeight:450}),this.load.spritesheet("tammy_shoot","/sprites/characters/tammy_shoot.png",{frameWidth:400,frameHeight:400}),this.load.spritesheet("tammy_jump","/sprites/characters/tammy_jump.png",{frameWidth:350,frameHeight:450}),this.load.spritesheet("tammy_hurt","/sprites/characters/tammy_hurt.png",{frameWidth:350,frameHeight:400}),this.load.spritesheet("trump_walk","/sprites/trump/trump_walk.png",{frameWidth:380,frameHeight:400}),this.load.spritesheet("trump_run","/sprites/trump/trump_run.png",{frameWidth:380,frameHeight:400}),this.load.spritesheet("trump_hurt","/sprites/trump/trump_hurt.png",{frameWidth:320,frameHeight:380}),this.load.spritesheet("bodyguard_walk","/sprites/trump/bodyguard_walk.png",{frameWidth:342,frameHeight:528}),this.load.spritesheet("bodyguard_shoot","/sprites/trump/bodyguard_shoot.png",{frameWidth:640,frameHeight:512}),this.load.spritesheet("angel","/sprites/trump/angel.png",{frameWidth:470,frameHeight:450}),this.load.spritesheet("angel_protect","/sprites/trump/angel_protect.png",{frameWidth:484,frameHeight:462}),this.load.spritesheet("americaneagle","/sprites/trump/americaneagle.png",{frameWidth:450,frameHeight:400}),this.load.spritesheet("globalist_1_walk","/sprites/globalists/globalist_1_walk.png",{frameWidth:640,frameHeight:508}),this.load.spritesheet("globalist_1_throw","/sprites/globalists/globalist_1_throw.png",{frameWidth:640,frameHeight:374}),this.load.spritesheet("globalist_1_arrested","/sprites/globalists/globalist_1_arrested.png",{frameWidth:405,frameHeight:704}),this.load.image("globalist_1_syringe_push","/sprites/globalists/globalist_1_syringe_push.png"),this.load.spritesheet("globalist_2_walk","/sprites/globalists/globalist_2_walk.png",{frameWidth:478,frameHeight:396}),this.load.spritesheet("globalist_2_throw","/sprites/globalists/globalist_2_throw.png",{frameWidth:640,frameHeight:640}),this.load.spritesheet("globalist_2_arrested","/sprites/globalists/globalist_2_arrested.png",{frameWidth:381,frameHeight:908}),this.load.spritesheet("globalist_3_walk","/sprites/globalists/globalist_3_walk.png",{frameWidth:462,frameHeight:532}),this.load.spritesheet("globalist_3_throw","/sprites/globalists/globalist_3_throw.png",{frameWidth:354,frameHeight:426}),this.load.spritesheet("globalist_3_arrested","/sprites/globalists/globalist_3_arrested.png",{frameWidth:385,frameHeight:996}),this.load.spritesheet("globalist_4_walk","/sprites/globalists/globalist_4_walk.png",{frameWidth:396,frameHeight:480}),this.load.spritesheet("globalist_4_throw","/sprites/globalists/globalist_4_throw.png",{frameWidth:322,frameHeight:380}),this.load.spritesheet("globalist_4_arrested","/sprites/globalists/globalist_4_arrested.png",{frameWidth:224,frameHeight:760}),this.load.spritesheet("demon_fly","/sprites/demons/demon_fly.png",{frameWidth:494,frameHeight:452}),this.load.spritesheet("demon_attack","/sprites/demons/demon_attack.png",{frameWidth:432,frameHeight:452}),this.load.spritesheet("demon_hit","/sprites/demons/demon_hit.png",{frameWidth:640,frameHeight:590}),this.load.spritesheet("demon_flee","/sprites/demons/demon_flee.png",{frameWidth:382,frameHeight:436}),this.load.spritesheet("godbless_splash","/sprites/godbless_splash.png",{frameWidth:376,frameHeight:390}),n("farm","/sprites/landscapes/farm.png"),n("forest","/sprites/landscapes/forest.png"),n("desert","/sprites/landscapes/desert.png"),n("lake","/sprites/landscapes/lake.png"),n("snowmountain","/sprites/landscapes/snowmountain.png"),n("town","/sprites/landscapes/town.png"),n("swamp","/sprites/landscapes/swamp.png"),n("whitehouse","/sprites/landscapes/whitehouse.png"),n("statepark","/sprites/landscapes/statepark.png"),n("beach","/sprites/landscapes/beach.png"),n("suburbs","/sprites/landscapes/suburbs.png"),n("churchcamp","/sprites/landscapes/churchcamp.png"),isChristmasSeason()&&n("christmas","/sprites/landscapes/christmas.png"),n("grass","/sprites/landscapes/grass.png"),n("clouds","/sprites/landscapes/clouds.png"),n("snow","/sprites/landscapes/christmas.png"),this.load.audio("buck_shoot","/sounds/buck_shoot.mp3"),this.load.audio("bubba_shoot","/sounds/bubba_shoot.mp3"),this.load.audio("daisy_shoot","/sounds/daisy_shoot.mp3"),this.load.audio("sierra_shoot","/sounds/sierra_shoot.mp3"),this.load.audio("clyde_shoot","/sounds/clyde_shoot.mp3"),this.load.audio("gunner_shoot","/sounds/gunner_shoot.mp3"),this.load.audio("jolene_shoot","/sounds/jolene_shoot.mp3"),this.load.audio("tammy_shoot","/sounds/tammy_shoot.mp3"),this.load.audio("machinegun_sound","/sounds/machinegun.mp3"),this.load.audio("hit_sound","/sounds/hit.mp3"),this.load.audio("splat_sound","/sounds/splat.mp3"),this.load.audio("coin_sound","/sounds/coin.mp3"),this.load.audio("reload_sound","/sounds/reload.mp3"),this.load.audio("explosion_sound","/sounds/explosion.mp3"),this.load.audio("hurt_sound","/sounds/hurt.mp3"),this.load.audio("bird_death_sound","/sounds/bird_death.mp3"),this.load.audio("gameover_sound","/sounds/gameover.mp3"),this.load.audio("music_level1","/sounds/level1_country.mp3"),this.load.audio("music_level2","/sounds/level2_christmas.mp3"),n("tractor_green","/sprites/vehicles/tractor_green.png"),n("tractor_red","/sprites/vehicles/tractor_red.png"),n("tractor","/sprites/vehicles/tractor_green.png"),n("plane","/sprites/vehicles/plane.png"),n("helicopter","/sprites/vehicles/helicopter.png"),n("dirtbike","/sprites/vehicles/dirtbike.png"),n("turd","/sprites/items/turd.png"),n("ammo","/sprites/items/ammo.png"),n("firstaid","/sprites/items/firstaid.png"),n("coin","/sprites/items/coin.png"),n("arrow","/sprites/items/arrow.png"),n("bolt","/sprites/items/bolt.png"),n("bullet","/sprites/items/bullet.png"),n("doublepoints","/sprites/items/doublepoints.png"),n("shield","/sprites/items/shield.png"),n("speedboost","/sprites/items/speedboost.png"),n("hat","/sprites/items/hat.png"),n("rifle","/sprites/weapons/rifle.png"),n("bow","/sprites/weapons/bow.png"),n("crossbow","/sprites/weapons/crossbow.png"),n("knife","/sprites/weapons/knife.png"),n("shotgun","/sprites/weapons/shotgun.png"),n("sniper","/sprites/weapons/sniper.png"),n("machinegun","/sprites/weapons/machinegun.png"),n("flamethrower","/sprites/weapons/flamethrower.png"),n("rocketlauncher","/sprites/weapons/rocketlauncher.png"),n("grenade","/sprites/weapons/grenade.png"),n("axe","/sprites/weapons/axe.png"),n("lasergun","/sprites/weapons/lasergun.png"),Object.keys(speciesConfig).forEach(e=>{const t=speciesConfig[e];n(t.sprite,`/sprites/birds/${t.sprite}.png`)}),Object.keys(groundAnimals).forEach(e=>{const t=groundAnimals[e].sprite;n(e,"chicken"===t||"turkey"===t?`/sprites/birds/${t}.png`:`/sprites/animals/${t}.png`)}),Object.keys(npcTypes).forEach(e=>{n(e,`/sprites/npcs/${e}.png`)}),n("zombie_teen_boy","/sprites/zombies/zombie_teen_boy.png"),n("zombie_teen_girl","/sprites/zombies/zombie_teen_girl.png"),n("zombie_adult_man","/sprites/zombies/zombie_adult_man.png"),n("zombie_adult_woman","/sprites/zombies/zombie_adult_woman.png"),n("person_teen_boy","/sprites/zombies/person_teen_boy.png"),n("person_teen_girl","/sprites/zombies/person_teen_girl.png"),n("person_adult_man","/sprites/zombies/person_adult_man.png"),n("person_adult_woman","/sprites/zombies/person_adult_woman.png"),n("bible_pickup","/sprites/items/bible_pickup.png")}createAnimations(){const e=this.selectedCharacter,t=CHARACTER_ROSTER[e];t&&Object.keys(t.animations).forEach(a=>{const i=t.animations[a],s=`${e}_${a}`;this.anims.exists(s)||this.anims.create({key:s,frames:this.anims.generateFrameNumbers(`${e}_${a}`,{start:0,end:i.frames-1}),frameRate:i.frameRate,repeat:i.loop?-1:0})})}create(){console.log("BirdTurds v17.0: create() started"),this.physics.world.setBounds(0,0,2e4,640),this.groundY=580,console.log("BirdTurds: groundY =",this.groundY),this.isChristmasMode=isChristmasSeason(),this.isChristmasMode&&console.log("üéÑ CHRISTMAS MODE ACTIVE! Merry Christmas!"),this.showGodBlessSplash(),this.selectedCharacter=getSelectedCharacter(),console.log("BirdTurds: Selected character:",this.selectedCharacter),this.characterQuips={buck:["Howdy partner! You picked the right cowboy!","These birds don't stand a chance against me!","My trigger finger's itching! Let's hunt!","I've been waiting all day for this!","Time to show these varmints who's boss!","Lock and load, partner!","My daddy taught me to shoot. His daddy taught him. Family tradition!","I once shot a fly off a fence post at 100 yards!","These birds are gonna wish they flew south!","Yee-haw! Let's get this rodeo started!"],daisy:["Hey y'all! Ready to kick some feathers?","Don't let the boots fool ya, I'm deadly!","Momma didn't raise no quitter!","These birds picked the wrong farm!","Shotgun's loaded and I'm ready!","Sugar, I never miss!","I can shoot and look cute doing it!","My aim is as good as my cooking!","Let's show these birds some Southern hospitality!","Born and raised to hunt!"],bubba:["Well butter my biscuit! Let's hunt!","I'm hungrier than a goat in a briar patch!","Those birds look like target practice!","My shotgun's name is Bertha. She's beautiful!","I wrestled a gator once. Birds are easy!","Time to earn some dinner!","My belly says it's hunting time!","These swamp birds don't scare me none!","Been hunting since I could walk!","Let's bag some birds and grab some biscuits!"],clyde:["Mountains taught me patience. Birds won't.","Been tracking game for 40 years. This'll be easy.","One shot, one kill. That's my motto.","The wilderness is my home.","Silent and deadly, that's me.","I've hunted bigger game than these birds.","My rifle hasn't missed in 20 years.","Nature gave me these skills. Time to use 'em.","Birds fly. I shoot. Simple math.","Let's get this done. Quietly."],sierra:["¬°Vamos! Let's dance with these birds!","My abuela taught me to shoot! She'd be proud!","These birds better run! Or fly! Or whatever!","Two guns, twice the fun!","Fastest draw in the West right here!","They don't call me Quickdraw for nothing!","Watch this! Hold my sweet tea!","Born ready, sugar!","I can shoot a wing off a fly!","Let's show these birds what I'm made of!"],gunner:["Lock and load! Let's do this!","For God and country!","Enemy birds sighted! Engaging!","These feathered targets don't stand a chance!","Semper Fi! Always faithful!","I've trained for this my whole life!","Suppressive fire coming through!","Contact! Multiple birds incoming!","My SAW is gonna sing!","Freedom isn't free, and neither are these birds!"],jolene:["This is my land. These are my rules.","My ranch, my birds, my way!","Raised four kids and a thousand cattle. Birds are nothing!","Grandma's rifle still shoots straight!","I've been protecting this land for generations!","Don't mess with a ranch momma!","My kids learned to shoot right here.","Family legacy on the line! Let's go!","These birds picked the wrong property!","Nothing gets past me on MY land!"],tammy:["Shh... let me work. Quietly.","My crossbow is silent but deadly!","Stealth is my middle name.","They won't even hear it coming.","Ethical hunting requires skill. I have both.","One bolt, clean kill. Always.","Conservation starts with pest control.","These invasive birds gotta go!","Precision over power. Every time.","Watch and learn. Silently."]},this.getCharacterQuip=function(e){const t=this.characterQuips[e]||this.characterQuips.buck;return t[Math.floor(Math.random()*t.length)]},window.getCharacterQuip=e=>this.getCharacterQuip(e),this.createAnimations(),this.createGroups(),console.log("BirdTurds: groups created"),this.createBackground(),console.log("BirdTurds: background created"),this.createHunter(),console.log("BirdTurds: hunter created at",this.hunter?.x,this.hunter?.y),this.createInput(),console.log("BirdTurds: input created"),this.initDebugOverlay(),this.initJokeSystem(),this.isChristmasMode&&this.createChristmasSnow(),this.spawnTimer=0,this.vehicleTimer=0,this.itemTimer=0,this.planeTimer=0,this.animalTimer=0,this.npcTimer=0,this.bossTimer=0,this.firstBossSpawned=!1,this.jokeTimer=0,this.gameOver=!1,this.paused=!1,this.isCrouching=!1,this.walkFrame=0,this.currentSceneIndex=0,this.currentScene=sceneSequence[0],this.fireRateCooldown=0,this.lastDirection=1,this.setupHUD(),this.showInstructions(),this.loadPlayerData(),this.setupCoinDisplay(),this.setupQuickShopKeys(),this.time.delayedCall(1e4,()=>this.showRandomJoke()),this.time.delayedCall(this.breakInterval,()=>this.checkWellness()),this.initBots(2),this.demons=this.physics.add.group(),this.demonLies=this.physics.add.group(),this.demonTimer=0,this.skyClarity=0,this.playerAngel=null}showAngelMenu(){if(this.angelMenuOpen)return;this.angelMenuOpen=!0,this.physics.pause();const e=this.add.rectangle(640,320,1280,640,51,.95).setScrollFactor(0).setDepth(2e3),t=this.add.text(640,35,"üòá SPIRITUAL ARMORY üòá",{fontSize:"28px",fontStyle:"bold",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(2001),a=this.add.text(640,65,'"Put on the full armor of God" ‚Äî Ephesians 6:11',{fontSize:"12px",fontStyle:"italic",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(2001),i=this.add.text(640,95,`Your Coins: ü™ô ${btState.coins}  |  Bible Ammo: üìñ ${btState.bibleAmmo}`,{fontSize:"16px",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(2001),s=[],o=this.add.text(640,125,"‚ú® ANGEL PROTECTION ‚ú®",{fontSize:"16px",fontStyle:"bold",color:"#88ccff"}).setOrigin(.5).setScrollFactor(0).setDepth(2001);s.push(o);[1,2,3].forEach((o,n)=>{const r=ANGEL_PROTECTION[o],h=160+55*n,l=btState.coins>=r.cost,d=this.add.rectangle(640,h,520,45,l?2245666:3351074,.9).setScrollFactor(0).setDepth(2001).setStrokeStyle(2,l?4521796:6702148),c="‚≠ê".repeat(o),u=this.add.text(400,h,`${c} ${r.name}`,{fontSize:"14px",fontStyle:"bold",color:l?"#44ff44":"#666666"}).setOrigin(0,.5).setScrollFactor(0).setDepth(2002),p=this.add.text(620,h,`${r.description} (${r.duration}s)`,{fontSize:"11px",color:"#aaaaaa"}).setOrigin(0,.5).setScrollFactor(0).setDepth(2002),m=this.add.text(870,h,`ü™ô${r.cost}`,{fontSize:"16px",fontStyle:"bold",color:l?"#ffd700":"#444444"}).setOrigin(.5).setScrollFactor(0).setDepth(2002);l&&(d.setInteractive({useHandCursor:!0}),d.on("pointerover",()=>d.setFillStyle(3368499)),d.on("pointerout",()=>d.setFillStyle(2245666)),d.on("pointerdown",()=>{this.purchaseAngelProtection(o),this.closeAngelMenu(e,t,a,i,s)})),s.push(d,u,p,m)});const n=this.add.text(640,340,"üìñ HOLY BIBLE WEAPON üìñ",{fontSize:"16px",fontStyle:"bold",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(2001);s.push(n);const r=this.add.text(640,365,'"The Word of God is living and active, sharper than any two-edged sword" ‚Äî Hebrews 4:12',{fontSize:"10px",fontStyle:"italic",color:"#cccccc"}).setOrigin(.5).setScrollFactor(0).setDepth(2001);s.push(r);const h=btState.coins>=BIBLE_WEAPON.cost,l=this.add.rectangle(640,410,520,60,h?4465152:3351074,.9).setScrollFactor(0).setDepth(2001).setStrokeStyle(2,h?16766720:6702148),d=this.add.text(400,400,"üìñ HOLY BIBLE",{fontSize:"16px",fontStyle:"bold",color:h?"#ffd700":"#666666"}).setOrigin(0,.5).setScrollFactor(0).setDepth(2002),c=this.add.text(400,420,"Shoots scripture at demons! 5x damage! 10 shots. Press B to fire.",{fontSize:"11px",color:"#aaaaaa"}).setOrigin(0,.5).setScrollFactor(0).setDepth(2002),u=this.add.text(870,410,`ü™ô${BIBLE_WEAPON.cost}`,{fontSize:"18px",fontStyle:"bold",color:h?"#ffd700":"#444444"}).setOrigin(.5).setScrollFactor(0).setDepth(2002);h&&(l.setInteractive({useHandCursor:!0}),l.on("pointerover",()=>l.setFillStyle(5583633)),l.on("pointerout",()=>l.setFillStyle(4465152)),l.on("pointerdown",()=>{this.purchaseBibleWeapon(),this.closeAngelMenu(e,t,a,i,s)})),s.push(l,d,c,u);const p=this.add.text(640,460,"‚úùÔ∏è REMEMBER THE TRUTH ‚úùÔ∏è",{fontSize:"12px",fontStyle:"bold",color:"#22c55e"}).setOrigin(.5).setScrollFactor(0).setDepth(2001);s.push(p);const m=this.add.text(640,480,"GOD is Omnipotent, Omniscient, Omnipresent ‚Äî Satan is NOT!",{fontSize:"10px",color:"#88ff88"}).setOrigin(.5).setScrollFactor(0).setDepth(2001),g=this.add.text(640,495,'"The one who is in you is GREATER than the one who is in the world" ‚Äî 1 John 4:4',{fontSize:"9px",fontStyle:"italic",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(2001);s.push(m,g);const y=this.add.text(640,605,"‚ùå CLOSE (Press A again)",{fontSize:"16px",color:"#ff6666"}).setOrigin(.5).setScrollFactor(0).setDepth(2002).setInteractive({useHandCursor:!0});y.on("pointerdown",()=>this.closeAngelMenu(e,t,a,i,s,y)),s.push(y),this.angelMenuElements={overlay:e,title:t,subtitle:a,coinsText:i,buttons:s}}purchaseBibleWeapon(){if(btState.coins<BIBLE_WEAPON.cost)return void this.showNotification("‚ùå Not enough coins for the Holy Bible!",16729156);btState.coins-=BIBLE_WEAPON.cost,btState.hasBibleWeapon=!0,btState.bibleAmmo+=BIBLE_WEAPON.ammo,this.showNotification("üìñ HOLY BIBLE ACQUIRED! Press B to fire scripture!",16766720),this.playSound("powerup");this.showScripturePopup({verse:"The Word of God is living and active, sharper than any two-edged sword.",ref:"Hebrews 4:12"},16766720)}fireBibleWeapon(){if(!btState.hasBibleWeapon||btState.bibleAmmo<=0)return void(btState.hasBibleWeapon?this.showNotification("üìñ Out of Bible ammo! Press A to buy more.",16737894):this.showNotification("üìñ Press A to buy Holy Bible weapon!",16755200));btState.bibleAmmo--;const e=BIBLE_WEAPON.scriptures[Math.floor(Math.random()*BIBLE_WEAPON.scriptures.length)],t=this.hunter.x,a=this.hunter.y-30;let i=t+(this.hunter.flipX?-300:300),s=a-50;if(this.demons&&this.demons.getChildren().length>0){let e=null,o=1/0;this.demons.getChildren().forEach(i=>{if(i&&i.active){const s=Phaser.Math.Distance.Between(t,a,i.x,i.y);s<o&&(o=s,e=i)}}),e&&(i=e.x,s=e.y)}const o=this.add.container(t,a),n=this.add.rectangle(0,0,60,30,9127187,1).setStrokeStyle(2,16766720),r=this.add.text(0,-2,"‚úùÔ∏è",{fontSize:"16px"}).setOrigin(.5),h=this.add.text(0,10,e,{fontSize:"8px",color:"#ffd700"}).setOrigin(.5);o.add([n,r,h]),o.setDepth(20),this.physics.world.enable(o);const l=i-t,d=s-a,c=Math.hypot(l,d);o.body.setVelocity(l/c*BIBLE_WEAPON.speed,d/c*BIBLE_WEAPON.speed),o.isBibleBullet=!0,o.damage=BIBLE_WEAPON.damage,o.scriptureRef=e,this.bibleBullets||(this.bibleBullets=[]),this.bibleBullets.push(o),this.time.addEvent({delay:50,repeat:10,callback:()=>{if(o&&o.active){const e=this.add.circle(o.x,o.y,5,16766720,.5).setDepth(19);this.tweens.add({targets:e,alpha:0,scale:.3,duration:300,onComplete:()=>e.destroy()})}}}),this.showNotification(`üìñ "${e}"`,16766720)}closeAngelMenu(e,t,a,i,s,o){e.destroy(),t.destroy(),a.destroy(),i.destroy(),s.forEach(e=>e.destroy()),o&&o.destroy(),this.angelMenuOpen=!1,this.physics.resume()}purchaseAngelProtection(e){const t=ANGEL_PROTECTION[e];btState.coins<t.cost?this.showNotification("‚ùå Not enough coins!",16729156):(btState.coins-=t.cost,btState.angelProtectionActive=!0,btState.angelProtectionTimer=t.duration,btState.angelProtectionLevel=e,this.showNotification(`üòá ${t.name} ACTIVATED! üòá`,16766720),this.playSound("powerup"),this.showAngelScripture(),this.demons&&this.demons.getChildren().forEach(e=>{e&&e.active&&!e.fleeing&&(e.fleeing=!0,e.direction=1,this.showDemonFlee(e))}),this.spawnPlayerAngel(e))}spawnPlayerAngel(e){this.playerAngel&&this.playerAngel.destroy(),this.playerAngel=this.add.sprite(this.hunter.x,this.hunter.y-80,"angel_protect").setScale(.08+.02*e).setDepth(25).setAlpha(.8),this.anims.exists("angel_protect_anim")&&this.playerAngel.play("angel_protect_anim");const t=[16777164,16768392,16766720];this.playerAngel.setTint(t[e-1]),this.playerAngel.halo=this.add.circle(this.hunter.x,this.hunter.y-100,15+5*e,t[e-1],.5).setDepth(24),this.tweens.add({targets:this.playerAngel,alpha:{from:.6,to:1},scale:{from:.95*this.playerAngel.scale,to:1.05*this.playerAngel.scale},duration:1e3,yoyo:!0,repeat:-1})}updateAngelProtection(e){btState.angelProtectionActive&&(btState.angelProtectionTimer-=e,this.playerAngel&&this.hunter&&(this.playerAngel.x=this.hunter.x,this.playerAngel.y=this.hunter.y-80,this.playerAngel.halo&&(this.playerAngel.halo.x=this.hunter.x,this.playerAngel.halo.y=this.hunter.y-100)),btState.angelProtectionTimer<=5&&btState.angelProtectionTimer>4.9&&this.showNotification("‚ö†Ô∏è Angel protection ending soon!",16755200),btState.angelProtectionTimer<=0&&(btState.angelProtectionActive=!1,btState.angelProtectionLevel=0,this.showNotification("üòá Angel protection ended",8947848),this.playerAngel&&(this.playerAngel.halo&&this.playerAngel.halo.destroy(),this.tweens.add({targets:this.playerAngel,alpha:0,y:this.playerAngel.y-100,duration:1e3,onComplete:()=>{this.playerAngel.destroy(),this.playerAngel=null}}))))}showGodBlessSplash(){this.splashActive=!0;const e=this.add.rectangle(640,320,1280,640,34,.95).setScrollFactor(0).setDepth(1e3),t=[e,this.add.text(640,270,"GOD BLESS AMERICA!",{fontSize:"36px",fontStyle:"bold",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,330,"üéÆ LAUGH AND ENJOY! üéÆ",{fontSize:"24px",fontStyle:"bold",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(1002),this.add.text(640,380,'"A cheerful heart is good medicine" ‚Äî Proverbs 17:22',{fontSize:"16px",fontStyle:"italic",color:"#88ccff"}).setOrigin(.5).setScrollFactor(0).setDepth(1002),this.add.text(640,610,"Click or tap anywhere to skip...",{fontSize:"12px",color:"#aaaaaa"}).setOrigin(.5).setScrollFactor(0).setDepth(1002)];let a=!1;const i=this,s=()=>{a||(a=!0,i.splashActive=!1,i.input.off("pointerdown",s),t.forEach(e=>{e&&e.destroy&&e.destroy()}),i.showLevelIntro())};e.setInteractive({useHandCursor:!0}),e.on("pointerdown",s),this.input.once("pointerdown",s),this.time.delayedCall(800,s)}showWokeFreeSplash(){const e=this.add.rectangle(640,320,1280,640,1710638,.95).setScrollFactor(0).setDepth(1e3),t=this.add.text(640,50,"üö´ WOKE-FREE ZONE üö´",{fontSize:"32px",fontStyle:"bold",color:"#ff4444"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),a=this.add.text(640,100,"üéØ YOUR MISSION üéØ",{fontSize:"22px",fontStyle:"bold",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),i=this.add.text(640,140,"Fight through 7 LEVELS to reach THE WHITE HOUSE!\nClear all birds ‚Üí Skies get clearer ‚Üí Level complete!",{fontSize:"14px",color:"#88ff88",align:"center"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),s=this.add.text(640,195,"‚ú® SPECIAL FEATURES ‚ú®",{fontSize:"18px",fontStyle:"bold",color:"#88ccff"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),o=this.add.text(640,255,"üòá Press A to Call ANGEL PROTECTION (costs coins)\n   ‚Ä¢ Guardian Angel: 50 coins - blocks 50% turds\n   ‚Ä¢ Warrior Angel: 100 coins - blocks 75% turds\n   ‚Ä¢ Divine Shield: 200 coins - blocks ALL turds!\n\nüòà DEMONS appear at Level 3+ throwing LIES\n   ‚Ä¢ Shoot the lies before they hit you!\n   ‚Ä¢ Defeat demons for big points!",{fontSize:"12px",color:"#cccccc",align:"center",lineSpacing:4}).setOrigin(.5).setScrollFactor(0).setDepth(1001),n=this.add.text(640,590,"ü§† HEAD RIGHT ‚Üí REACH THE WHITE HOUSE! üá∫üá∏",{fontSize:"18px",fontStyle:"bold",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),r=this.add.text(640,620,'Romans 8:31 - "If God is for us, who can be against us?"',{fontSize:"12px",fontStyle:"italic",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(1001);[t,a,i,s,o,n,r].forEach((e,t)=>{e.setAlpha(0).setScale(.8),this.tweens.add({targets:e,alpha:1,scale:1,duration:400,delay:100*t,ease:"Back.easeOut"})}),this.time.delayedCall(6e3,()=>{this.tweens.add({targets:[e,t,a,i,s,o,n,r],alpha:0,duration:500,onComplete:()=>{e.destroy(),t.destroy(),a.destroy(),i.destroy(),s.destroy(),o.destroy(),n.destroy(),r.destroy(),this.showLevelIntro()}})})}showLevelIntro(){this.splashActive=!0;const e=btState.currentLevel,t=LEVEL_CONFIG[e],a=sceneSequence[e-1]||sceneSequence[0],i=this.add.rectangle(640,320,1280,640,0,.85).setScrollFactor(0).setDepth(1e3),s=[i,this.add.text(640,260,`LEVEL ${e}`,{fontSize:"64px",fontStyle:"bold",color:7===e?"#ffd700":"#ffffff",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,320,a?a.name:"Unknown",{fontSize:"28px",fontStyle:"bold",color:7===e?"#ff4444":"#88ccff"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,370,`üéØ Kill ${t.birdsToKill} birds to advance! üéØ`,{fontSize:"20px",fontStyle:"bold",color:"#ffff00"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,610,"Click/tap to start!",{fontSize:"14px",color:"#aaaaaa"}).setOrigin(.5).setScrollFactor(0).setDepth(1001)];let o=!1;const n=this,r=()=>{o||(o=!0,n.splashActive=!1,n.input.off("pointerdown",r),s.forEach(e=>{e&&e.destroy&&e.destroy()}))};i.setInteractive({useHandCursor:!0}),i.on("pointerdown",r),this.input.once("pointerdown",r),this.time.delayedCall(800,r)}initJokeSystem(){this.jokes=[{setup:"How does Moses make his coffee?",punchline:"Hebrews it! ‚òï"},{setup:"Why couldn't Jonah trust the ocean?",punchline:"He knew there was something fishy about it! üêü"},{setup:"Who was the best babysitter in the Bible?",punchline:"David - he rocked Goliath to sleep! üë∂"},{setup:"What kind of man was Boaz before he married Ruth?",punchline:"Ruth-less! üíí"},{setup:"How do we know Peter was a rich fisherman?",punchline:"By his net income! üí∞"},{setup:"Why did Noah punish the chickens on the Ark?",punchline:"They were using FOWL language! üêî"},{setup:"What did Adam say the day before Christmas?",punchline:"It's Christmas, Eve! üéÑ"},{setup:"Where is the best place to get an ice cream cone?",punchline:"Sundae School! üç¶"},{setup:"Who was the greatest financier in the Bible?",punchline:"Noah - he floated his stock while the world was in liquidation! üìà"},{setup:"Why did Moses break the Ten Commandments?",punchline:"He was the original tablet crasher! üì±"},{setup:"What's the best way to study the Bible?",punchline:"You Luke into it! üìñ"},{setup:"Who was the smartest man in the Bible?",punchline:"Abraham - he knew a Lot! üß†"},{setup:"Why did the hawk sit on the church steeple?",punchline:"It was a bird of pray! ü¶Ö"},{setup:"What kind of car does Jesus drive?",punchline:"A Christler! üöó"},{setup:"Why do mice pray?",punchline:"To Cheesus! üê≠"},{setup:"Why is Swiss the most religious cheese?",punchline:"It's hole-y! üßÄ"},{setup:"What kind of lights did Noah use on the Ark?",punchline:"Floodlights! üí°"},{setup:"What do you call a Bible character who's always in a hurry?",punchline:"Russian! Wait... that's not in the Bible! üòÇ"},{setup:"How do you know God loves baseball?",punchline:"The Bible starts 'In the big inning'! ‚öæ"},{setup:"What's a missionary's favorite car?",punchline:"A convertible! üöò"},{setup:"Why don't scientists trust atoms?",punchline:"Because they make up everything! ‚öõÔ∏è"},{setup:"What do you call a fake noodle?",punchline:"An impasta! üçù"},{setup:"Why did the scarecrow win an award?",punchline:"He was outstanding in his field! üåæ"},{setup:"What did the ocean say to the beach?",punchline:"Nothing, it just waved! üåä"},{setup:"Why don't eggs tell jokes?",punchline:"They'd crack each other up! ü•ö"},{setup:"What do you call a bear with no teeth?",punchline:"A gummy bear! üêª"},{setup:"Why did the bicycle fall over?",punchline:"It was two-tired! üö≤"},{setup:"What do you call cheese that isn't yours?",punchline:"Nacho cheese! üßÄ"},{setup:"Why can't you give Elsa a balloon?",punchline:"She'll let it go! ‚ùÑÔ∏è"},{setup:"What do you call a sleeping dinosaur?",punchline:"A dino-snore! ü¶ï"},{setup:"How do you organize a space party?",punchline:"You planet! üöÄ"},{setup:"Why did the math book look so sad?",punchline:"It had too many problems! üìò"},{setup:"What do you call a fish without eyes?",punchline:"A fsh! üêü"},{setup:"Why did the coffee file a police report?",punchline:"It got mugged! ‚òï"},{setup:"What did the janitor say when he jumped out of the closet?",punchline:"Supplies! üßπ"},{setup:"Why don't skeletons fight each other?",punchline:"They don't have the guts! üéØ"},{setup:"What do you call a dog that does magic?",punchline:"A Labracadabrador! üêï"},{setup:"Why did the cookie go to the doctor?",punchline:"It was feeling crummy! üç™"},{setup:"What's brown and sticky?",punchline:"A stick! ü™µ"},{setup:"Why can't your nose be 12 inches long?",punchline:"Then it would be a foot! üëÉ"},{setup:"Why did Noah kick the chicken off the ark?",punchline:"He heard it was using FOWL language! üêî"},{setup:"What do you call a bird that's afraid to fly?",punchline:"A chicken! üêì"},{setup:"Why do birds fly south for the winter?",punchline:"Because it's too far to walk! ü¶Ü"},{setup:"What's a bird's favorite subject in school?",punchline:"Owl-gebra! ü¶â"},{setup:"Why did the bird go to the hospital?",punchline:"To get some tweetment! üè•"},{setup:"What do you call a funny chicken?",punchline:"A comedi-HEN! üòÇ"},{setup:"Why was the pelican kicked out of the restaurant?",punchline:"He had a big bill! ü¶Ö"},{setup:"What's a duck's favorite snack?",punchline:"Cheese and QUACKers! ü¶ÜüßÄ"},{setup:"Why do seagulls fly over the sea?",punchline:"Because if they flew over the bay, they'd be bagels! ü•Ø"},{setup:"What do you call a parrot that flew away?",punchline:"A polygon! ü¶ú"},{setup:"Why do hummingbirds hum?",punchline:"Because they forgot the words! üéµ"},{setup:"What time does a duck wake up?",punchline:"At the quack of dawn! üåÖ"},{setup:"What do ducks watch on TV?",punchline:"Duck-umentaries! üì∫"},{setup:"Why did the turkey cross the road twice?",punchline:"To prove he wasn't chicken! ü¶É"},{setup:"What do you call an owl magician?",punchline:"Hoo-dini! üé©"},{setup:"What's a penguin's favorite relative?",punchline:"Aunt-arctica! üêß"},{setup:"Why do flamingos stand on one leg?",punchline:"If they lifted the other, they'd fall! ü¶©"},{setup:"What do you call two birds in love?",punchline:"Tweet-hearts! üíï"},{setup:"How do crows stick together?",punchline:"Vel-CROW! ü™∂"},{setup:"Why are birds always online?",punchline:"They love to tweet! üê§"},{setup:"Why did God make economists?",punchline:"To make weather forecasters look good! üå§Ô∏è"},{setup:"What did the lawyer ask about God's will?",punchline:"'Was it notarized?' ‚öñÔ∏è"},{setup:"Why did Jesus tell knock-knock jokes?",punchline:"Because He said 'knock and the door will be opened'! üö™"},{setup:"What do you call a sleepwalking nun?",punchline:"A roamin' Catholic! üò¥"},{setup:"Why don't church chairs ever panic?",punchline:"Because they always keep their composure in the pews! ‚õ™"},{setup:"What did the grape say when it got stepped on?",punchline:"Nothing, it just let out a little wine! üçá"},{setup:"Why did the hunter bring a ladder?",punchline:"He heard the steaks were high! ü¶å"},{setup:"What do you call a cow with no legs?",punchline:"Ground beef! üêÑ"},{setup:"Why did the tractor break up with the combine?",punchline:"Because it got too attached! üöú"},{setup:"What do you call a pig that knows karate?",punchline:"A pork chop! üê∑"},{setup:"Why don't farmers ever win at poker?",punchline:"Because they always fold! üÉè"},{setup:"What do you call a lazy kangaroo?",punchline:"A pouch potato! ü¶ò"},{setup:"Why did the cowboy adopt a wiener dog?",punchline:"He wanted to get a long little doggy! üå≠"},{setup:"What do you call a fish wearing a bowtie?",punchline:"So-FISH-ticated! üêü"},{setup:"Why do cows wear bells?",punchline:"Because their horns don't work! üîî"},{setup:"What do you call a deer with no eyes?",punchline:"No ideer! ü¶å"},{setup:"What do you call a deer with no eyes AND no legs?",punchline:"Still no ideer! üòÇ"},{setup:"Why did the scarecrow become a successful neurosurgeon?",punchline:"He was outstanding in his field! üß†"},{setup:"What's a cat's favorite color?",punchline:"Purrr-ple! üê±"},{setup:"Why did the golfer bring two pairs of pants?",punchline:"In case he got a hole in one! ‚õ≥"},{setup:"What do you call a belt made of watches?",punchline:"A waist of time! ‚åö"},{setup:"Why can't you hear a pterodactyl in the bathroom?",punchline:"Because the P is silent! ü¶ñ"},{setup:"What did the farmer say when he lost his tractor?",punchline:"Where's my tractor?! üöú"},{setup:"Why do seagulls fly over the sea?",punchline:"Because if they flew over the bay, they'd be bagels! ü•Ø"},{setup:"What do you call a boomerang that doesn't come back?",punchline:"A stick! ü™É"},{setup:"Why did the duck go to rehab?",punchline:"He was addicted to quack! ü¶Ü"},{setup:"What's brown and sounds like a bell?",punchline:"Dung! üîî"},{setup:"What did the buffalo say when his son left for college?",punchline:"Bison! ü¶¨"},{setup:"Why don't oysters share?",punchline:"Because they're shellfish! ü¶™"},{setup:"What do you call a fake stone in Ireland?",punchline:"A sham rock! ‚òòÔ∏è"},{setup:"Why did the invisible man turn down the job offer?",punchline:"He couldn't see himself doing it! üëª"},{setup:"What do you call an alligator detective?",punchline:"An investi-gator! üêä"},{setup:"Why don't crabs give to charity?",punchline:"Because they're shellfish too! ü¶Ä"},{setup:"What's the best thing about Switzerland?",punchline:"I don't know, but the flag is a big plus! üá®üá≠"},{setup:"Did you hear about the claustrophobic astronaut?",punchline:"He just needed a little space! üöÄ"},{setup:"Why did the stadium get hot after the game?",punchline:"All the fans left! üèüÔ∏è"},{setup:"What do you call a can opener that doesn't work?",punchline:"A can't opener! ü•´"},{setup:"Why do chicken coops only have two doors?",punchline:"If they had four, they'd be chicken sedans! üêî"},{setup:"What do you call a sleeping T-Rex?",punchline:"A dinosnore! ü¶ñ"},{setup:"Why don't scientists trust atoms?",punchline:"Because they make up everything! ‚öõÔ∏è"},{setup:"What did the ocean say to the shore?",punchline:"Nothing, it just waved! üåä"},{setup:"How does a penguin build its house?",punchline:"Igloos it together! üêß"},{setup:"What do you call a fish without eyes?",punchline:"A fsh! üêü"},{setup:"Why did the picture go to jail?",punchline:"Because it was framed! üñºÔ∏è"},{setup:"What do you call a horse that lives next door?",punchline:"A neigh-bor! üê¥"},{setup:"Why did the tomato turn red?",punchline:"Because it saw the salad dressing! üçÖ"},{setup:"What did one wall say to the other wall?",punchline:"I'll meet you at the corner! üß±"},{setup:"Why couldn't the bicycle stand up by itself?",punchline:"It was two tired! üö≤"},{setup:"What do you call a bear with no teeth?",punchline:"A gummy bear! üß∏"},{setup:"Why did the mushroom go to the party?",punchline:"Because he was a fungi! üçÑ"},{setup:"Why did everyone invite the mushroom to parties?",punchline:"Because he's a fun-gi! üçÑ"},{setup:"What do you call a group of unorganized cats?",punchline:"A cat-astrophe! üê±"},{setup:"Why did the banana go to the doctor?",punchline:"Because it wasn't peeling well! üçå"},{setup:"What's orange and sounds like a parrot?",punchline:"A carrot! ü•ï"},{setup:"Why did the computer go to the doctor?",punchline:"Because it had a virus! üíª"},{setup:"What do you call a snowman with a six-pack?",punchline:"An abdominal snowman! ‚òÉÔ∏è"},{setup:"Why did the gym close down?",punchline:"It just didn't work out! üí™"},{setup:"What do you get when you cross a snowman and a vampire?",punchline:"Frostbite! üßõ"},{setup:"How do you organize a space party?",punchline:"You planet! üåç"},{setup:"Why don't eggs tell jokes?",punchline:"They'd crack each other up! ü•ö"},{setup:"What do you call a cow in an earthquake?",punchline:"A milkshake! ü•õ"},{setup:"Why don't some couples go to the gym?",punchline:"Because some relationships don't work out! üíë"},{setup:"Why did the country singer go broke?",punchline:"He kept losing his truck, dog, AND girlfriend! üé∏"},{setup:"What do you call a country song played backwards?",punchline:"You get your truck back, your dog back, and your girl back! üéµ"},{setup:"Why did the farmer win an award?",punchline:"He was outstanding in his field! üåæ"},{setup:"What do you call a nervous javelin thrower?",punchline:"Shakespeare! üéØ"},{setup:"Why did the rooster cross the road?",punchline:"To prove he wasn't chicken! üêì"},{setup:"What's a chicken's favorite composer?",punchline:"Bach Bach Bach! üêî"},{setup:"Why did the cowboy get a dachshund?",punchline:"Someone told him to get a long little doggy! ü§†"},{setup:"What do you call a lazy bull?",punchline:"A bulldozer! üêÇ"}],this.lastJokeIndex=-1,this.jokeInterval=45,this.shownJokesToday=[],this.sessionStartTime=Date.now(),this.totalPlayTime=parseInt(localStorage.getItem("birdturds_totalPlayTime")||"0"),this.lastBreakReminder=Date.now(),this.breakInterval=12e5,this.wellnessMessages=[{type:"break",msg:"‚è∞ You've been playing for a while! Time for a quick stretch AND a prayer?",icon:"üôè"},{type:"break",msg:"üí™ Gaming break tip: Stand up, stretch, and thank God for this day!",icon:"‚úùÔ∏è"},{type:"break",msg:"üö∞ Stay hydrated! Grab some water and remember - Jesus is the living water!",icon:"üíß"},{type:"break",msg:"üåü Pro tip: Taking breaks improves focus - use it to read a Bible verse!",icon:"üìñ"},{type:"family",msg:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family time is precious! Play this game TOGETHER with your family!",icon:"‚ù§Ô∏è"},{type:"family",msg:"üíù Have you told your family you love them today? Honor your parents!",icon:"üè†"},{type:"family",msg:"üçΩÔ∏è Meals are better with family! Pray together before eating!",icon:"üôè"},{type:"family",msg:"üì± Put down devices during family dinner - real connections matter!",icon:"ü§ù"},{type:"spiritual",msg:"üìñ Have you read your Bible today? Even one verse can change your day!",icon:"‚úùÔ∏è"},{type:"spiritual",msg:"üôè Take 2 minutes to pray - God is always listening!",icon:"üí´"},{type:"spiritual",msg:"‚õ™ When's the last time you went to church? Fellowship matters!",icon:"ü§ù"},{type:"spiritual",msg:"üì∫ Check out Pastor Jack Hibbs on YouTube for awesome Bible teaching!",icon:"üé¨"},{type:"outdoor",msg:"üå≥ God's creation is amazing! Go explore the outdoors He made!",icon:"üèûÔ∏è"},{type:"outdoor",msg:"üö¥ Bike rides, hikes, or just a walk - appreciate God's nature!",icon:"üå§Ô∏è"},{type:"outdoor",msg:"‚öΩ Real sports are fun too! Your body is a temple - keep it active!",icon:"üèÉ"},{type:"outdoor",msg:"üêï If you have a pet, God gave them to you - give them love!",icon:"ü¶Æ"},{type:"health",msg:"üò¥ Good sleep = sharper mind! Rest is a gift from God!",icon:"üõèÔ∏è"},{type:"health",msg:"üìö Balance is key! Have you done your homework/chores? Be responsible!",icon:"‚úÖ"},{type:"health",msg:"ü•¶ Your body is a temple! Fuel it with good food!",icon:"üçé"},{type:"health",msg:"üß† Learning new skills is like leveling up - God gave you that brain!",icon:"üìñ"},{type:"positive",msg:"‚≠ê You're fearfully and wonderfully made! Your worth is in Christ, not scores!",icon:"üí´"},{type:"positive",msg:"üåà Real achievements > Virtual ones. What can you do for God today?",icon:"üèÜ"},{type:"positive",msg:"üòä Be kind online AND offline - let your light shine!",icon:"üíù"},{type:"positive",msg:"üì¢ Share this game with friends and spread the message!",icon:"‚ú®"}],this.lastWellnessIndex=-1,this.isMultiplayer=!1,this.isOnline=!1,this.roomCode=null,this.playerId=null,this.otherPlayers=new Map,this.bots=[],this.maxBots=3}createGroups(){this.birds=this.physics.add.group(),this.bullets=this.physics.add.group(),this.turds=this.physics.add.group(),this.groundTurds=this.physics.add.group(),this.vehicles=this.physics.add.group(),this.planes=this.physics.add.group(),this.items=this.physics.add.group(),this.coins=this.physics.add.group(),this.animals=this.physics.add.group(),this.npcs=this.physics.add.group(),this.parachuters=this.physics.add.group(),this.ammoPickups=this.physics.add.group(),this.initSoundSystem(),this.initVoiceSystem()}initDebugOverlay(){this.debugEnabled=!1;try{this.debugText=this.add.text(10,70,"",{fontSize:"11px",fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, sans-serif",color:"#ffffff",backgroundColor:"rgba(0,0,0,0.6)"}).setScrollFactor(0).setDepth(3e3).setVisible(!1)}catch(e){console.warn("Debug overlay text failed to init:",e),this.debugText=null}this.input&&this.input.keyboard&&this.input.keyboard.on("keydown-F3",()=>{this.debugEnabled=!this.debugEnabled,this.debugText&&this.debugText.setVisible(this.debugEnabled)})}updateDebugOverlay(e){if(!this.debugEnabled||!this.debugText)return;const t=this.game&&this.game.loop,a=t&&t.actualFps?Math.round(t.actualFps):Math.round(1/(e||.016)),i=this.birds?this.birds.countActive(!0):0,s=this.vehicles?this.vehicles.countActive(!0):0,o=this.bullets?this.bullets.countActive(!0):0,n=this.coins?this.coins.countActive(!0):0,r=this.animals?this.animals.countActive(!0):0;this.debugText.setText(`FPS: ${a}\nBirds: ${i}  Vehicles: ${s}\nBullets: ${o}  Coins: ${n}\nAnimals: ${r}  Level: ${btState.currentLevel}`)}initVoiceSystem(){this.voiceEnabled="false"!==localStorage.getItem("birdturds_voice"),this.voiceVolume=parseFloat(localStorage.getItem("birdturds_voiceVolume")||"0.8"),this.voiceQueue=[],this.voicePlaying=!1,this.elevenLabsConfig={apiKey:"00f20c36fa96c1609dfe42bdde9c69035f585c6837c915536f9d761e7dd80fd0",modelId:"eleven_monolingual_v1",narratorVoiceId:"Enon49nSds4wDZZqnHN1",jokeVoiceId:"dHd5gvgSOzSfduK4CvEg",trumpVoiceId:"pNInz6obpgDQGcFmaJgB",characterVoices:{buck:{voiceId:"TxGEqnHWrfWFTfGW9XjX",stability:.5,style:.6,pitch:"low"},daisy:{voiceId:"EXAVITQu4vr4xnSDxMaL",stability:.6,style:.5,pitch:"medium"},bubba:{voiceId:"VR6AewLTigWG4xSOukaG",stability:.4,style:.7,pitch:"very_low"},clyde:{voiceId:"2EiwWnXFnvU5JabPnv8n",stability:.5,style:.4,pitch:"low"},sierra:{voiceId:"jBpfuIE2acCO8z3wKNLl",stability:.5,style:.7,pitch:"high"},gunner:{voiceId:"N2lVS1w4EtoT3dr4eOWO",stability:.6,style:.5,pitch:"medium_low"},jolene:{voiceId:"XB0fDUnXU5powFXDhCwa",stability:.5,style:.5,pitch:"medium"},tammy:{voiceId:"pFZP5JQG7iQjIQuC4Bku",stability:.6,style:.4,pitch:"medium_high"}}},this.characterProfiles={buck:{name:'Buck "Deadeye" Thompson',age:42,hometown:"Amarillo, Texas",weapon:"Lever-Action Rifle",specialty:"Long-range precision shots",bio:"A 5th generation rancher from the Texas Panhandle. Buck learned to shoot before he could ride, and he could ride by age 3. His grandfather fought in WWII and his daddy was a rodeo champion. Buck's never missed a shot that mattered.",skills:["Eagle Eye (+15% accuracy)","Quick Draw (-0.2s reload)","Rattlesnake Reflexes"],greeting:"Howdy partner! Ready to bag some birds?",wave:"Tips his cowboy hat",combatLines:["Got em right between the eyes!","That's how we do it in Texas!","Yeehaw! Another one bites the dust!","Keep em coming, I got all day!","My grandpappy would be proud!","Ain't no bird gonna mess with this ranch!","Let's drain this swamp!","God bless America!","We're almost there boys!","Good shooting partner!"],hurtLines:["Just a scratch!","That all you got?","I've had worse!"],killStreakLines:["I'm on fire!","Can't stop won't stop!","Who wants some?!"]},daisy:{name:"Daisy Mae Reynolds",age:28,hometown:"Nashville, Tennessee",weapon:"Double-Barrel Shotgun",specialty:"Close-range devastation",bio:"Former competitive skeet shooter turned country music singer. Daisy won 3 national championships before age 20. When she's not on stage, she's protecting her family's 200-acre farm from varmints.",skills:["Spread Shot (+20% pellet spread)","Quick Reload","Country Strong"],greeting:"Hey y'all! Let's show these birds who's boss!",wave:"Blows a kiss and winks",combatLines:["Boom! That's what I'm talking about!","Sweet as sugar, deadly as venom!","Mama didn't raise no quitter!","That one's for Nashville!","Y'all picked the wrong farm!","Keep pushing forward y'all!","We got this in the bag!","Lord give me strength!","Another one down!","Feels good to be winning!"],hurtLines:["Ouch! That's gonna leave a mark!","Oh no you didn't!","Now I'm mad!"],killStreakLines:["I'm unstoppable!","Queen of the hunt!","Try and stop me!"]},bubba:{name:'Bubba "Gator" Jackson',age:55,hometown:"Bayou La Batre, Alabama",weapon:"Heavy Double-Barrel",specialty:"Maximum damage per shot",bio:'Swamp guide for 30 years, Bubba knows every creature that crawls, flies, or swims in the Louisiana bayou. Survived 3 gator attacks and once wrestled a 12-footer. His shotgun is named "Bertha."',skills:["Swamp Knowledge (+25% animal damage)","Gator Skin (+15 HP)","Heavy Hitter"],greeting:"Well I'll be! Time to go huntin'!",wave:"Raises shotgun overhead",combatLines:["That's what Bertha thinks of ya!","Woo-wee! Got em good!","Back to the swamp with ya!","I've wrestled gators tougher than you!","Bubba don't miss!","Hot dang that was a good shot!","We're making progress boys!","Almost to the finish line!","Keep your eyes peeled!","Drain that swamp!"],hurtLines:["Gator bites hurt worse!","That tickled!","You call that an attack?"],killStreakLines:["Bubba's on a roll!","Can't touch this!","Fear the gator!"]},clyde:{name:'Clyde "Mountain" Morrison',age:62,hometown:"Jackson Hole, Wyoming",weapon:"Bolt-Action Hunting Rifle",specialty:"One-shot kills from any range",bio:"Former park ranger who spent 40 years in the Rockies. Clyde can track a mouse through a blizzard and shoot a fly off a deer's ear at 500 yards. Lives off-grid in a cabin he built himself.",skills:["Tracker (+30% critical hit)","Mountain Man (no fall damage)","Patience"],greeting:"Mountains are calling. Let's hunt.",wave:"Nods stoically",combatLines:["One shot. One kill.","The mountain provides.","Patience pays off.","Clean hit.","Nature's balance restored.","Steady hands, clear mind.","We press forward.","Stay focused team.","Almost there.","Good work everyone."],hurtLines:["I've survived worse winters.","Pain is temporary.","Not my first wound."],killStreakLines:["The mountain is with me.","Unstoppable force.","Nothing can stop us."]},sierra:{name:'Sierra "Quickdraw" Valdez',age:32,hometown:"El Paso, Texas",weapon:"Twin Revolvers",specialty:"Fastest fire rate in the West",bio:"Competitive quick-draw champion and stunt performer. Sierra's family has been on the border for 7 generations. She learned to shoot from her abuela, a legendary sharpshooter in her own right.",skills:["Lightning Hands (+40% fire rate)","Dual Wield","Acrobat"],greeting:"¬°Vamos! Let's dance with these birds!",wave:"Twirls both revolvers",combatLines:["¬°√Åndale! Too slow!","Abuela taught me well!","Fastest guns in the West!","You blinked - you lost!","¬°Ay caramba! Got another one!","Let's keep moving amigos!","We're doing great!","Stay sharp everyone!","Victory is close!","¬°Viva America!"],hurtLines:["¬°Ay! That stung!","Lucky shot!","Now you made me angry!"],killStreakLines:["¬°Fuego! I'm on fire!","Can't catch me!","Unstoppable!"]},gunner:{name:'Sergeant Marcus "Gunner" Williams',age:38,hometown:"Fort Bragg, North Carolina",weapon:"M249 Squad Automatic Weapon",specialty:"Suppressive fire and crowd control",bio:"3 tours in Afghanistan, 2 Purple Hearts, and a Silver Star. Gunner left the Army but the Army never left him. Now he defends the homeland from a different kind of threat. Semper Fi.",skills:["Suppressive Fire (+50% ammo)","Combat Training","Iron Will"],greeting:"Lock and load! Time to defend freedom!",wave:"Crisp military salute",combatLines:["Tango down!","Area secured!","For God and country!","Contact eliminated!","Hooah! Keep moving!","Stay frosty people!","Push forward! Almost there!","Outstanding work team!","We will not fail!","Defend the homeland!"],hurtLines:["I've had worse in basic!","Flesh wound!","Still combat effective!"],killStreakLines:["Weapons free!","They can't stop us!","Victory is ours!"]},jolene:{name:"Jolene Parker",age:48,hometown:"Lexington, Kentucky",weapon:"Custom Hunting Rifle",specialty:"Balanced stats, leadership bonus",bio:"Owner of a 5,000-acre cattle ranch and mother of 4. Jolene's been managing land and livestock her whole life. When birds threaten her herd, she handles it personally. Her ranch has been in the family since 1847.",skills:["Leadership (+10% team bonus)","Ranch Owner","Determined"],greeting:"This is my land. Let's protect it.",wave:"Tips her sun hat",combatLines:["Not on my ranch you don't!","The Parker way - get it done!","My land, my rules!","That's for my cattle!","We protect what's ours!","Keep fighting everyone!","We're almost home free!","Stay strong team!","God's on our side!","Together we win!"],hurtLines:["I've birthed 4 kids, this is nothing!","Takes more than that!","Still standing!"],killStreakLines:["Mama bear mode!","Don't mess with Texas!","Unstoppable!"]},tammy:{name:'Tammy "Ghost" Chen',age:26,hometown:"Austin, Texas",weapon:"Compound Crossbow",specialty:"Silent kills, stealth bonus",bio:"Former Olympic archery hopeful turned wildlife conservationist. Tammy believes in ethical hunting and clean kills. She volunteers at animal shelters and only hunts invasive species and threats to the ecosystem.",skills:["Silent Strike (no sound)","Stealth Mode","Precision"],greeting:"Shh... let's do this quietly.",wave:"Small wave with fingers",combatLines:["Silent but deadly.","Never saw it coming.","Clean kill.","Conservation in action.","Precision over power.","Moving forward quietly.","Stay low, stay quiet.","We're doing great.","Almost to victory.","For the ecosystem."],hurtLines:["Ow! Stay focused...","I'm okay...","Just a scratch..."],killStreakLines:["In the zone.","Ghost mode activated.","Can't see me coming."]}},this.lastCombatLineTime=0,this.combatLineCooldown=8e3,this.turdReactionLines={buck:["Holy turds, that's nasty!","Dag nabbit, got me good!","Well butter my biscuit in turd!","That bird's got aim!","Consarnit! Right on my hat!"],daisy:["Ewww! My hair!","Oh no you didn't!","That's just wrong!","Gross gross gross!","This is SO not okay!"],bubba:["Woo-wee that's a big one!","Smells worse than the swamp!","Hot dang, direct hit!","That's nastier than gator breath!","Bertha's gonna make em pay!"],clyde:["Nature's revenge.","The mountain tests me.","I've survived worse.","A minor setback.","Patience..."],sierra:["¬°Ay caramba!","¬°Qu√© asco!","Oh that's nasty!","You're gonna pay for that!","Now I'm really mad!"],gunner:["Hostile turd incoming!","Taking fire!","Man down... in turd!","This ain't basic training!","Turd at 12 o'clock!"],jolene:["Not on my ranch you don't!","That's disgusting!","I've cleaned worse from the barn!","You messed with the wrong rancher!","This means war!"],tammy:["Ew... gross...","That was sneaky...","Didn't see that coming...","So much for stealth...","Need to clean up..."]},this.voiceCache={},this.voiceAudioCtxReady=!1,console.log("üé§ Voice system ready (will init on first speech)")}async speakText(e,t="scripture"){if(!this.voiceEnabled||btState.silentMode)return;if(!this.voiceAudioCtxReady)try{this.voiceAudioCtx=new(window.AudioContext||window.webkitAudioContext),this.voiceGain=this.voiceAudioCtx.createGain(),this.voiceGain.gain.value=this.voiceVolume,this.voiceGain.connect(this.voiceAudioCtx.destination),this.voiceAudioCtxReady=!0,console.log("üé§ Voice AudioContext initialized")}catch(e){return void console.warn("Voice audio context failed:",e)}const a="true"===localStorage.getItem("birdturds_muteJokes"),i="true"===localStorage.getItem("birdturds_muteScriptures");if("joke"===t&&a)return;if("scripture"===t&&i)return;const s=e.substring(0,50);this.voiceCache[s]?this.playVoiceAudio(this.voiceCache[s]):(this.voiceQueue.push({text:e,type:t,cacheKey:s}),this.processVoiceQueue())}async speakTrumpQuote(e){if(!this.voiceEnabled)return;const t="trump_"+e.substring(0,40);this.voiceCache[t]?this.playVoiceAudio(this.voiceCache[t]):(this.voiceQueue.push({text:e,type:"trump",cacheKey:t,voiceId:this.elevenLabsConfig.trumpVoiceId}),this.processVoiceQueue())}async speakAsCharacter(e,t=null){if(!this.voiceEnabled)return;const a=t||btState.currentCharacter||"buck",i=this.elevenLabsConfig.characterVoices[a];if(!i)return;const s=`char_${a}_${e.substring(0,30)}`;this.voiceCache[s]?this.playVoiceAudio(this.voiceCache[s]):(this.voiceQueue.push({text:e,type:"character",cacheKey:s,voiceId:i.voiceId,stability:i.stability,style:i.style}),this.processVoiceQueue())}playCharacterGreeting(e){const t=this.characterProfiles[e];t&&t.greeting&&this.speakAsCharacter(t.greeting,e)}playRandomCombatLine(){const e=Date.now();if(e-this.lastCombatLineTime<this.combatLineCooldown)return;const t=btState.currentCharacter||"buck",a=this.characterProfiles[t];if(a&&a.combatLines&&a.combatLines.length>0){const i=a.combatLines[Math.floor(Math.random()*a.combatLines.length)];this.speakAsCharacter(i,t),this.lastCombatLineTime=e}}playHurtLine(){const e=btState.currentCharacter||"buck",t=this.characterProfiles[e];if(t&&t.hurtLines&&t.hurtLines.length>0){const a=t.hurtLines[Math.floor(Math.random()*t.hurtLines.length)];this.speakAsCharacter(a,e)}}playTurdReactionLine(){const e=btState.currentCharacter||"buck",t=this.turdReactionLines[e];if(t&&t.length>0){const a=t[Math.floor(Math.random()*t.length)];this.speakAsCharacter(a,e)}}playKillStreakLine(){const e=btState.currentCharacter||"buck",t=this.characterProfiles[e];if(t&&t.killStreakLines&&t.killStreakLines.length>0){const a=t.killStreakLines[Math.floor(Math.random()*t.killStreakLines.length)];this.speakAsCharacter(a,e)}}playCharacterWave(){if(!this.hunter||!this.hunter.active)return;this.hunter.flipX;this.tweens.add({targets:this.hunter,rotation:.2,duration:200,yoyo:!0,repeat:2,onComplete:()=>{this.hunter.rotation=0}});const e=this.add.text(this.hunter.x,this.hunter.y-80,"üëã",{fontSize:"32px"}).setOrigin(.5).setDepth(100);this.tweens.add({targets:e,y:e.y-30,alpha:0,duration:1e3,onComplete:()=>e.destroy()})}getCharacterProfile(e){return this.characterProfiles[e]||this.characterProfiles.buck}cleanTextForSpeech(e){if(!e)return"";let t=e;return t=t.replace(/[\u{1F600}-\u{1F64F}]/gu,""),t=t.replace(/[\u{1F300}-\u{1F5FF}]/gu,""),t=t.replace(/[\u{1F680}-\u{1F6FF}]/gu,""),t=t.replace(/[\u{1F1E0}-\u{1F1FF}]/gu,""),t=t.replace(/[\u{2600}-\u{26FF}]/gu,""),t=t.replace(/[\u{2700}-\u{27BF}]/gu,""),t=t.replace(/[\u{FE00}-\u{FE0F}]/gu,""),t=t.replace(/[\u{1F900}-\u{1F9FF}]/gu,""),t=t.replace(/[\u{1FA00}-\u{1FA6F}]/gu,""),t=t.replace(/[\u{1FA70}-\u{1FAFF}]/gu,""),t=t.replace(/[\u{231A}-\u{231B}]/gu,""),t=t.replace(/[\u{23E9}-\u{23F3}]/gu,""),t=t.replace(/[\u{23F8}-\u{23FA}]/gu,""),t=t.replace(/[\u{25AA}-\u{25AB}]/gu,""),t=t.replace(/[\u{25B6}]/gu,""),t=t.replace(/[\u{25C0}]/gu,""),t=t.replace(/[\u{25FB}-\u{25FE}]/gu,""),t=t.replace(/[\u{2614}-\u{2615}]/gu,""),t=t.replace(/[\u{2648}-\u{2653}]/gu,""),t=t.replace(/[\u{267F}]/gu,""),t=t.replace(/[\u{2693}]/gu,""),t=t.replace(/[\u{26A1}]/gu,""),t=t.replace(/[\u{26AA}-\u{26AB}]/gu,""),t=t.replace(/[\u{26BD}-\u{26BE}]/gu,""),t=t.replace(/[\u{26C4}-\u{26C5}]/gu,""),t=t.replace(/[\u{26CE}]/gu,""),t=t.replace(/[\u{26D4}]/gu,""),t=t.replace(/[\u{26EA}]/gu,""),t=t.replace(/[\u{26F2}-\u{26F3}]/gu,""),t=t.replace(/[\u{26F5}]/gu,""),t=t.replace(/[\u{26FA}]/gu,""),t=t.replace(/[\u{26FD}]/gu,""),t=t.replace(/[\u{2702}]/gu,""),t=t.replace(/[\u{2705}]/gu,""),t=t.replace(/[\u{2708}-\u{270D}]/gu,""),t=t.replace(/[\u{270F}]/gu,""),t=t.replace(/[\u{2712}]/gu,""),t=t.replace(/[\u{2714}]/gu,""),t=t.replace(/[\u{2716}]/gu,""),t=t.replace(/[\u{271D}]/gu,""),t=t.replace(/[\u{2721}]/gu,""),t=t.replace(/[\u{2728}]/gu,""),t=t.replace(/[\u{2733}-\u{2734}]/gu,""),t=t.replace(/[\u{2744}]/gu,""),t=t.replace(/[\u{2747}]/gu,""),t=t.replace(/[\u{274C}]/gu,""),t=t.replace(/[\u{274E}]/gu,""),t=t.replace(/[\u{2753}-\u{2755}]/gu,""),t=t.replace(/[\u{2757}]/gu,""),t=t.replace(/[\u{2763}-\u{2764}]/gu,""),t=t.replace(/[\u{2795}-\u{2797}]/gu,""),t=t.replace(/[\u{27A1}]/gu,""),t=t.replace(/[\u{27B0}]/gu,""),t=t.replace(/[\u{27BF}]/gu,""),t=t.replace(/[\u{2934}-\u{2935}]/gu,""),t=t.replace(/[\u{2B05}-\u{2B07}]/gu,""),t=t.replace(/[\u{2B1B}-\u{2B1C}]/gu,""),t=t.replace(/[\u{2B50}]/gu,""),t=t.replace(/[\u{2B55}]/gu,""),t=t.replace(/[\u{3030}]/gu,""),t=t.replace(/[\u{303D}]/gu,""),t=t.replace(/[\u{3297}]/gu,""),t=t.replace(/[\u{3299}]/gu,""),t=t.replace(/(\d+):(\d+)/g,"chapter $1 verse $2"),t=t.replace(/\bvs\.?\b/gi,"versus"),t=t.replace(/\betc\.?\b/gi,"etcetera"),t=t.replace(/\be\.g\.?\b/gi,"for example"),t=t.replace(/\bi\.e\.?\b/gi,"that is"),t=t.replace(/\bDr\.\s/gi,"Doctor "),t=t.replace(/\bMr\.\s/gi,"Mister "),t=t.replace(/\bMrs\.\s/gi,"Missus "),t=t.replace(/\bMs\.\s/gi,"Miss "),t=t.replace(/\bSt\.\s/gi,"Saint "),t=t.replace(/\bSgt\.\s/gi,"Sergeant "),t=t.replace(/\bGen\.\s/gi,"General "),t=t.replace(/\bCol\.\s/gi,"Colonel "),t=t.replace(/\bLt\.\s/gi,"Lieutenant "),t=t.replace(/\bCpl\.\s/gi,"Corporal "),t=t.replace(/\bPvt\.\s/gi,"Private "),t=t.replace(/\$(\d+(?:,\d{3})*(?:\.\d{2})?)/g,"$1 dollars"),t=t.replace(/(\d+)%/g,"$1 percent"),t=t.replace(/#(\d+)/g,"number $1"),t=t.replace(/\.{3,}/g,"..."),t=t.replace(/!{2,}/g,"!"),t=t.replace(/\?{2,}/g,"?"),t=t.replace(/\s*\([^)]*\)\s*/g,", "),t=t.replace(/\[|\]/g,""),t=t.replace(/\s*&\s*/g," and "),t=t.replace(/\s+/g," "),t=t.trim(),t}async processVoiceQueue(){if(this.voicePlaying||0===this.voiceQueue.length)return;this.voicePlaying=!0;const e=this.voiceQueue.shift(),t=this.cleanTextForSpeech(e.text);if(!t||t.length<2)return this.voicePlaying=!1,void this.processVoiceQueue();let a,i,s;if("trump"===e.type)return this.speakTrumpWithWebSpeech(t),this.voicePlaying=!1,void this.processVoiceQueue();"character"===e.type?(a=e.voiceId,i=e.stability||.5,s=e.style||.5):"joke"===e.type?(a=this.elevenLabsConfig.jokeVoiceId,i=.5,s=.6):(a=this.elevenLabsConfig.narratorVoiceId,i=.6,s=.4);try{const o=await fetch("https://api.elevenlabs.io/v1/text-to-speech/"+a,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":this.elevenLabsConfig.apiKey},body:JSON.stringify({text:t,model_id:this.elevenLabsConfig.modelId,voice_settings:{stability:i,similarity_boost:.75,style:s,use_speaker_boost:!0}})});if(o.ok){const t=await o.blob(),a=URL.createObjectURL(t);this.voiceCache[e.cacheKey]=a,this.playVoiceAudio(a)}else console.warn("ElevenLabs API error:",o.status),this.voicePlaying=!1,this.processVoiceQueue()}catch(e){console.warn("Voice synthesis failed:",e),this.voicePlaying=!1,this.processVoiceQueue()}}playVoiceAudio(e){const t=new Audio(e);t.volume=this.voiceVolume;const a=this.musicVolume;this.musicGain&&(this.musicGain.gain.value=.15*a),t.onended=()=>{this.musicGain&&(this.musicGain.gain.value=.3*a),this.voicePlaying=!1,this.processVoiceQueue()},t.onerror=()=>{this.voicePlaying=!1,this.processVoiceQueue()},t.play().catch(()=>{this.voicePlaying=!1,this.processVoiceQueue()})}toggleVoice(){this.voiceEnabled=!this.voiceEnabled,localStorage.setItem("birdturds_voice",this.voiceEnabled),this.showNotification(this.voiceEnabled?"üé§ Voice ON":"üîá Voice OFF")}speakTrumpWithWebSpeech(e){if(!window.speechSynthesis)return;speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e),a=speechSynthesis.getVoices();let i=a.find(e=>"en-US"===e.lang&&e.name.toLowerCase().includes("male"));i||(i=a.find(e=>"en-US"===e.lang)),i||(i=a.find(e=>e.lang.startsWith("en"))),!i&&a.length>0&&(i=a[0]),i&&(t.voice=i),t.pitch=.85,t.rate=.88,t.volume=this.voiceVolume;const s=this.musicVolume;this.musicGain&&(this.musicGain.gain.value=.15*s),t.onend=()=>{this.musicGain&&(this.musicGain.gain.value=.3*s)},speechSynthesis.speak(t)}initSoundSystem(){this.audioCtxReady=!1,this.soundEnabled="false"!==localStorage.getItem("birdturds_sound"),this.musicEnabled="false"!==localStorage.getItem("birdturds_music"),this.sfxVolume=parseFloat(localStorage.getItem("birdturds_sfxVolume")||"0.6"),this.musicVolume=parseFloat(localStorage.getItem("birdturds_musicVolume")||"0.3");const e=()=>{if(!this.audioCtxReady){try{this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.masterVolume=this.audioCtx.createGain(),this.masterVolume.gain.value=.5,this.masterVolume.connect(this.audioCtx.destination),this.audioCtxReady=!0,console.log("üîä Sound system initialized (after user interaction)"),this.musicEnabled&&this.startBackgroundMusic()}catch(e){console.warn("Audio not available:",e),this.soundEnabled=!1}document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",e)}};document.addEventListener("click",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),console.log("üîä Sound system ready (waiting for user interaction)")}playRealAudio(e,t=1){if(!this.soundEnabled)return;const a=Date.now();if(this.lastSoundTime||(this.lastSoundTime={}),!(this.lastSoundTime[e]&&a-this.lastSoundTime[e]<50)){this.lastSoundTime[e]=a;try{if(this.sound.get(e))try{this.sound.stopByKey(e)}catch(e){}if(this.sound.get(e))this.sound.play(e,{volume:t*this.sfxVolume});else if(this.cache.audio.exists(e)){this.sound.add(e).play({volume:t*this.sfxVolume})}else console.warn("Audio file not found:",e,"- using fallback"),this.audioCtx&&this.audioCtxReady&&this.playFallbackShot(t)}catch(t){console.warn("Error playing audio:",e,t)}}}playFallbackShot(e){if(!this.audioCtx||!this.audioCtxReady)return;const t=this.audioCtx.currentTime,a=this.createNoise(.05),i=this.audioCtx.createGain();i.gain.setValueAtTime(.5*e,t),i.gain.exponentialRampToValueAtTime(.01,t+.05),a.connect(i),i.connect(this.masterVolume)}playSound(e,t={}){if(this.soundEnabled&&this.audioCtx&&this.audioCtxReady)try{"suspended"===this.audioCtx.state&&this.audioCtx.resume();const a=this.audioCtx.currentTime,i=(t.volume||1)*this.sfxVolume;switch(e){case"shoot":const e=(btState.currentCharacter||"buck")+"_shoot";this.playRealAudio(e,i);break;case"machinegun":case"machinegun":this.playRealAudio("machinegun_sound",i);break;case"minigun":this.playRealAudio("machinegun_sound",.8*i);break;case"sniper_shop":case"sniper":this.playRealAudio("jolene_shoot",i);break;case"barrett":this.playRealAudio("jolene_shoot",1.2*i);break;case"deagle":this.playRealAudio("tammy_shoot",1.1*i);break;case"revolver":case"rifle":case"revolver":this.playRealAudio("buck_shoot",i);break;case"hit":this.playRealAudio("hit_sound",i);break;case"coin":this.playRealAudio("coin_sound",i);break;case"splat":this.playRealAudio("splat_sound",i);break;case"jump":case"hunter_jump":this.playJumpSound(a,i);break;case"reload":case"hunter_reload":this.playRealAudio("reload_sound",i);break;case"knife":this.playKnifeSound(a,i);break;case"explosion":this.playRealAudio("explosion_sound",i);break;case"powerup":this.playPowerupSound(a,i);break;case"hurt":case"hunter_hurt":this.playRealAudio("hurt_sound",i);break;case"bird":this.playBirdSound(a,i);break;case"tractor":this.playTractorSound(a,i);break;case"gameover":case"hunter_death":this.playRealAudio("gameover_sound",i);break;case"transition":this.playTransitionSound(a,i);break;case"badge":this.playBadgeSound(a,i);break;case"levelup":this.playLevelUpSound(a,i);break;case"zombie_wake":this.playZombieWakeSound(a,i);break;case"scripture":this.playScriptureSound(a,i);break;case"demon":this.playDemonSound(a,i);break;case"angel":this.playAngelSound(a,i);break;case"bible_throw":this.playBibleThrowSound(a,i);break;case"share":this.playShareSound(a,i);break;case"victory":this.playVictorySound(a,i);break;case"anthem":this.playAnthemSound(a,i);break;case"helicopter":this.playHelicopterSound(a,i);break;case"tank":this.playTankSound(a,i);break;case"jeep":this.playJeepSound(a,i);break;case"truck":this.playTruckSound(a,i);break;case"atv":this.playATVSound(a,i);break;case"plane":this.playPlaneSound(a,i);break;case"biplane":this.playBiplaneSound(a,i);break;case"crow":this.playCrowSound(a,i);break;case"seagull":this.playSeagullSound(a,i);break;case"pigeon":this.playPigeonSound(a,i);break;case"hawk":this.playHawkSound(a,i);break;case"eagle":this.playEagleSound(a,i);break;case"owl":this.playOwlSound(a,i);break;case"vulture":this.playVultureSound(a,i);break;case"pelican":this.playPelicanSound(a,i);break;case"bullet_hit":this.playBulletHitSound(a,i);break;case"bird_death":this.playRealAudio("bird_death_sound",i);break;case"boss_hit":this.playBossHitSound(a,i);break;case"boss_death":this.playBossDeathSound(a,i);break;case"turd_block":this.playTurdBlockSound(a,i);break;case"trump_speak":this.playTrumpSpeakSound(a,i);break;case"deer":this.playDeerSound(a,i);break;case"bear":this.playBearSound(a,i);break;case"wolf":this.playWolfSound(a,i);break;case"fox":this.playFoxSound(a,i);break;case"rabbit":this.playRabbitSound(a,i);break;case"squirrel":this.playSquirrelSound(a,i);break;case"raccoon":this.playRaccoonSound(a,i);break;case"skunk":this.playSkunkSound(a,i);break;case"armadillo":this.playArmadilloSound(a,i);break;case"alligator":this.playAlligatorSound(a,i);break;case"snake":this.playSnakeSound(a,i);break;case"frog":this.playFrogSound(a,i);break;case"coyote":this.playCoyoteSound(a,i);break;case"moose":this.playMooseSound(a,i);break;case"buffalo":this.playBuffaloSound(a,i);break;case"turkey":case"turkey_ground":this.playTurkeySound(a,i);break;case"chicken":case"chicken_ground":this.playChickenSound(a,i);break;case"cow":this.playCowSound(a,i);break;case"horse":this.playHorseSound(a,i);break;case"pig":this.playPigSound(a,i);break;case"sheep":this.playSheepSound(a,i);break;case"goat":this.playGoatSound(a,i);break;case"rooster":this.playRoosterSound(a,i);break;case"dog":this.playDogSound(a,i);break;case"cat":this.playCatSound(a,i);break;case"elk":this.playElkSound(a,i);break;case"cougar":this.playCougarSound(a,i);break;case"sparrow":this.playSparrowSound(a,i);break;case"robin":this.playRobinSound(a,i);break;case"bluebird":this.playBluebirdSound(a,i);break;case"cardinal":this.playCardinalSound(a,i);break;case"mockingbird":this.playMockingbirdSound(a,i);break;case"woodpecker":this.playWoodpeckerSound(a,i);break;case"duck":this.playDuckSound(a,i);break;case"goose":this.playGooseSound(a,i);break;case"heron":this.playHeronSound(a,i);break;case"crane":this.playCraneSound(a,i);break;case"flamingo":this.playFlamingoSound(a,i);break;case"parrot":this.playParrotSound(a,i);break;case"raven":this.playRavenSound(a,i);break;case"magpie":this.playMagpieSound(a,i);break;case"jay":this.playJaySound(a,i);break;case"condor":this.playCondorSound(a,i);break;case"falcon":this.playFalconSound(a,i);break;case"osprey":this.playOspreySound(a,i);break;case"kite":this.playKiteSound(a,i);break;case"thunderbird":this.playThunderbirdSound(a,i);break;case"phoenix":this.playPhoenixSound(a,i);break;case"dragon":this.playDragonSound(a,i);break;case"pterodactyl":this.playPterodactylSound(a,i);break;case"pistol":this.playRealAudio("tammy_shoot",i);break;case"crossbow":this.playCrossbowSound(a,i);break;case"grenade":this.playGrenadeSound(a,i);break;case"flamethrower":this.playFlamethrowerSound(a,i);break;case"laser":this.playLaserSound(a,i);break;case"coin_drop":this.playCoinDropSound(a,i);break;case"coin_collect":this.playCoinCollectSound(a,i);break;case"coin_rain":this.playCoinRainSound(a,i);break;case"button_click":this.playButtonClickSound(a,i);break;case"menu_open":this.playMenuOpenSound(a,i);break;case"purchase":this.playPurchaseSound(a,i);break;case"error":this.playErrorSound(a,i);break;case"success":this.playSuccessSound(a,i);break;case"wind":this.playWindSound(a,i);break;case"thunder":this.playThunderSound(a,i);break;case"rain":this.playRainSound(a,i);break;case"hunter_land":this.playHunterLandSound(a,i);break;case"footstep":this.playFootstepSound(a,i)}}catch(e){}}playShotgunSound(e,t){const a=this.createNoise(.05),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="highpass",s.frequency.value=1e3,a.connect(s),s.connect(i),i.gain.setValueAtTime(1.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.05),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(80,e),o.frequency.exponentialRampToValueAtTime(30,e+.12),n.gain.setValueAtTime(.9*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.12),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.15);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="triangle",r.frequency.setValueAtTime(200,e),r.frequency.exponentialRampToValueAtTime(60,e+.1),h.gain.setValueAtTime(.6*t,e),h.gain.exponentialRampToValueAtTime(.01,e+.1),r.connect(h),h.connect(this.masterVolume),r.start(e),r.stop(e+.12)}playRifleSound(e,t){const a=this.createNoise(.04),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="bandpass",s.frequency.value=2e3,s.Q.value=1,a.connect(s),s.connect(i),i.gain.setValueAtTime(1*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.04),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(120,e),o.frequency.exponentialRampToValueAtTime(40,e+.1),n.gain.setValueAtTime(.7*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.1),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.12);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(800,e+.05),r.frequency.exponentialRampToValueAtTime(400,e+.15),h.gain.setValueAtTime(.15*t,e+.05),h.gain.exponentialRampToValueAtTime(.01,e+.15),r.connect(h),h.connect(this.masterVolume),r.start(e+.05),r.stop(e+.18)}playPumpShotgunSound(e,t){const a=this.createNoise(.08),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="lowpass",s.frequency.value=3e3,a.connect(s),s.connect(i),i.gain.setValueAtTime(1.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.08),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(60,e),o.frequency.exponentialRampToValueAtTime(25,e+.15),n.gain.setValueAtTime(1*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.15),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.18);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="sawtooth",r.frequency.setValueAtTime(150,e+.15),r.frequency.setValueAtTime(200,e+.2),h.gain.setValueAtTime(0,e),h.gain.setValueAtTime(.2*t,e+.15),h.gain.exponentialRampToValueAtTime(.01,e+.25),r.connect(h),h.connect(this.masterVolume),r.start(e+.15),r.stop(e+.28)}playDoubleBarrelSound(e,t){const a=this.createNoise(.06),i=this.audioCtx.createGain();i.gain.setValueAtTime(1.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.06),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.setValueAtTime(70,e),s.frequency.exponentialRampToValueAtTime(30,e+.12),o.gain.setValueAtTime(.9*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.12),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.15);const n=this.createNoise(.06),r=this.audioCtx.createGain();r.gain.setValueAtTime(1.1*t,e+.08),r.gain.exponentialRampToValueAtTime(.01,e+.14),n.connect(r),r.connect(this.masterVolume);const h=this.audioCtx.createOscillator(),l=this.audioCtx.createGain();h.type="sine",h.frequency.setValueAtTime(65,e+.08),h.frequency.exponentialRampToValueAtTime(28,e+.2),l.gain.setValueAtTime(.85*t,e+.08),l.gain.exponentialRampToValueAtTime(.01,e+.2),h.connect(l),l.connect(this.masterVolume),h.start(e+.08),h.stop(e+.22)}playARSound(e,t){const a=this.createNoise(.025),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="highpass",s.frequency.value=2500,a.connect(s),s.connect(i),i.gain.setValueAtTime(1.1*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.025),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="triangle",o.frequency.setValueAtTime(300,e),o.frequency.exponentialRampToValueAtTime(100,e+.05),n.gain.setValueAtTime(.6*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.05),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.06);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(150,e),r.frequency.exponentialRampToValueAtTime(50,e+.04),h.gain.setValueAtTime(.5*t,e),h.gain.exponentialRampToValueAtTime(.01,e+.04),r.connect(h),h.connect(this.masterVolume),r.start(e),r.stop(e+.05)}playSemiAutoRifleSound(e,t){const a=this.createNoise(.035),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="bandpass",s.frequency.value=1800,a.connect(s),s.connect(i),i.gain.setValueAtTime(.9*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.035),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(100,e),o.frequency.exponentialRampToValueAtTime(35,e+.1),n.gain.setValueAtTime(.75*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.1),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.12);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="square",r.frequency.setValueAtTime(2e3,e+.06),h.gain.setValueAtTime(.1*t,e+.06),h.gain.exponentialRampToValueAtTime(.01,e+.08),r.connect(h),h.connect(this.masterVolume),r.start(e+.06),r.stop(e+.09)}playAKSound(e,t){const a=this.createNoise(.04),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="lowpass",s.frequency.value=4e3,a.connect(s),s.connect(i),i.gain.setValueAtTime(1.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.04),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(90,e),o.frequency.exponentialRampToValueAtTime(40,e+.08),n.gain.setValueAtTime(.9*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.08),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.1);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="triangle",r.frequency.setValueAtTime(250,e),r.frequency.exponentialRampToValueAtTime(80,e+.06),h.gain.setValueAtTime(.5*t,e),h.gain.exponentialRampToValueAtTime(.01,e+.06),r.connect(h),h.connect(this.masterVolume),r.start(e),r.stop(e+.07)}playSniperSound(e,t){const a=this.createNoise(.03),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="highpass",s.frequency.value=1500,a.connect(s),s.connect(i),i.gain.setValueAtTime(1.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.03),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(50,e),o.frequency.exponentialRampToValueAtTime(20,e+.2),n.gain.setValueAtTime(1*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.2),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.25);const r=this.createNoise(.3),h=this.audioCtx.createGain(),l=this.audioCtx.createBiquadFilter();l.type="lowpass",l.frequency.value=800,r.connect(l),l.connect(h),h.gain.setValueAtTime(0,e),h.gain.setValueAtTime(.15*t,e+.1),h.gain.exponentialRampToValueAtTime(.01,e+.4),h.connect(this.masterVolume);const d=this.audioCtx.createOscillator(),c=this.audioCtx.createGain();d.type="sawtooth",d.frequency.setValueAtTime(300,e+.3),d.frequency.setValueAtTime(150,e+.4),c.gain.setValueAtTime(0,e),c.gain.setValueAtTime(.15*t,e+.3),c.gain.exponentialRampToValueAtTime(.01,e+.45),d.connect(c),c.connect(this.masterVolume),d.start(e+.3),d.stop(e+.5)}playPistolSound(e,t){const a=this.createNoise(.02),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="highpass",s.frequency.value=3e3,a.connect(s),s.connect(i),i.gain.setValueAtTime(.9*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.02),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="triangle",o.frequency.setValueAtTime(400,e),o.frequency.exponentialRampToValueAtTime(150,e+.04),n.gain.setValueAtTime(.5*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.04),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.05);const r=this.audioCtx.createOscillator(),h=this.audioCtx.createGain();r.type="sine",r.frequency.setValueAtTime(180,e),r.frequency.exponentialRampToValueAtTime(80,e+.03),h.gain.setValueAtTime(.4*t,e),h.gain.exponentialRampToValueAtTime(.01,e+.03),r.connect(h),h.connect(this.masterVolume),r.start(e),r.stop(e+.04)}playHitSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(400,e),a.frequency.exponentialRampToValueAtTime(100,e+.1),i.gain.setValueAtTime(.5*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.1)}playCoinSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(880,e),i.type="sine",i.frequency.setValueAtTime(1320,e+.05),s.gain.setValueAtTime(.3*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e+.05),a.stop(e+.15),i.stop(e+.3)}playSplatSound(e,t){const a=this.createNoise(.15),i=this.audioCtx.createBiquadFilter(),s=this.audioCtx.createGain();i.type="lowpass",i.frequency.setValueAtTime(800,e),i.frequency.exponentialRampToValueAtTime(200,e+.15),s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(s),s.connect(this.masterVolume)}playJumpSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(600,e+.15),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.15)}playReloadSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="square",a.frequency.setValueAtTime(100,e),a.frequency.setValueAtTime(200,e+.1),i.gain.setValueAtTime(.3*t,e),i.gain.setValueAtTime(.4*t,e+.1),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playKnifeSound(e,t){const a=this.createNoise(.2),i=this.audioCtx.createBiquadFilter(),s=this.audioCtx.createGain();i.type="highpass",i.frequency.setValueAtTime(2e3,e),i.frequency.exponentialRampToValueAtTime(500,e+.2),s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(s),s.connect(this.masterVolume)}playExplosionSound(e,t){const a=this.audioCtx.createOscillator(),i=this.createNoise(.5),s=this.audioCtx.createGain(),o=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(80,e),a.frequency.exponentialRampToValueAtTime(20,e+.5),s.gain.setValueAtTime(.7*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.5),o.gain.setValueAtTime(.6*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(s),i.connect(o),s.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playPowerupSound(e,t){[523,659,784,1047].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(0,e+.08*i),o.gain.linearRampToValueAtTime(.3*t,e+.08*i+.02),o.gain.exponentialRampToValueAtTime(.01,e+.08*i+.15),s.connect(o),o.connect(this.masterVolume),s.start(e+.08*i),s.stop(e+.08*i+.15)})}playHurtSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(150,e),a.frequency.exponentialRampToValueAtTime(60,e+.2),i.gain.setValueAtTime(.5*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playBirdSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine";const s=1e3+1e3*Math.random();a.frequency.setValueAtTime(s,e),a.frequency.linearRampToValueAtTime(1.2*s,e+.05),a.frequency.linearRampToValueAtTime(.8*s,e+.1),i.gain.setValueAtTime(.15*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.15)}playTractorSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(60+20*Math.random(),e),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playGameOverSound(e,t){[440,392,349,330].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(0,e+.3*i),o.gain.linearRampToValueAtTime(.4*t,e+.3*i+.05),o.gain.exponentialRampToValueAtTime(.01,e+.3*i+.3),s.connect(o),o.connect(this.masterVolume),s.start(e+.3*i),s.stop(e+.3*i+.35)})}playTransitionSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain(),o=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(800,e+.3),a.frequency.exponentialRampToValueAtTime(400,e+.5),s.gain.setValueAtTime(0,e),s.gain.linearRampToValueAtTime(.3*t,e+.1),s.gain.exponentialRampToValueAtTime(.01,e+.5),i.type="triangle",i.frequency.setValueAtTime(1200,e+.2),i.frequency.exponentialRampToValueAtTime(1600,e+.4),o.gain.setValueAtTime(0,e+.2),o.gain.linearRampToValueAtTime(.15*t,e+.25),o.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(s),i.connect(o),s.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.55),i.start(e+.2),i.stop(e+.55)}playBadgeSound(e,t){[523,659,784,1047].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="triangle",s.frequency.value=a,o.gain.setValueAtTime(0,e+.1*i),o.gain.linearRampToValueAtTime(.4*t,e+.1*i+.05),o.gain.exponentialRampToValueAtTime(.01,e+.1*i+.4),s.connect(o),o.connect(this.masterVolume),s.start(e+.1*i),s.stop(e+.1*i+.45)})}playLevelUpSound(e,t){[392,440,494,523,587,659,784].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="square",s.frequency.value=a,o.gain.setValueAtTime(0,e+.08*i),o.gain.linearRampToValueAtTime(.25*t,e+.08*i+.02),o.gain.exponentialRampToValueAtTime(.01,e+.08*i+.15),s.connect(o),o.connect(this.masterVolume),s.start(e+.08*i),s.stop(e+.08*i+.2)})}playZombieWakeSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(800,e+.5),i.type="triangle",i.frequency.setValueAtTime(400,e),i.frequency.exponentialRampToValueAtTime(1200,e+.5),s.gain.setValueAtTime(0,e),s.gain.linearRampToValueAtTime(.3*t,e+.1),s.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+.6),i.stop(e+.6)}playScriptureSound(e,t){[523,659,784].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(.15*t,e+.02*i),o.gain.exponentialRampToValueAtTime(.01,e+.8),s.connect(o),o.connect(this.masterVolume),s.start(e+.02*i),s.stop(e+.85)})}playDemonSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(80,e),a.frequency.setValueAtTime(60,e+.2),a.frequency.setValueAtTime(40,e+.4),i.type="square",i.frequency.setValueAtTime(55,e),s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+.6),i.stop(e+.6)}playAngelSound(e,t){[523,659,784,988,1175].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,s.frequency.setValueAtTime(a,e),s.frequency.linearRampToValueAtTime(1.01*a,e+.5),o.gain.setValueAtTime(.12*t,e+.05*i),o.gain.exponentialRampToValueAtTime(.01,e+1.2),s.connect(o),o.connect(this.masterVolume),s.start(e+.05*i),s.stop(e+1.3)})}playBibleThrowSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain(),s=this.createNoise(.15),o=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(400,e),a.frequency.exponentialRampToValueAtTime(800,e+.1),a.frequency.exponentialRampToValueAtTime(600,e+.2),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),o.gain.setValueAtTime(.2*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(i),s.connect(o),i.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.25)}playShareSound(e,t){[659,784,988].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(.25*t,e+.08*i),o.gain.exponentialRampToValueAtTime(.01,e+.08*i+.3),s.connect(o),o.connect(this.masterVolume),s.start(e+.08*i),s.stop(e+.08*i+.35)})}playVictorySound(e,t){let a=e;[{note:523,dur:.15},{note:523,dur:.15},{note:523,dur:.15},{note:523,dur:.3},{note:415,dur:.3},{note:466,dur:.3},{note:523,dur:.6}].forEach(e=>{const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="square",i.frequency.value=e.note,s.gain.setValueAtTime(.25*t,a),s.gain.setValueAtTime(.25*t,a+.8*e.dur),s.gain.exponentialRampToValueAtTime(.01,a+e.dur),i.connect(s),s.connect(this.masterVolume),i.start(a),i.stop(a+e.dur+.05),a+=e.dur})}playAnthemSound(e,t){let a=e;[{note:392,dur:.4},{note:330,dur:.2},{note:262,dur:.4},{note:330,dur:.4},{note:392,dur:.4},{note:523,dur:.8}].forEach(e=>{const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="triangle",i.frequency.value=e.note,s.gain.setValueAtTime(.3*t,a),s.gain.setValueAtTime(.3*t,a+.7*e.dur),s.gain.exponentialRampToValueAtTime(.01,a+e.dur),i.connect(s),s.connect(this.masterVolume),i.start(a),i.stop(a+e.dur+.05),a+=e.dur})}playHelicopterSound(e,t){for(let a=0;a<8;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sawtooth",i.frequency.value=80+20*Math.random(),s.gain.setValueAtTime(.3*t,e+.05*a),s.gain.exponentialRampToValueAtTime(.01,e+.05*a+.04),i.connect(s),s.connect(this.masterVolume),i.start(e+.05*a),i.stop(e+.05*a+.05)}}playTankSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sawtooth",a.frequency.value=40,i.type="square",i.frequency.value=60,s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+.5),i.stop(e+.5)}playJeepSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(100,e),a.frequency.linearRampToValueAtTime(120,e+.15),a.frequency.linearRampToValueAtTime(90,e+.3),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.4)}playTruckSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="triangle",a.frequency.value=55,i.type="sawtooth",i.frequency.value=110,s.gain.setValueAtTime(.35*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+.6),i.stop(e+.6)}playATVSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(200,e),a.frequency.linearRampToValueAtTime(280,e+.1),a.frequency.linearRampToValueAtTime(220,e+.25),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playPlaneSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sawtooth",a.frequency.value=150,i.type="triangle",i.frequency.value=75,s.gain.setValueAtTime(.2*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.8),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+.8),i.stop(e+.8)}playBiplaneSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="square",a.frequency.setValueAtTime(100,e),a.frequency.linearRampToValueAtTime(130,e+.3),a.frequency.linearRampToValueAtTime(110,e+.6),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.7),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.7)}playCrowSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(400,e),a.frequency.exponentialRampToValueAtTime(250,e+.15),a.frequency.exponentialRampToValueAtTime(350,e+.25),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playSeagullSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(800,e),a.frequency.exponentialRampToValueAtTime(1200,e+.1),a.frequency.exponentialRampToValueAtTime(600,e+.3),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.35),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.35)}playPigeonSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(350,e+.1),a.frequency.linearRampToValueAtTime(280,e+.2),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.25)}playHawkSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(1e3,e),a.frequency.exponentialRampToValueAtTime(600,e+.2),a.frequency.exponentialRampToValueAtTime(900,e+.35),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.4)}playEagleSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(1200,e),a.frequency.exponentialRampToValueAtTime(800,e+.15),a.frequency.exponentialRampToValueAtTime(1e3,e+.4),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playOwlSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(350,e),a.frequency.linearRampToValueAtTime(300,e+.2),i.gain.setValueAtTime(.3*t,e),i.gain.setValueAtTime(.01,e+.2),i.gain.setValueAtTime(.25*t,e+.3),i.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playVultureSound(e,t){const a=this.createNoise(.3),i=this.audioCtx.createGain();i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume)}playPelicanSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(200,e),a.frequency.linearRampToValueAtTime(150,e+.2),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playBulletHitSound(e,t){const a=this.audioCtx.createOscillator(),i=this.createNoise(.05),s=this.audioCtx.createGain(),o=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(800,e),a.frequency.exponentialRampToValueAtTime(200,e+.05),s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.08),o.gain.setValueAtTime(.3*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.04),a.connect(s),i.connect(o),s.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.08)}playBirdDeathSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(600,e),a.frequency.exponentialRampToValueAtTime(150,e+.15),i.type="sine",i.frequency.setValueAtTime(100,e+.1),i.frequency.exponentialRampToValueAtTime(50,e+.2),s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e+.1),a.stop(e+.15),i.stop(e+.25)}playBossHitSound(e,t){const a=this.audioCtx.createOscillator(),i=this.createNoise(.15),s=this.audioCtx.createGain(),o=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(150,e),a.frequency.exponentialRampToValueAtTime(50,e+.15),s.gain.setValueAtTime(.6*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.2),o.gain.setValueAtTime(.4*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(s),i.connect(o),s.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playBossDeathSound(e,t){this.playExplosionSound(e,1.2*t);[262,330,392,523].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="triangle",s.frequency.value=a,o.gain.setValueAtTime(.2*t,e+.2),o.gain.exponentialRampToValueAtTime(.01,e+1),s.connect(o),o.connect(this.masterVolume),s.start(e+.2),s.stop(e+1)})}playTurdBlockSound(e,t){this.playSplatSound(e,.5*t);const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(800,e+.05),a.frequency.exponentialRampToValueAtTime(1200,e+.1),i.gain.setValueAtTime(.3*t,e+.05),i.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(this.masterVolume),a.start(e+.05),a.stop(e+.15)}playTrumpSpeakSound(e,t){[392,494,587].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="triangle",s.frequency.value=a,o.gain.setValueAtTime(.25*t,e+.1*i),o.gain.exponentialRampToValueAtTime(.01,e+.1*i+.15),s.connect(o),o.connect(this.masterVolume),s.start(e+.1*i),s.stop(e+.1*i+.2)})}playDeerSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(450,e),a.frequency.exponentialRampToValueAtTime(300,e+.15),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playBearSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sawtooth",a.frequency.value=80,i.type="square",i.frequency.value=60,s.gain.setValueAtTime(.5*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+.6),i.stop(e+.6)}playWolfSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(500,e+.3),a.frequency.linearRampToValueAtTime(450,e+.8),a.frequency.linearRampToValueAtTime(350,e+1.2),i.gain.setValueAtTime(.3*t,e),i.gain.setValueAtTime(.35*t,e+.3),i.gain.exponentialRampToValueAtTime(.01,e+1.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+1.3)}playFoxSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(600,e),a.frequency.exponentialRampToValueAtTime(400,e+.08),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.1)}playRabbitSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(900,e),a.frequency.exponentialRampToValueAtTime(700,e+.08),i.gain.setValueAtTime(.15*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.1)}playSquirrelSound(e,t){for(let a=0;a<4;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sine",i.frequency.value=1200+300*Math.random(),s.gain.setValueAtTime(.2*t,e+.06*a),s.gain.exponentialRampToValueAtTime(.01,e+.06*a+.04),i.connect(s),s.connect(this.masterVolume),i.start(e+.06*a),i.stop(e+.06*a+.05)}}playRaccoonSound(e,t){for(let a=0;a<5;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="triangle",i.frequency.value=500+200*Math.random(),s.gain.setValueAtTime(.2*t,e+.05*a),s.gain.exponentialRampToValueAtTime(.01,e+.05*a+.04),i.connect(s),s.connect(this.masterVolume),i.start(e+.05*a),i.stop(e+.05*a+.05)}}playSkunkSound(e,t){const a=this.createNoise(.2),i=this.audioCtx.createGain();i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(i),i.connect(this.masterVolume)}playArmadilloSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(150,e),a.frequency.linearRampToValueAtTime(120,e+.15),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playAlligatorSound(e,t){const a=this.audioCtx.createOscillator(),i=this.createNoise(.3),s=this.audioCtx.createGain(),o=this.audioCtx.createGain();a.type="sawtooth",a.frequency.value=50,s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.5),o.gain.setValueAtTime(.2*t,e+.2),o.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(s),i.connect(o),s.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playSnakeSound(e,t){const a=this.createNoise(.4),i=this.audioCtx.createBiquadFilter(),s=this.audioCtx.createGain();i.type="highpass",i.frequency.value=3e3,s.gain.setValueAtTime(.25*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(i),i.connect(s),s.connect(this.masterVolume)}playFrogSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(150,e+.1),a.frequency.setValueAtTime(200,e+.15),a.frequency.exponentialRampToValueAtTime(140,e+.25),i.gain.setValueAtTime(.3*t,e),i.gain.setValueAtTime(.01,e+.12),i.gain.setValueAtTime(.25*t,e+.15),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playCoyoteSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(400,e),a.frequency.linearRampToValueAtTime(700,e+.2),a.frequency.linearRampToValueAtTime(500,e+.4),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playMooseSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(100,e),a.frequency.linearRampToValueAtTime(80,e+.4),a.frequency.linearRampToValueAtTime(120,e+.7),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.8),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.8)}playBuffaloSound(e,t){const a=this.audioCtx.createOscillator(),i=this.createNoise(.15),s=this.audioCtx.createGain(),o=this.audioCtx.createGain();a.type="triangle",a.frequency.value=90,s.gain.setValueAtTime(.35*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.3),o.gain.setValueAtTime(.2*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(s),i.connect(o),s.connect(this.masterVolume),o.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playTurkeySound(e,t){for(let a=0;a<4;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sawtooth",i.frequency.setValueAtTime(300+50*a,e+.1*a),i.frequency.exponentialRampToValueAtTime(200,e+.1*a+.08),s.gain.setValueAtTime(.25*t,e+.1*a),s.gain.exponentialRampToValueAtTime(.01,e+.1*a+.09),i.connect(s),s.connect(this.masterVolume),i.start(e+.1*a),i.stop(e+.1*a+.1)}}playChickenSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(400,e),a.frequency.exponentialRampToValueAtTime(250,e+.05),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.08),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.08)}playCowSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(150,e),a.frequency.linearRampToValueAtTime(180,e+.3),a.frequency.linearRampToValueAtTime(140,e+.8),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+1),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+1)}playHorseSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(600,e+.2),a.frequency.linearRampToValueAtTime(400,e+.5),a.frequency.linearRampToValueAtTime(350,e+.8),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.9),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.9)}playPigSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(250,e),a.frequency.exponentialRampToValueAtTime(180,e+.1),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.15)}playSheepSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(350,e),a.frequency.linearRampToValueAtTime(400,e+.15),a.frequency.linearRampToValueAtTime(320,e+.4),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playGoatSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(450,e),a.frequency.linearRampToValueAtTime(500,e+.1),a.frequency.linearRampToValueAtTime(380,e+.3),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.4)}playRoosterSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(800,e+.3),a.frequency.linearRampToValueAtTime(600,e+.5),a.frequency.linearRampToValueAtTime(400,e+.7),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.8),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.8)}playDogSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(400,e),a.frequency.exponentialRampToValueAtTime(250,e+.08),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.12),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.12)}playCatSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(500,e),a.frequency.linearRampToValueAtTime(700,e+.15),a.frequency.linearRampToValueAtTime(400,e+.4),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.45),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.45)}playElkSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(200,e),a.frequency.linearRampToValueAtTime(500,e+.3),a.frequency.linearRampToValueAtTime(400,e+.6),a.frequency.linearRampToValueAtTime(250,e+1),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+1.1),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+1.1)}playCougarSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(600,e),a.frequency.linearRampToValueAtTime(400,e+.2),a.frequency.linearRampToValueAtTime(300,e+.5),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.6)}playSparrowSound(e,t){for(let a=0;a<3;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sine",i.frequency.value=2500+500*Math.random(),s.gain.setValueAtTime(.15*t,e+.08*a),s.gain.exponentialRampToValueAtTime(.01,e+.08*a+.05),i.connect(s),s.connect(this.masterVolume),i.start(e+.08*a),i.stop(e+.08*a+.06)}}playRobinSound(e,t){[1200,1400,1e3,1300,1100].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(.2*t,e+.1*i),o.gain.exponentialRampToValueAtTime(.01,e+.1*i+.08),s.connect(o),o.connect(this.masterVolume),s.start(e+.1*i),s.stop(e+.1*i+.1)})}playBluebirdSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(1800,e),a.frequency.linearRampToValueAtTime(2200,e+.1),a.frequency.linearRampToValueAtTime(1600,e+.2),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.25)}playCardinalSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(2e3,e),a.frequency.linearRampToValueAtTime(1500,e+.15),a.frequency.setValueAtTime(2e3,e+.2),a.frequency.linearRampToValueAtTime(1600,e+.35),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.4),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.4)}playMockingbirdSound(e,t){[1500,2e3,1200,1800,2200].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(.2*t,e+.12*i),o.gain.exponentialRampToValueAtTime(.01,e+.12*i+.1),s.connect(o),o.connect(this.masterVolume),s.start(e+.12*i),s.stop(e+.12*i+.11)})}playWoodpeckerSound(e,t){for(let a=0;a<8;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="square",i.frequency.value=150,s.gain.setValueAtTime(.3*t,e+.04*a),s.gain.exponentialRampToValueAtTime(.01,e+.04*a+.02),i.connect(s),s.connect(this.masterVolume),i.start(e+.04*a),i.stop(e+.04*a+.03)}}playDuckSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(350,e),a.frequency.exponentialRampToValueAtTime(250,e+.1),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.15)}playGooseSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(400,e+.1),a.frequency.linearRampToValueAtTime(280,e+.25),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playHeronSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(500,e),a.frequency.exponentialRampToValueAtTime(300,e+.2),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.25)}playCraneSound(e,t){for(let a=0;a<5;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="triangle",i.frequency.value=400+30*a,s.gain.setValueAtTime(.25*t,e+.06*a),s.gain.exponentialRampToValueAtTime(.01,e+.06*a+.05),i.connect(s),s.connect(this.masterVolume),i.start(e+.06*a),i.stop(e+.06*a+.06)}}playFlamingoSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(450,e),a.frequency.exponentialRampToValueAtTime(350,e+.15),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playParrotSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(800,e),a.frequency.linearRampToValueAtTime(1200,e+.05),a.frequency.linearRampToValueAtTime(600,e+.15),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playRavenSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(250,e),a.frequency.exponentialRampToValueAtTime(180,e+.2),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.3)}playMagpieSound(e,t){for(let a=0;a<4;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sawtooth",i.frequency.value=600+200*Math.random(),s.gain.setValueAtTime(.25*t,e+.07*a),s.gain.exponentialRampToValueAtTime(.01,e+.07*a+.05),i.connect(s),s.connect(this.masterVolume),i.start(e+.07*a),i.stop(e+.07*a+.06)}}playJaySound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(1e3,e),a.frequency.exponentialRampToValueAtTime(700,e+.15),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playCondorSound(e,t){const a=this.createNoise(.3),i=this.audioCtx.createBiquadFilter(),s=this.audioCtx.createGain();i.type="lowpass",i.frequency.value=500,s.gain.setValueAtTime(.25*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.35),a.connect(i),i.connect(s),s.connect(this.masterVolume)}playFalconSound(e,t){for(let a=0;a<3;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sine",i.frequency.setValueAtTime(2500,e+.1*a),i.frequency.exponentialRampToValueAtTime(2e3,e+.1*a+.07),s.gain.setValueAtTime(.25*t,e+.1*a),s.gain.exponentialRampToValueAtTime(.01,e+.1*a+.08),i.connect(s),s.connect(this.masterVolume),i.start(e+.1*a),i.stop(e+.1*a+.09)}}playOspreySound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(2e3,e),a.frequency.linearRampToValueAtTime(2500,e+.1),a.frequency.linearRampToValueAtTime(1800,e+.2),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.25)}playKiteSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(2200,e),a.frequency.linearRampToValueAtTime(1800,e+.2),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.25),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.25)}playThunderbirdSound(e,t){const a=this.createNoise(.3),i=this.audioCtx.createGain();i.gain.setValueAtTime(.5*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.3),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sawtooth",s.frequency.setValueAtTime(1500,e+.1),s.frequency.exponentialRampToValueAtTime(800,e+.4),o.gain.setValueAtTime(.4*t,e+.1),o.gain.exponentialRampToValueAtTime(.01,e+.5),s.connect(o),o.connect(this.masterVolume),s.start(e+.1),s.stop(e+.5)}playPhoenixSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(1200,e),a.frequency.linearRampToValueAtTime(2e3,e+.2),a.frequency.linearRampToValueAtTime(1e3,e+.5),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.6);for(let a=0;a<5;a++){const i=this.createNoise(.05),s=this.audioCtx.createGain();s.gain.setValueAtTime(.2*t,e+.1*a),s.gain.exponentialRampToValueAtTime(.01,e+.1*a+.04),i.connect(s),s.connect(this.masterVolume)}}playDragonSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(100,e),a.frequency.linearRampToValueAtTime(150,e+.3),a.frequency.linearRampToValueAtTime(80,e+.8),i.type="square",i.frequency.setValueAtTime(50,e),s.gain.setValueAtTime(.5*t,e),s.gain.exponentialRampToValueAtTime(.01,e+1),a.connect(s),i.connect(s),s.connect(this.masterVolume),a.start(e),i.start(e),a.stop(e+1),i.stop(e+1)}playPterodactylSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(800,e),a.frequency.linearRampToValueAtTime(1500,e+.15),a.frequency.linearRampToValueAtTime(600,e+.4),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.5)}playMachinegunBurstSound(e,t){const a=this.createNoise(.04),i=this.audioCtx.createGain();i.gain.setValueAtTime(.9*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.04),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="triangle",s.frequency.setValueAtTime(200,e),s.frequency.exponentialRampToValueAtTime(60,e+.05),o.gain.setValueAtTime(.5*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.05),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.06)}playMinigunSound(e,t){const a=this.createNoise(.02),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="highpass",s.frequency.value=2e3,a.connect(s),s.connect(i),i.gain.setValueAtTime(.7*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.02),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sawtooth",o.frequency.setValueAtTime(400,e),o.frequency.exponentialRampToValueAtTime(300,e+.03),n.gain.setValueAtTime(.2*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.03),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.035)}playSniperShopSound(e,t){const a=this.createNoise(.05),i=this.audioCtx.createGain();i.gain.setValueAtTime(1.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.05),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.setValueAtTime(60,e),s.frequency.exponentialRampToValueAtTime(25,e+.25),o.gain.setValueAtTime(1*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.25),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.3);const n=this.createNoise(.4),r=this.audioCtx.createGain(),h=this.audioCtx.createBiquadFilter();h.type="lowpass",h.frequency.value=600,n.connect(h),h.connect(r),r.gain.setValueAtTime(0,e),r.gain.setValueAtTime(.2*t,e+.1),r.gain.exponentialRampToValueAtTime(.01,e+.5),r.connect(this.masterVolume)}playBarrettSound(e,t){const a=this.createNoise(.08),i=this.audioCtx.createGain();i.gain.setValueAtTime(1.5*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.08),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.setValueAtTime(40,e),s.frequency.exponentialRampToValueAtTime(15,e+.4),o.gain.setValueAtTime(1.2*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.4),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.45);const n=this.createNoise(.6),r=this.audioCtx.createGain(),h=this.audioCtx.createBiquadFilter();h.type="lowpass",h.frequency.value=400,n.connect(h),h.connect(r),r.gain.setValueAtTime(0,e),r.gain.setValueAtTime(.3*t,e+.15),r.gain.exponentialRampToValueAtTime(.01,e+.7),r.connect(this.masterVolume)}playDeagleSound(e,t){const a=this.createNoise(.04),i=this.audioCtx.createGain(),s=this.audioCtx.createBiquadFilter();s.type="highpass",s.frequency.value=1500,a.connect(s),s.connect(i),i.gain.setValueAtTime(1*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.04),i.connect(this.masterVolume);const o=this.audioCtx.createOscillator(),n=this.audioCtx.createGain();o.type="sine",o.frequency.setValueAtTime(150,e),o.frequency.exponentialRampToValueAtTime(50,e+.1),n.gain.setValueAtTime(.8*t,e),n.gain.exponentialRampToValueAtTime(.01,e+.1),o.connect(n),n.connect(this.masterVolume),o.start(e),o.stop(e+.12)}playRevolverSound(e,t){const a=this.createNoise(.03),i=this.audioCtx.createGain();i.gain.setValueAtTime(.8*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.03),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="triangle",s.frequency.setValueAtTime(350,e),s.frequency.exponentialRampToValueAtTime(100,e+.08),o.gain.setValueAtTime(.6*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.08),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.1);const n=this.audioCtx.createOscillator(),r=this.audioCtx.createGain();n.type="sine",n.frequency.setValueAtTime(1200,e+.02),n.frequency.exponentialRampToValueAtTime(600,e+.12),r.gain.setValueAtTime(.1*t,e+.02),r.gain.exponentialRampToValueAtTime(.01,e+.12),n.connect(r),r.connect(this.masterVolume),n.start(e+.02),n.stop(e+.15)}playCrossbowSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(800,e),a.frequency.exponentialRampToValueAtTime(200,e+.15),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playGrenadeSound(e,t){const a=this.createNoise(.5),i=this.audioCtx.createGain();i.gain.setValueAtTime(.7*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.5),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sawtooth",s.frequency.setValueAtTime(80,e),s.frequency.exponentialRampToValueAtTime(30,e+.3),o.gain.setValueAtTime(.6*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.4),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.4)}playFlamethrowerSound(e,t){const a=this.createNoise(.6),i=this.audioCtx.createBiquadFilter(),s=this.audioCtx.createGain();i.type="bandpass",i.frequency.value=800,i.Q.value=2,s.gain.setValueAtTime(.4*t,e),s.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(i),i.connect(s),s.connect(this.masterVolume)}playLaserSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(1500,e),a.frequency.exponentialRampToValueAtTime(300,e+.15),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.18),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.18)}playCoinDropSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(2e3,e),a.frequency.exponentialRampToValueAtTime(1200,e+.1),i.gain.setValueAtTime(.25*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.15),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.15)}playCoinCollectSound(e,t){this.playCoinSound(e,1.2*t)}playCoinRainSound(e,t){for(let a=0;a<6;a++){const i=this.audioCtx.createOscillator(),s=this.audioCtx.createGain();i.type="sine",i.frequency.value=1800+600*Math.random(),s.gain.setValueAtTime(.15*t,e+.08*a),s.gain.exponentialRampToValueAtTime(.01,e+.08*a+.1),i.connect(s),s.connect(this.masterVolume),i.start(e+.08*a),i.stop(e+.08*a+.12)}}playButtonClickSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.value=800,i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.05),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.05)}playMenuOpenSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(400,e),a.frequency.linearRampToValueAtTime(800,e+.1),i.gain.setValueAtTime(.2*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.12),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.12)}playPurchaseSound(e,t){[523,659,784,1047].forEach((a,i)=>{const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sine",s.frequency.value=a,o.gain.setValueAtTime(.3*t,e+.08*i),o.gain.exponentialRampToValueAtTime(.01,e+.08*i+.15),s.connect(o),o.connect(this.masterVolume),s.start(e+.08*i),s.stop(e+.08*i+.2)})}playErrorSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.value=150,i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playSuccessSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.value=1200,i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playWindSound(e,t){const a=this.createNoise(1),i=this.audioCtx.createBiquadFilter(),s=this.audioCtx.createGain();i.type="lowpass",i.frequency.setValueAtTime(400,e),i.frequency.linearRampToValueAtTime(800,e+.5),i.frequency.linearRampToValueAtTime(300,e+1),s.gain.setValueAtTime(.2*t,e),s.gain.exponentialRampToValueAtTime(.01,e+1),a.connect(i),i.connect(s),s.connect(this.masterVolume)}playThunderSound(e,t){const a=this.createNoise(.8),i=this.audioCtx.createGain();i.gain.setValueAtTime(.6*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.8),a.connect(i),i.connect(this.masterVolume);const s=this.audioCtx.createOscillator(),o=this.audioCtx.createGain();s.type="sawtooth",s.frequency.setValueAtTime(60,e),s.frequency.exponentialRampToValueAtTime(30,e+.5),o.gain.setValueAtTime(.5*t,e),o.gain.exponentialRampToValueAtTime(.01,e+.6),s.connect(o),o.connect(this.masterVolume),s.start(e),s.stop(e+.6)}playRainSound(e,t){for(let a=0;a<20;a++){const i=this.createNoise(.03),s=this.audioCtx.createBiquadFilter(),o=this.audioCtx.createGain();s.type="highpass",s.frequency.value=2e3+2e3*Math.random(),o.gain.setValueAtTime(.05*t,e+.05*a),o.gain.exponentialRampToValueAtTime(.01,e+.05*a+.02),i.connect(s),s.connect(o),o.connect(this.masterVolume)}}playHunterHurtSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sine",a.frequency.setValueAtTime(200,e),a.frequency.exponentialRampToValueAtTime(100,e+.15),i.gain.setValueAtTime(.35*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.2),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.2)}playHunterDeathSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="sawtooth",a.frequency.setValueAtTime(300,e),a.frequency.linearRampToValueAtTime(150,e+.5),i.gain.setValueAtTime(.4*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.6),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.6)}playHunterLandSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.setValueAtTime(100,e),a.frequency.exponentialRampToValueAtTime(50,e+.08),i.gain.setValueAtTime(.3*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.1),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.1)}playFootstepSound(e,t){const a=this.audioCtx.createOscillator(),i=this.audioCtx.createGain();a.type="triangle",a.frequency.value=80+40*Math.random(),i.gain.setValueAtTime(.15*t,e),i.gain.exponentialRampToValueAtTime(.01,e+.05),a.connect(i),i.connect(this.masterVolume),a.start(e),a.stop(e+.05)}showBadgeNotification(e){this.playSound("badge");const t=document.createElement("div");t.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%) scale(0);\n      background: linear-gradient(135deg, #ffd700, #ffaa00);\n      padding: 30px 50px;\n      border-radius: 20px;\n      text-align: center;\n      z-index: 99999;\n      box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);\n      animation: badgePop 0.5s ease forwards;\n      font-family: system-ui, sans-serif;\n    ",t.innerHTML=`\n      <style>\n        @keyframes badgePop { \n          0% { transform: translate(-50%, -50%) scale(0); }\n          50% { transform: translate(-50%, -50%) scale(1.1); }\n          100% { transform: translate(-50%, -50%) scale(1); }\n        }\n        @keyframes badgeShine {\n          0%, 100% { filter: brightness(1); }\n          50% { filter: brightness(1.3); }\n        }\n      </style>\n      <div style="font-size: 60px; animation: badgeShine 1s ease infinite;">${e.icon}</div>\n      <h2 style="color: #1a1a2e; margin: 10px 0 5px; font-size: 24px;">BADGE EARNED!</h2>\n      <h3 style="color: #333; margin: 0 0 10px; font-size: 20px;">${e.name}</h3>\n      <p style="color: #555; font-size: 14px; margin: 0 0 10px;">${e.description}</p>\n      <p style="color: #22c55e; font-size: 16px; font-weight: bold;">+${e.coins} ü™ô Coins!</p>\n    `,document.body.appendChild(t),setTimeout(()=>{t.style.animation="badgePop 0.3s ease reverse forwards",setTimeout(()=>t.remove(),300)},3e3)}createNoise(e){const t=this.audioCtx.sampleRate*e,a=this.audioCtx.createBuffer(1,t,this.audioCtx.sampleRate),i=a.getChannelData(0);for(let e=0;e<t;e++)i[e]=2*Math.random()-1;const s=this.audioCtx.createBufferSource();return s.buffer=a,s.start(),s}initMusicSystem(){this.musicChoice=localStorage.getItem("birdturds_musicChoice")||"adventure",this.currentTrackIndex=0,this.musicSequenceEnabled="true"===localStorage.getItem("birdturds_musicSequence"),this.musicTracks={adventure:{name:"üéµ Adventure Theme",category:"game",tempo:.25,melody:[{note:392,dur:.25},{note:440,dur:.25},{note:494,dur:.25},{note:523,dur:.5},{note:494,dur:.25},{note:440,dur:.25},{note:392,dur:.5},{note:349,dur:.25},{note:330,dur:.25},{note:294,dur:.5},{note:330,dur:.25},{note:349,dur:.25},{note:392,dur:.5}],bass:[{note:196,dur:1},{note:262,dur:1},{note:220,dur:1},{note:147,dur:1}]},action:{name:"‚öîÔ∏è Action Packed",category:"game",tempo:.2,melody:[{note:330,dur:.2},{note:330,dur:.2},{note:392,dur:.2},{note:330,dur:.2},{note:294,dur:.4},{note:262,dur:.4},{note:330,dur:.2},{note:330,dur:.2},{note:392,dur:.2},{note:440,dur:.4},{note:392,dur:.2},{note:330,dur:.4}],bass:[{note:165,dur:.8},{note:196,dur:.8},{note:147,dur:.8},{note:131,dur:.8}]},intense:{name:"üî• Intense Battle",category:"game",tempo:.15,melody:[{note:262,dur:.15},{note:311,dur:.15},{note:262,dur:.15},{note:392,dur:.3},{note:349,dur:.15},{note:311,dur:.15},{note:262,dur:.3},{note:233,dur:.15},{note:262,dur:.15},{note:311,dur:.3},{note:262,dur:.3}],bass:[{note:131,dur:.6},{note:156,dur:.6},{note:117,dur:.6},{note:131,dur:.6}]},peaceful:{name:"üåÖ Peaceful Journey",category:"game",tempo:.4,melody:[{note:523,dur:.4},{note:587,dur:.4},{note:659,dur:.8},{note:587,dur:.4},{note:523,dur:.4},{note:440,dur:.8},{note:494,dur:.4},{note:523,dur:.4},{note:587,dur:.8}],bass:[{note:262,dur:1.6},{note:220,dur:1.6},{note:247,dur:1.6}]},arcade_fever:{name:"üïπÔ∏è Arcade Fever",category:"game",tempo:.12,melody:[{note:523,dur:.12},{note:587,dur:.12},{note:659,dur:.12},{note:784,dur:.24},{note:659,dur:.12},{note:587,dur:.12},{note:523,dur:.24},{note:440,dur:.12},{note:494,dur:.12},{note:523,dur:.12},{note:587,dur:.24},{note:523,dur:.12},{note:494,dur:.12},{note:440,dur:.24}],bass:[{note:262,dur:.48},{note:196,dur:.48},{note:220,dur:.48},{note:175,dur:.48}]},turbo_hunt:{name:"üöÄ Turbo Hunt",category:"game",tempo:.1,melody:[{note:330,dur:.1},{note:392,dur:.1},{note:494,dur:.2},{note:440,dur:.1},{note:392,dur:.1},{note:330,dur:.2},{note:294,dur:.1},{note:330,dur:.1},{note:392,dur:.1},{note:440,dur:.1},{note:494,dur:.2},{note:523,dur:.2}],bass:[{note:165,dur:.4},{note:131,dur:.4},{note:147,dur:.4},{note:196,dur:.4}]},bird_blaster:{name:"üê¶ Bird Blaster",category:"game",tempo:.15,melody:[{note:659,dur:.15},{note:587,dur:.15},{note:523,dur:.15},{note:440,dur:.3},{note:494,dur:.15},{note:523,dur:.15},{note:587,dur:.3},{note:659,dur:.15},{note:784,dur:.15},{note:659,dur:.15},{note:587,dur:.15},{note:523,dur:.3},{note:440,dur:.3}],bass:[{note:220,dur:.6},{note:247,dur:.6},{note:262,dur:.6},{note:196,dur:.6}]},retro_wave:{name:"üåä Retro Wave",category:"game",tempo:.18,melody:[{note:440,dur:.18},{note:523,dur:.18},{note:659,dur:.36},{note:587,dur:.18},{note:523,dur:.18},{note:440,dur:.36},{note:392,dur:.18},{note:440,dur:.18},{note:523,dur:.18},{note:587,dur:.18},{note:659,dur:.36}],bass:[{note:220,dur:.72},{note:262,dur:.72},{note:196,dur:.72},{note:175,dur:.72}]},boss_battle:{name:"üëπ Boss Battle",category:"game",tempo:.12,melody:[{note:196,dur:.12},{note:233,dur:.12},{note:262,dur:.12},{note:311,dur:.24},{note:262,dur:.12},{note:233,dur:.12},{note:196,dur:.24},{note:175,dur:.12},{note:196,dur:.12},{note:233,dur:.12},{note:262,dur:.12},{note:311,dur:.24},{note:349,dur:.24}],bass:[{note:98,dur:.48},{note:117,dur:.48},{note:87,dur:.48},{note:110,dur:.48}]},victory_lap:{name:"üèÜ Victory Lap",category:"game",tempo:.2,melody:[{note:523,dur:.2},{note:659,dur:.2},{note:784,dur:.4},{note:880,dur:.2},{note:784,dur:.2},{note:659,dur:.4},{note:523,dur:.2},{note:587,dur:.2},{note:659,dur:.2},{note:784,dur:.2},{note:1047,dur:.6}],bass:[{note:262,dur:.8},{note:330,dur:.8},{note:262,dur:.8},{note:392,dur:.8}]},amazing_grace:{name:"üôè Amazing Grace (Classic)",category:"gospel",tempo:.5,melody:[{note:392,dur:.5},{note:523,dur:1},{note:494,dur:.25},{note:523,dur:.25},{note:494,dur:.5},{note:440,dur:.5},{note:392,dur:1},{note:330,dur:.5},{note:392,dur:1},{note:440,dur:.25},{note:392,dur:.25},{note:440,dur:.5},{note:523,dur:1.5}],bass:[{note:196,dur:2},{note:220,dur:2},{note:262,dur:2},{note:196,dur:2}]},how_great:{name:"‚úùÔ∏è How Great Thou Art",category:"gospel",tempo:.5,melody:[{note:392,dur:.5},{note:440,dur:.5},{note:523,dur:1},{note:494,dur:.5},{note:440,dur:.5},{note:392,dur:1},{note:440,dur:.5},{note:494,dur:.5},{note:523,dur:.5},{note:587,dur:.5},{note:523,dur:1.5}],bass:[{note:196,dur:2},{note:262,dur:2},{note:220,dur:2},{note:262,dur:2}]},mighty_fortress:{name:"üè∞ A Mighty Fortress",category:"gospel",tempo:.4,melody:[{note:523,dur:.4},{note:523,dur:.4},{note:523,dur:.4},{note:392,dur:.4},{note:440,dur:.4},{note:440,dur:.4},{note:392,dur:.8},{note:659,dur:.4},{note:587,dur:.4},{note:523,dur:.4},{note:494,dur:.4},{note:523,dur:1.2}],bass:[{note:262,dur:1.6},{note:220,dur:1.6},{note:196,dur:1.6},{note:262,dur:1.6}]},oceans_style:{name:"üåä Oceans Style (Hillsong)",category:"worship",tempo:.45,melody:[{note:330,dur:.45},{note:392,dur:.45},{note:440,dur:.9},{note:392,dur:.45},{note:330,dur:.45},{note:294,dur:.9},{note:330,dur:.45},{note:392,dur:.45},{note:440,dur:.45},{note:494,dur:.45},{note:440,dur:1.35}],bass:[{note:165,dur:1.8},{note:147,dur:1.8},{note:165,dur:1.8},{note:196,dur:1.8}]},way_maker_style:{name:"üî• Way Maker Style",category:"worship",tempo:.35,melody:[{note:392,dur:.35},{note:440,dur:.35},{note:523,dur:.7},{note:494,dur:.35},{note:440,dur:.35},{note:392,dur:.7},{note:440,dur:.35},{note:523,dur:.35},{note:587,dur:.7},{note:523,dur:1.05}],bass:[{note:196,dur:1.4},{note:220,dur:1.4},{note:262,dur:1.4},{note:196,dur:1.4}]},reckless_love_style:{name:"üíï Reckless Love Style",category:"worship",tempo:.4,melody:[{note:440,dur:.4},{note:494,dur:.4},{note:523,dur:.8},{note:587,dur:.4},{note:523,dur:.4},{note:494,dur:.8},{note:440,dur:.4},{note:392,dur:.4},{note:440,dur:.8},{note:392,dur:1.2}],bass:[{note:220,dur:1.6},{note:262,dur:1.6},{note:220,dur:1.6},{note:196,dur:1.6}]},goodness_of_god_style:{name:"üôå Goodness of God Style",category:"worship",tempo:.38,melody:[{note:392,dur:.38},{note:392,dur:.38},{note:440,dur:.76},{note:392,dur:.38},{note:330,dur:.38},{note:294,dur:.76},{note:330,dur:.38},{note:392,dur:.38},{note:440,dur:.38},{note:392,dur:.38},{note:330,dur:1.14}],bass:[{note:196,dur:1.52},{note:147,dur:1.52},{note:165,dur:1.52},{note:196,dur:1.52}]},graves_into_gardens_style:{name:"üå± Graves Into Gardens Style",category:"worship",tempo:.32,melody:[{note:330,dur:.32},{note:392,dur:.32},{note:440,dur:.64},{note:523,dur:.32},{note:494,dur:.32},{note:440,dur:.64},{note:392,dur:.32},{note:440,dur:.32},{note:494,dur:.64},{note:440,dur:.96}],bass:[{note:165,dur:1.28},{note:220,dur:1.28},{note:196,dur:1.28},{note:165,dur:1.28}]},country_roads_style:{name:"ü§† Country Roads Style",category:"country",tempo:.35,melody:[{note:392,dur:.35},{note:440,dur:.35},{note:494,dur:.7},{note:440,dur:.35},{note:392,dur:.35},{note:330,dur:.7},{note:294,dur:.35},{note:330,dur:.35},{note:392,dur:.7},{note:330,dur:1.05}],bass:[{note:196,dur:1.4},{note:165,dur:1.4},{note:147,dur:1.4},{note:165,dur:1.4}]},god_bless_usa_style:{name:"üá∫üá∏ God Bless USA Style",category:"country",tempo:.4,melody:[{note:392,dur:.4},{note:392,dur:.2},{note:440,dur:.2},{note:494,dur:.8},{note:523,dur:.4},{note:494,dur:.4},{note:440,dur:.8},{note:392,dur:.4},{note:440,dur:.4},{note:494,dur:.4},{note:523,dur:.4},{note:587,dur:1.2}],bass:[{note:196,dur:1.6},{note:262,dur:1.6},{note:196,dur:1.6},{note:294,dur:1.6}]},amazing_grace_country:{name:"üé∏ Amazing Grace (Country)",category:"country",tempo:.42,melody:[{note:294,dur:.42},{note:392,dur:.84},{note:370,dur:.21},{note:392,dur:.21},{note:370,dur:.42},{note:330,dur:.42},{note:294,dur:.84},{note:262,dur:.42},{note:294,dur:.84},{note:330,dur:.21},{note:294,dur:.21},{note:330,dur:.42},{note:392,dur:1.26}],bass:[{note:147,dur:1.68},{note:165,dur:1.68},{note:196,dur:1.68},{note:147,dur:1.68}]},simple_man_style:{name:"üë® Simple Man Style",category:"country",tempo:.45,melody:[{note:330,dur:.45},{note:330,dur:.45},{note:392,dur:.45},{note:330,dur:.45},{note:294,dur:.9},{note:262,dur:.9},{note:294,dur:.45},{note:330,dur:.45},{note:392,dur:.9},{note:330,dur:1.35}],bass:[{note:165,dur:1.8},{note:131,dur:1.8},{note:147,dur:1.8},{note:165,dur:1.8}]},patriotic:{name:"üá∫üá∏ Patriotic March",category:"patriotic",tempo:.3,melody:[{note:392,dur:.3},{note:392,dur:.15},{note:392,dur:.15},{note:523,dur:.6},{note:440,dur:.3},{note:392,dur:.3},{note:330,dur:.6},{note:392,dur:.3},{note:440,dur:.3},{note:494,dur:.3},{note:523,dur:.6}],bass:[{note:196,dur:1.2},{note:262,dur:1.2},{note:196,dur:1.2}]}},this.trackSequences={game:["adventure","action","peaceful","intense"],gospel:["amazing_grace","how_great","blessed_assurance","victory_jesus","mighty_fortress"],mixed:["adventure","amazing_grace","action","blessed_assurance","peaceful","victory_jesus"]}}startBackgroundMusic(){this.musicEnabled&&!this.musicPlaying&&"none"!==this.musicChoice&&(this.tryPlayMP3Music()||this.audioCtx&&(this.initMusicSystem(),this.musicPlaying=!0,this.musicGain=this.audioCtx.createGain(),this.musicGain.gain.value=.3*this.musicVolume,this.musicGain.connect(this.masterVolume),this.playCurrentTrack()))}tryPlayMP3Music(){let e=null;if(1===this.currentLevel?e="music_level1":(2===this.currentLevel||this.isChristmasMode)&&(e="music_level2"),e&&this.sound&&this.cache.audio.exists(e))try{return this.currentMP3Music&&(this.currentMP3Music.stop(),this.currentMP3Music.destroy()),this.currentMP3Music=this.sound.add(e,{volume:.5*this.musicVolume,loop:!0}),this.currentMP3Music.play(),this.musicPlaying=!0,console.log("üéµ Playing MP3 music:",e,"for level",this.currentLevel),!0}catch(e){console.warn("MP3 music failed, falling back to synthesized:",e)}return!1}stopMP3Music(){this.currentMP3Music&&(this.currentMP3Music.stop(),this.currentMP3Music.destroy(),this.currentMP3Music=null)}playCurrentTrack(){if(!this.musicPlaying||!this.audioCtx)return;const e=this.musicTracks[this.musicChoice];e&&this.playMusicLoop(e.melody,e.bass,e.tempo)}nextTrack(){if(!this.musicSequenceEnabled)return;const e=this.musicTracks[this.musicChoice]?.category||"game",t=this.trackSequences[e]||this.trackSequences.game;this.currentTrackIndex=(this.currentTrackIndex+1)%t.length,this.musicChoice=t[this.currentTrackIndex];const a=this.musicTracks[this.musicChoice];a&&this.showNotification(`üéµ Now Playing: ${a.name}`)}setMusicTrack(e){this.musicChoice=e,localStorage.setItem("birdturds_musicChoice",e),this.stopBackgroundMusic(),"none"!==e&&setTimeout(()=>this.startBackgroundMusic(),100)}playMusicLoop(e,t,a=.25){if(!this.musicPlaying||!this.audioCtx)return;const i=this.audioCtx.currentTime;let s=i,o=i,n=0;e.forEach(e=>{const t=this.audioCtx.createOscillator(),a=this.audioCtx.createGain();t.type="triangle",t.frequency.value=e.note,a.gain.setValueAtTime(.12,s),a.gain.setValueAtTime(.08,s+.8*e.dur),a.gain.setValueAtTime(0,s+e.dur),t.connect(a),a.connect(this.musicGain),t.start(s),t.stop(s+e.dur),s+=e.dur,n=Math.max(n,s-i)}),t.forEach(e=>{const t=this.audioCtx.createOscillator(),a=this.audioCtx.createGain();t.type="sine",t.frequency.value=e.note,a.gain.setValueAtTime(.08,o),a.gain.setValueAtTime(.05,o+.9*e.dur),a.gain.setValueAtTime(0,o+e.dur),t.connect(a),a.connect(this.musicGain),t.start(o),t.stop(o+e.dur),o+=e.dur}),this.loopCount=(this.loopCount||0)+1,this.musicSequenceEnabled&&this.loopCount>=4?(this.loopCount=0,this.musicTimeout=setTimeout(()=>{this.nextTrack(),this.playCurrentTrack()},1e3*n)):this.musicTimeout=setTimeout(()=>this.playCurrentTrack(),1e3*n)}stopBackgroundMusic(){this.musicPlaying=!1,this.musicTimeout&&clearTimeout(this.musicTimeout),this.stopMP3Music()}toggleSound(){this.soundEnabled=!this.soundEnabled,localStorage.setItem("birdturds_sound",this.soundEnabled),this.showNotification(this.soundEnabled?"üîä Sound ON":"üîá Sound OFF")}toggleMusic(){this.musicEnabled=!this.musicEnabled,localStorage.setItem("birdturds_music",this.musicEnabled),this.musicEnabled?(this.startBackgroundMusic(),this.showNotification("üéµ Music ON")):(this.stopBackgroundMusic(),this.showNotification("üéµ Music OFF"))}createBackground(){this.sky=this.add.rectangle(640,320,1280,640,8900331),this.sky.setDepth(-20),this.sky.setScrollFactor(0),this.currentSkyColor=8900331,this.ambientOverlay=this.add.rectangle(640,320,1280,640,16777215),this.ambientOverlay.setDepth(100),this.ambientOverlay.setScrollFactor(0),this.ambientOverlay.setAlpha(0),this.ambientOverlay.setBlendMode(Phaser.BlendModes.MULTIPLY),this.transitionOverlay=this.add.rectangle(640,320,1280,640,0),this.transitionOverlay.setDepth(99),this.transitionOverlay.setScrollFactor(0),this.transitionOverlay.setAlpha(0),this.sceneBanner=this.add.text(640,80,"",{fontSize:"32px",fontStyle:"bold",color:"#ffffff",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,fill:!0}}).setOrigin(.5).setScrollFactor(0).setDepth(150).setAlpha(0),this.sceneSubtitle=this.add.text(640,120,"",{fontSize:"18px",fontStyle:"italic",color:"#fcd34d",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setScrollFactor(0).setDepth(150).setAlpha(0);const e=sceneSequence[0];this.groundBase=this.add.rectangle(640,610,1280,150,e.groundColor||4881443),this.groundBase.setDepth(-6),this.groundBase.setScrollFactor(0),this.groundHighlight=this.add.rectangle(640,550,1280,20,e.groundColorLight||7052090),this.groundHighlight.setDepth(-5),this.groundHighlight.setScrollFactor(0),this.groundHighlight.setAlpha(.5),this.bgPanels=this.add.group(),this.panelWidth=1344;const t=sceneSequence.length;for(let e=0;e<t;e++){const t=sceneSequence[e];if(this.textures.exists(t.key)){const a=this.textures.get(t.key).getSourceImage(),i=a.width||1344,s=(a.height||580)*(this.panelWidth/i),o=this.add.image(e*this.panelWidth,this.groundY+60,t.key).setOrigin(0,1).setDisplaySize(this.panelWidth,s).setDepth(-10).setScrollFactor(1);o.sceneData=t,o.sceneIndex=e,this.bgPanels.add(o)}}this.groundTiles=[];const a=512,i=t*this.panelWidth,s=Math.ceil(i/a)+5;for(let e=0;e<s;e++){const i=e*a,s=Math.min(Math.floor(i/this.panelWidth),t-1),o=sceneSequence[s],n=this.add.rectangle(e*a+256,590,a,100,o.groundColor||4881443).setOrigin(.5,.5).setDepth(-5);n.sceneIndex=s,this.groundTiles.push(n)}this.lastSceneKey=sceneSequence[0].key,this.lastSceneIndex=0}updateGroundForScene(e){if(e){if(this.groundBase){this.tweens.add({targets:this.groundBase,fillColor:{from:this.groundBase.fillColor,to:e.groundColor||4881443},duration:500,ease:"Linear"});this.groundBase.fillColor;const t=e.groundColor||4881443;this.groundBase.setFillStyle(t)}this.groundHighlight&&this.groundHighlight.setFillStyle(e.groundColorLight||7052090)}}createChristmasSnow(){this.isChristmasMode&&(this.snowflakes=this.add.group(),this.time.addEvent({delay:150,callback:()=>this.spawnSnowflake(),loop:!0}),this.time.delayedCall(2e3,()=>{this.showNotification("üéÑ Merry Christmas! Jesus is the reason for the season!",2278750)}),this.time.addEvent({delay:3e4,callback:()=>{if(this.isChristmasMode&&!this.gameOver){const e=CHRISTMAS_SCRIPTURES[Math.floor(Math.random()*CHRISTMAS_SCRIPTURES.length)];this.showScripturePopup(e)}},loop:!0}),this.time.addEvent({delay:45e3,callback:()=>{if(this.isChristmasMode&&!this.gameOver){const e=CHRISTMAS_MESSAGES[Math.floor(Math.random()*CHRISTMAS_MESSAGES.length)];this.showNotification(e,16766720)}},loop:!0}))}spawnSnowflake(){if(!this.isChristmasMode||this.gameOver)return;if(!this.currentScene||!this.currentScene.isChristmas)return;if(this.snowflakes&&this.snowflakes.getLength()>80)return;const e=this.cameras.main.scrollX+1280*Math.random(),t=Phaser.Math.Between(3,8),a=this.add.circle(e,-10,t,16777215,.8);a.setDepth(200),this.snowflakes.add(a);const i=Phaser.Math.Between(4e3,7e3),s=Phaser.Math.Between(-80,80);this.tweens.add({targets:a,y:660,x:e+s,alpha:.3,duration:i,ease:"Linear",onComplete:()=>{a.destroy()}})}createHunter(){const e=sceneSequence[0];this.ground=this.add.rectangle(1e4,this.groundY+30,2e4,60,e.groundColor||4881443),this.ground.setDepth(-4),this.physics.add.existing(this.ground,!0);const t=this.selectedCharacter,a=`${t}_idle`;if(console.log("Creating animated hunter with character:",t),this.hunterShadow=this.add.ellipse(300,this.groundY+5,60,20,0,.3).setOrigin(.5).setDepth(9),this.hunter=this.physics.add.sprite(300,this.groundY-10,`${t}_idle`).setOrigin(.5,1).setScale(.24).setDepth(10),this.anims.exists(a)&&this.hunter.play(a),this.currentAnim="idle",this.applyHunterSkin(),window.multiplayerClient&&window.multiplayerClient.isConnected){const e=window.multiplayerClient.localPlayerName||"You",t=this.getPlayerInitials(e);this.hunterNameLabel=this.add.text(300,this.groundY-110,t,{fontSize:"14px",fontStyle:"bold",color:"#ffffff",backgroundColor:"#22c55edd",padding:{x:6,y:3},stroke:"#000000",strokeThickness:2}).setOrigin(.5).setDepth(15)}this.hunter.body&&(this.hunter.body.setSize(.5*this.hunter.width,.9*this.hunter.height),this.hunter.body.setOffset(.25*this.hunter.width,.1*this.hunter.height),this.hunter.body.setAllowRotation(!1),this.hunter.body.setCollideWorldBounds(!0),this.hunter.body.setGravityY(800)),this.physics.add.collider(this.hunter,this.ground),this.cameras.main.setBounds(0,0,2e4,640),this.cameras.main.startFollow(this.hunter,!0,.1,.1),this.physics.add.overlap(this.bullets,this.birds,this.onBulletHitsBird,null,this),this.physics.add.overlap(this.bullets,this.animals,this.onBulletHitsAnimal,null,this),this.physics.add.overlap(this.bullets,this.turds,this.onBulletHitsTurd,null,this),this.physics.add.overlap(this.bullets,this.parachuters,this.onBulletHitsParachuter,null,this),this.physics.add.overlap(this.bullets,this.vehicles,this.onBulletHitsVehicle,null,this),this.physics.add.overlap(this.bullets,this.planes,this.onBulletHitsPlane,null,this),this.physics.add.overlap(this.turds,this.hunter,this.onTurdHitsHunter,null,this),this.physics.add.overlap(this.birds,this.hunter,this.onBirdHitsHunter,null,this),this.physics.add.overlap(this.vehicles,this.groundTurds,(e,t)=>{t&&t.active&&t.destroy()}),this.physics.add.overlap(this.hunter,this.items,this.onCollectItem,null,this),this.physics.add.overlap(this.hunter,this.coins,this.onCollectCoin,null,this)}getWeaponSpriteKey(){const e=JSON.parse(localStorage.getItem("birdturds_owned")||"[]"),t=[{id:"bazooka",sprite:"rocketlauncher"},{id:"rocketlauncher",sprite:"rocketlauncher"},{id:"minigun",sprite:"machinegun"},{id:"minigun_mounted",sprite:"machinegun"},{id:"machinegun",sprite:"machinegun"},{id:"barrett",sprite:"sniper"},{id:"sniper",sprite:"sniper"},{id:"auto_shotgun",sprite:"shotgun"},{id:"pump_action",sprite:"shotgun"},{id:"shotgun_12",sprite:"shotgun"},{id:"shotgun_20",sprite:"shotgun"},{id:"shotgun_410",sprite:"shotgun"},{id:"deagle",sprite:"rifle"},{id:"revolver",sprite:"rifle"},{id:"handgun",sprite:"rifle"}];for(const a of t)if(e.includes(a.id))return btState.currentWeapon=a.id,a.sprite;return btState.currentWeapon="rifle","rifle"}createWeaponSprite(){const e=this.getWeaponSpriteKey();if(this.weaponOffsetX=30,this.weaponHeightFactor=.4,this.textures.exists(e)||(console.log("üî´ Weapon texture not found, creating fallback:",e),this.createFallbackWeaponTexture(e)),this.textures.exists(e)&&this.hunter){const t=this.hunter.flipX?-1:1,a=this.hunter.y-this.hunter.displayHeight*this.weaponHeightFactor;this.hunterWeapon=this.add.image(this.hunter.x+this.weaponOffsetX*t,a,e).setOrigin(.3,.5).setScale(.13).setDepth(this.hunter.depth+1).setAngle(-12).setVisible(!1),this.time.delayedCall(100,()=>{this.hunterWeapon&&this.hunter&&this.hunter.displayHeight>10&&this.hunterWeapon.setVisible(!0)}),console.log("üî´ Weapon sprite created:",e,"displayHeight:",this.hunter.displayHeight)}else console.warn("üî´ Could not create weapon sprite - no texture or hunter")}createFallbackWeaponTexture(e){const t=this.make.graphics({x:0,y:0,add:!1});e.includes("rocket")||e.includes("bazooka")?(t.fillStyle(5596757),t.fillRect(0,20,120,25),t.fillStyle(3355443),t.fillRect(110,15,30,35)):e.includes("machine")||e.includes("minigun")?(t.fillStyle(4473924),t.fillRect(0,20,100,20),t.fillRect(80,15,40,30)):e.includes("sniper")||e.includes("barrett")?(t.fillStyle(3815994),t.fillRect(0,22,130,16),t.fillStyle(5921370),t.fillRect(100,18,30,24)):e.includes("shotgun")?(t.fillStyle(7029795),t.fillRect(0,18,90,24),t.fillStyle(3355443),t.fillRect(70,15,30,30)):(t.fillStyle(5917242),t.fillRect(0,20,80,18),t.fillStyle(3815994),t.fillRect(60,16,30,26)),t.generateTexture(e,150,60),t.destroy()}updateWeaponSprite(){if(!this.hunterWeapon||!this.hunter)return;if(this.hunter.displayHeight<10)return void this.hunterWeapon.setVisible(!1);this.hunterWeapon.visible||this.hunterWeapon.setVisible(!0);const e=this.hunter.flipX?-1:1,t=this.hunter.y-this.hunter.displayHeight*this.weaponHeightFactor;this.hunterWeapon.x=this.hunter.x+this.weaponOffsetX*e,this.hunterWeapon.y=t,this.hunterWeapon.flipX=this.hunter.flipX,void 0!==this.aimAngle?this.hunterWeapon.setAngle(this.aimAngle*e):this.hunterWeapon.setAngle(-12*e),this.hunterWeapon.setDepth(this.hunter.depth+1)}switchWeapon(e){btState.currentWeapon=e;btState.currentWeapon=e,this.playSound("reload"),this.showNotification(`üî´ Equipped: ${e.toUpperCase()}`,2278750),console.log("üî´ Weapon switched to:",e,"(sprite disabled)")}activateJetpack(e=30){this.jetpackActive||(btState.jetpackActive=!0,btState.jetpackFuel=e,btState.jetpackMaxFuel=e,this.jetpackActive=!0,this.createJetpackGraphics(),this.playSound("powerup"),this.hunter&&this.hunter.body&&(this.hunter.body.setGravityY(0),this.hunter.body.setAllowGravity(!1)),this.jetpackTimer=this.time.addEvent({delay:1e3,callback:()=>{btState.jetpackFuel--,this.updateJetpackFuelBar(),10===btState.jetpackFuel&&this.showNotification("‚ö†Ô∏è JETPACK: 10 seconds remaining!",16096779),5===btState.jetpackFuel&&this.showNotification("üö® JETPACK ALMOST EMPTY!",15680580),btState.jetpackFuel<=0&&this.deactivateJetpack()},repeat:e-1}),console.log("üöÄ Jetpack activated for",e,"seconds!"))}createJetpackGraphics(){this.hunter&&(this.jetpackBody=this.add.graphics(),this.jetpackBody.setDepth(9),this.drawJetpackBody(),this.jetpackFlames=[],this.leftFlame=this.add.graphics(),this.leftFlame.setDepth(8),this.jetpackFlames.push(this.leftFlame),this.rightFlame=this.add.graphics(),this.rightFlame.setDepth(8),this.jetpackFlames.push(this.rightFlame),this.createJetpackFuelBar(),this.flameAnimTimer=0)}drawJetpackBody(){if(!this.jetpackBody||!this.hunter)return;const e=this.jetpackBody;e.clear();const t=this.hunter.x,a=this.hunter.y-50,i=this.hunter.flipX?1:-1;e.fillStyle(16729344,1),e.fillRoundedRect(t+15*i,a-20,25,45,8),e.fillStyle(16739072,1),e.fillRoundedRect(t+17*i,a-18,10,40,5),e.lineStyle(2,9109504),e.strokeRoundedRect(t+15*i,a-20,25,45,8),e.fillStyle(16766720,1),e.fillRoundedRect(t+20*i,a-25,15,10,4),e.fillStyle(3355443,1),e.fillRoundedRect(t+12*i,a+20,12,15,3),e.fillRoundedRect(t+28*i,a+20,12,15,3),e.lineStyle(2,12632256),e.strokeRoundedRect(t+12*i,a+18,12,5,2),e.strokeRoundedRect(t+28*i,a+18,12,5,2),e.lineStyle(3,4868682),e.lineBetween(t+15*i,a-10,t+5*i,a-20),e.lineBetween(t+15*i,a+10,t+5*i,a+5);const s=btState.jetpackFuel/btState.jetpackMaxFuel;e.fillStyle(65280,.8),e.fillRect(t+35*i,a-15,5,30*s),e.lineStyle(1,0),e.strokeRect(t+35*i,a-15,5,30)}drawJetpackFlames(){if(!this.jetpackFlames||!this.hunter||!btState.jetpackActive)return;const e=this.hunter.x,t=this.hunter.y-50,a=this.hunter.flipX?1:-1;this.flameAnimTimer=(this.flameAnimTimer||0)+.3;const i=5*Math.sin(10*this.flameAnimTimer),s=4*Math.cos(8*this.flameAnimTimer);this.leftFlame&&(this.leftFlame.clear(),this.leftFlame.fillStyle(16739072,.9),this.leftFlame.fillTriangle(e+12*a,t+35,e+24*a,t+35,e+18*a,t+70+i),this.leftFlame.fillStyle(16776960,.95),this.leftFlame.fillTriangle(e+14*a,t+35,e+22*a,t+35,e+18*a,t+60+s),this.leftFlame.fillStyle(16777215,1),this.leftFlame.fillTriangle(e+16*a,t+35,e+20*a,t+35,e+18*a,t+50+i)),this.rightFlame&&(this.rightFlame.clear(),this.rightFlame.fillStyle(16739072,.9),this.rightFlame.fillTriangle(e+28*a,t+35,e+40*a,t+35,e+34*a,t+70+s),this.rightFlame.fillStyle(16776960,.95),this.rightFlame.fillTriangle(e+30*a,t+35,e+38*a,t+35,e+34*a,t+60+i),this.rightFlame.fillStyle(16777215,1),this.rightFlame.fillTriangle(e+32*a,t+35,e+36*a,t+35,e+34*a,t+50+s)),Math.random()<.3&&(this.spawnFlameParticle(e+18*a,t+60),this.spawnFlameParticle(e+34*a,t+60))}spawnFlameParticle(e,t){const a=[16739072,16776960,16711680,16729344],i=a[Math.floor(Math.random()*a.length)],s=this.add.circle(e+Phaser.Math.Between(-5,5),t,Phaser.Math.Between(2,6),i,.8).setDepth(7);this.tweens.add({targets:s,y:t+Phaser.Math.Between(20,40),alpha:0,scale:.3,duration:Phaser.Math.Between(200,400),onComplete:()=>s.destroy()})}createJetpackFuelBar(){this.jetpackFuelBg=this.add.rectangle(640,80,200,20,3355443,.8).setScrollFactor(0).setDepth(100),this.jetpackFuelFill=this.add.rectangle(545,80,190,14,16739072,1).setScrollFactor(0).setDepth(101).setOrigin(0,.5),this.jetpackFuelLabel=this.add.text(640,80,"üöÄ JETPACK FUEL",{fontSize:"12px",fontStyle:"bold",color:"#ffffff",stroke:"#000000",strokeThickness:2}).setScrollFactor(0).setDepth(102).setOrigin(.5),this.jetpackFuelTimer=this.add.text(750,80,btState.jetpackFuel+"s",{fontSize:"14px",fontStyle:"bold",color:"#ffff00",stroke:"#000000",strokeThickness:2}).setScrollFactor(0).setDepth(102).setOrigin(0,.5)}updateJetpackFuelBar(){if(!this.jetpackFuelFill||!btState.jetpackActive)return;const e=btState.jetpackFuel/btState.jetpackMaxFuel;this.jetpackFuelFill.setScale(e,1),e>.5?this.jetpackFuelFill.setFillStyle(65280):e>.25?this.jetpackFuelFill.setFillStyle(16776960):this.jetpackFuelFill.setFillStyle(16711680),this.jetpackFuelTimer&&this.jetpackFuelTimer.setText(btState.jetpackFuel+"s")}updateJetpack(e){if(!btState.jetpackActive||!this.hunter)return;this.drawJetpackBody(),this.drawJetpackFlames();const t=350;let a=0,i=0;if(this.keys.LEFT.isDown||this.keys.A?.isDown?(a=-350,this.hunter.flipX=!0):(this.keys.RIGHT.isDown||this.keys.D?.isDown)&&(a=t,this.hunter.flipX=!1),this.keys.UP.isDown||this.keys.W?.isDown?i=-350:(this.keys.DOWN.isDown||this.keys.S?.isDown)&&(i=t),this.hunter.body){this.hunter.body.setVelocity(a,i);const e=50,t=this.groundY-20;this.hunter.y<e&&(this.hunter.y=e,this.hunter.body.setVelocityY(0)),this.hunter.y>t&&(this.hunter.y=t,this.hunter.body.setVelocityY(0))}if(Math.random()<.02&&this.playSound("helicopter"),this.hunterShadow){this.hunterShadow.x=this.hunter.x,this.hunterShadow.y=this.groundY+5;const e=1-(this.groundY-this.hunter.y)/(this.groundY-50)*.6;this.hunterShadow.setScale(Math.max(.3,e)),this.hunterShadow.setAlpha(Math.max(.1,.3*e))}}deactivateJetpack(){btState.jetpackActive=!1,btState.jetpackFuel=0,this.jetpackActive=!1,this.jetpackTimer&&this.jetpackTimer.remove(),this.hunter&&this.hunter.body&&(this.hunter.body.setAllowGravity(!0),this.hunter.body.setGravityY(800)),this.jetpackBody&&(this.jetpackBody.destroy(),this.jetpackBody=null),this.leftFlame&&(this.leftFlame.destroy(),this.leftFlame=null),this.rightFlame&&(this.rightFlame.destroy(),this.rightFlame=null),this.jetpackFuelBg&&this.jetpackFuelBg.destroy(),this.jetpackFuelFill&&this.jetpackFuelFill.destroy(),this.jetpackFuelLabel&&this.jetpackFuelLabel.destroy(),this.jetpackFuelTimer&&this.jetpackFuelTimer.destroy(),this.hunterShadow&&(this.hunterShadow.setScale(1),this.hunterShadow.setAlpha(.3)),this.showNotification("üöÄ Jetpack fuel depleted!",6710886),this.playSound("reload"),console.log("üöÄ Jetpack deactivated")}getPlayerInitials(e){if(!e)return"?";const t=e.trim().split(/\s+/);return 1===t.length?e.substring(0,3).toUpperCase():t.slice(0,3).map(e=>e[0]).join("").toUpperCase()}playHunterAnim(e){if(!this.hunter||this.currentAnim===e)return;const t=`${this.selectedCharacter}_${e}`;this.anims.exists(t)&&(this.hunter.play(t),this.currentAnim=e)}applyHunterSkin(){if(!this.hunter)return;const e={default:16777215,skin_default:16777215,skin_camo:5597999,skin_winter:14741759,skin_desert:14596231,skin_tactical:3092271,skin_armor_light:11584734,skin_armor_heavy:7372944,skin_hazmat:16776960,skin_gold:16766720,skin_legendary:16739179,camo:5597999,desert:14596231,arctic:14745599,ninja:3092271,gold:16766720,neon:65416,fire:16729344,ice:8900331,shadow:4849792},t=btState.currentSkin||"default",a=e[t]||e["skin_"+t]||16777215;this.hunter.setTint(a),"skin_legendary"!==t&&"legendary"!==t||this.legendaryGlow||(this.legendaryGlow=this.tweens.add({targets:this.hunter,alpha:{from:1,to:.8},duration:500,yoyo:!0,repeat:-1})),this.applyArmorOverlay()}applyArmorOverlay(){if(!this.hunterArmor)return;const e=btState.upgrades.armor||0;e>=.3?(this.hunterArmor.setAlpha(.3),this.hunterArmor.setTint(16766720),this.hunterArmor.setBlendMode(Phaser.BlendModes.ADD)):e>=.2?(this.hunterArmor.setAlpha(.25),this.hunterArmor.setTint(12632256),this.hunterArmor.setBlendMode(Phaser.BlendModes.ADD)):e>=.1?(this.hunterArmor.setAlpha(.2),this.hunterArmor.setTint(13467442),this.hunterArmor.setBlendMode(Phaser.BlendModes.ADD)):this.hunterArmor.setAlpha(0)}onBirdHitsHunter(e,t){if(e&&t&&e.active&&!this.gameOver&&!btState.invincible&&e.body&&e.body.allowGravity){const a=(1-btState.upgrades.armor)*(1-btState.armorReduction),i=Math.round(10*a);btState.health=Math.max(0,btState.health-i),this.showPointIndicator(t.x,t.y-50,"-10 HP BIRD HIT!",15680580),this.cameras.main.shake(100,.005),e.destroy(),btState.health<=0&&this.triggerDeathAnimation("bird"),this.updateHud()}}onBulletHitsPlane(e,t){if(!(e&&t&&e.active&&t.active))return;e.destroy();btState.score+=-200,this.showPointIndicator(t.x,t.y,"-200 DON'T SHOOT AIRCRAFT!",15680580),this.showNotification("‚úàÔ∏è YOU SHOT DOWN A PLANE! HUGE PENALTY!"),this.cameras.main.shake(500,.02),t.body.setAllowGravity(!0),t.body.setGravityY(400),t.body.setVelocity(50*t.direction,100),t.isCrashing=!0,this.tweens.add({targets:t,rotation:t.direction>0?2:-2,duration:1500,onComplete:()=>{t&&t.active&&(this.createExplosion(t.x,this.groundY-20),t.destroy())}})}createExplosion(e,t){const a=this.add.circle(e,t,80,16737792,.8).setDepth(100);this.tweens.add({targets:a,scale:2,alpha:0,duration:300,onComplete:()=>a.destroy()});for(let a=0;a<12;a++){const i=this.add.rectangle(e,t,10,10,3355443).setDepth(99),s=a/12*Math.PI*2;this.tweens.add({targets:i,x:e+120*Math.cos(s),y:t+80*Math.sin(s)-50,alpha:0,rotation:6*Math.random(),duration:600,onComplete:()=>i.destroy()})}if(Math.hypot(this.hunter.x-e,this.hunter.y-t)<150&&!btState.invincible){const e=(1-btState.upgrades.armor)*(1-btState.armorReduction),t=Math.round(30*e);btState.health=Math.max(0,btState.health-t),this.showPointIndicator(this.hunter.x,this.hunter.y-50,`-${t} HP EXPLOSION!`,15680580),btState.health<=0&&this.triggerDeathAnimation("explosion"),this.updateHud()}}onBulletHitsParachuter(e,t){if(!(e&&t&&e.active&&t.active))return;e.destroy();btState.score+=-25,this.showPointIndicator(t.x,t.y,"-25 DON'T SHOOT ALLIES!",15680580),this.showNotification("üò° FRIENDLY FIRE! -25 pts!"),this.tweens.add({targets:t,alpha:.3,yoyo:!0,duration:100,repeat:3})}onBulletHitsVehicle(e,t){if(!(e&&t&&e.active&&t.active))return;const a=this.cameras.main.worldView;if(t.x<a.x-100||t.x>a.right+100)return;if(t.isHelper){e.destroy();const a=-25;return btState.score=Math.max(0,btState.score+a),this.showPointIndicator(t.x,t.y-30,`${a} DON'T SHOOT HELPERS!`,15680580),void this.showNotification("‚ùå That vehicle is helping you!",15680580)}t.tireHits=(t.tireHits||0)+1,e.destroy();const i=t.texture&&"tractor_green"===t.texture.key||"tractor_red"===t.texture.key;this.showPointIndicator(t.x,t.y-30,"üõû HIT!",16436245);for(let e=0;e<3;e++){const e=this.add.circle(t.x+Phaser.Math.Between(-20,20),t.y-10,3,16776960).setDepth(20);this.tweens.add({targets:e,x:e.x+Phaser.Math.Between(-30,30),y:e.y-Phaser.Math.Between(10,40),alpha:0,duration:200,onComplete:()=>e.destroy()})}if(t.tireHits>=3){t.speed=0;const e=15;btState.score+=e;const a=tireShotMessages[Math.floor(Math.random()*tireShotMessages.length)];this.showNotification(a),this.showPointIndicator(t.x,t.y-50,`+${e} FLAT TIRE!`,2278750);const s=this.add.text(t.x,t.y-20,"üí®üí•üõû",{fontSize:"24px"}).setOrigin(.5).setDepth(25);this.tweens.add({targets:s,y:s.y-50,alpha:0,scale:1.5,duration:800,onComplete:()=>s.destroy()}),this.tweens.add({targets:t,rotation:i?.1:.05,duration:300}),this.time.delayedCall(3e3,()=>{t&&t.active&&this.tweens.add({targets:t,alpha:0,duration:1e3,onComplete:()=>{t&&t.destroy()}})})}else{const e=3-t.tireHits;this.showNotification(`üõû ${e} more hit${e>1?"s":""} to blow tire!`)}}onBulletHitsTurd(e,t){if(!(e&&t&&e.active&&t.active))return;e.destroy();btState.score+=3;const a=["TURD SHOT! üí©üéØ","SPLATTERED! üí•üí©","NO TURD FOR YOU! üö´üí©","TURD TERMINATED! üéØüí©","TURD-B-GONE! ‚ú®","BULLSEYE! üéØüí©","NICE SHOT! üí©","TURD DEFLECTED! üõ°Ô∏è","TURD DOWN! üí©"],i=a[Math.floor(Math.random()*a.length)];this.showPointIndicator(t.x,t.y,`+3 ${i}`,13751771);for(let e=0;e<8;e++){const a=this.add.circle(t.x,t.y,3,13751771).setDepth(15),i=e/8*Math.PI*2;this.tweens.add({targets:a,x:t.x+50*Math.cos(i),y:t.y+50*Math.sin(i),alpha:0,scale:.3,duration:350,onComplete:()=>a.destroy()})}t.destroy()}onBulletHitsAnimal(e,t){if(!(e&&t&&e.active&&t.active))return;const a=this.cameras.main.worldView;if(t.x<a.x-100||t.x>a.right+100)return;e.destroy();const i=t.animalType||"animal",s=groundAnimals[i],o=s&&s.dangerous,n=s&&s.isFarmAnimal;if(this.playSound(i),o){const e=s.points||25,a=s.coins||5;btState.score+=e,btState.animalKills++;const o=animalMessages[i]||[`${i.toUpperCase()}!`],n=o[Math.floor(Math.random()*o.length)];this.showPointIndicator(t.x,t.y,`+${e} ${n}`,2278750),this.spawnCoinDrop(t.x,t.y,a),this.tweens.add({targets:t,y:t.y-30,alpha:0,rotation:2*Math.random()-1,scaleX:.05,scaleY:.05,duration:400,onComplete:()=>t.destroy()});for(let e=0;e<6;e++){const a=this.add.circle(t.x,t.y,4,16711680).setDepth(15),i=e/6*Math.PI*2;this.tweens.add({targets:a,x:t.x+40*Math.cos(i),y:t.y+40*Math.sin(i),alpha:0,duration:300,onComplete:()=>a.destroy()})}}else if(n){const e=s.penalty||-50,a=s.message||`Don't shoot farm animals! ${e} pts!`;btState.score+=e,this.showPointIndicator(t.x,t.y-20,`${e}`,15680580),this.showNotification(a,15680580),this.cameras.main.shake(300,.02),this.cameras.main.flash(200,255,0,0,!0);const i=t.direction||(Math.random()<.5?1:-1);this.tweens.add({targets:t,x:t.x+400*i,alpha:0,duration:800,ease:"Quad.easeIn",onComplete:()=>{t.shadow&&t.shadow.destroy(),t.destroy()}});const o=['"A righteous man cares for the needs of his animal." ‚Äî Proverbs 12:10','"The Lord is good to all; he has compassion on all he has made." ‚Äî Psalm 145:9','"Are not two sparrows sold for a penny? Yet not one falls apart from your Father." ‚Äî Matthew 10:29','"Whoever is righteous has regard for the life of his beast." ‚Äî Proverbs 12:10'];setTimeout(()=>{this.showScripture(o[Math.floor(Math.random()*o.length)])},500)}else{const e=s.penalty||-20;btState.score+=e;const a=animalMessages[i]||[`${i.toUpperCase()}!`];a[Math.floor(Math.random()*a.length)];this.showPointIndicator(t.x,t.y,`${e} DON'T SHOOT ${i.toUpperCase()}!`,15680580),this.showNotification(`‚ùå ${i.toUpperCase()} is harmless! ${e} pts!`),this.cameras.main.shake(200,.01),this.tweens.add({targets:t,y:t.y-30,alpha:0,rotation:2*Math.random()-1,scaleX:.05,scaleY:.05,duration:400,onComplete:()=>t.destroy()});for(let e=0;e<6;e++){const a=this.add.circle(t.x,t.y,4,16711680).setDepth(15),i=e/6*Math.PI*2;this.tweens.add({targets:a,x:t.x+40*Math.cos(i),y:t.y+40*Math.sin(i),alpha:0,duration:300,onComplete:()=>a.destroy()})}}}createInput(){this.cursors=this.input.keyboard.createCursorKeys(),this.keys=this.input.keyboard.addKeys({W:Phaser.Input.Keyboard.KeyCodes.W,A:Phaser.Input.Keyboard.KeyCodes.A,S:Phaser.Input.Keyboard.KeyCodes.S,D:Phaser.Input.Keyboard.KeyCodes.D,Z:Phaser.Input.Keyboard.KeyCodes.Z,B:Phaser.Input.Keyboard.KeyCodes.B,E:Phaser.Input.Keyboard.KeyCodes.E,P:Phaser.Input.Keyboard.KeyCodes.P,SPACE:Phaser.Input.Keyboard.KeyCodes.SPACE,SHIFT:Phaser.Input.Keyboard.KeyCodes.SHIFT,C:Phaser.Input.Keyboard.KeyCodes.C,F:Phaser.Input.Keyboard.KeyCodes.F,K:Phaser.Input.Keyboard.KeyCodes.K,T:Phaser.Input.Keyboard.KeyCodes.T,G:Phaser.Input.Keyboard.KeyCodes.G}),this.gamepadInput={left:!1,right:!1,up:!1,down:!1,shoot:!1,jump:!1},this.gamepadConnected=!1,window.addEventListener("gamepadconnected",e=>{console.log("üéÆ Gamepad connected:",e.gamepad.id),this.gamepadConnected=!0,this.showNotification("üéÆ Controller Connected!",2278750)}),window.addEventListener("gamepaddisconnected",e=>{console.log("üéÆ Gamepad disconnected"),this.gamepadConnected=!1}),this.knifeCooldown=0,this.isJumping=!1,this.isInAir=!1,this.isProne=!1,this.hunterBeingCarried=!1,this.stormActive=!1,this.stormTimer=0,this.lightningCooldown=0,this.lightningCharges=3,this.windCooldown=0,this.windCharges=2,this.inProtectedPark=!1,this.villains=this.physics.add.group(),this.villainSpawnTimer=0,this.arrestedCount=0,this.splashActive=!1,this.input.on("pointerdown",e=>{this.splashActive||this.gameOver||this.paused||this.handleShoot(e.worldX,e.worldY)}),this.input.keyboard.on("keydown-L",()=>this.showLeaderboard()),this.input.keyboard.on("keydown-H",()=>this.hideInstructions()),this.input.keyboard.on("keydown-R",()=>{this.gameOver&&(console.log("üîÑ R key pressed - restarting..."),"function"==typeof window.restartBirdTurds?window.restartBirdTurds():window.location.href=window.location.pathname+"?restart="+Date.now())}),this.input.keyboard.on("keydown-F",()=>this.knifeAttack()),this.input.keyboard.on("keydown-K",()=>this.knifeAttack()),this.input.keyboard.on("keydown-T",()=>this.callLightning()),this.input.keyboard.on("keydown-G",()=>this.callTornado()),this.input.keyboard.on("keydown-P",()=>{const e=document.activeElement;(!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName)&&(this.quickShopOpen||this.quickBuyAmmo())}),this.input.keyboard.on("keydown-E",()=>this.tryArrestGlobalist()),this.input.keyboard.on("keydown-X",()=>this.shakeOffTurds()),this.input.keyboard.on("keydown-Q",()=>this.shakeOffTurds()),this.devCodeBuffer="",this.input.keyboard.on("keydown",e=>{const t=document.activeElement;(!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&"true"!==t.contentEditable)&&1===e.key.length&&(this.devCodeBuffer+=e.key.toUpperCase(),this.devCodeBuffer.length>12&&(this.devCodeBuffer=this.devCodeBuffer.slice(-12)),this.devCodeBuffer.includes(btState.devModeCode)&&(this.activateDevMode(),this.devCodeBuffer=""))}),this.lastTapTime=0,this.input.on("pointerdown",()=>{const e=Date.now();e-this.lastTapTime<300&&this.shakeOffTurds(),this.lastTapTime=e}),this.mobileInput={left:!1,right:!1,up:!1,down:!1,shoot:!1,jump:!1},this.touchState={active:!1,startX:0,startY:0,currentX:0,moveThreshold:30,swipeThreshold:50,isDragging:!1},this.setupMobileControls()}pollGamepad(){const e=navigator.getGamepads?navigator.getGamepads():[];for(let t=0;t<e.length;t++){const a=e[t];if(!a)continue;this.gamepadInput={left:!1,right:!1,up:!1,down:!1,shoot:!1,jump:!1};const i=.3;if(a.axes[0]<-i&&(this.gamepadInput.left=!0),a.axes[0]>i&&(this.gamepadInput.right=!0),a.axes[1]<-i&&(this.gamepadInput.up=!0),a.axes[1]>i&&(this.gamepadInput.down=!0),a.buttons[12]&&a.buttons[12].pressed&&(this.gamepadInput.up=!0),a.buttons[13]&&a.buttons[13].pressed&&(this.gamepadInput.down=!0),a.buttons[14]&&a.buttons[14].pressed&&(this.gamepadInput.left=!0),a.buttons[15]&&a.buttons[15].pressed&&(this.gamepadInput.right=!0),a.buttons[0]&&a.buttons[0].pressed&&(this.gamepadInput.jump=!0),(a.buttons[7]&&a.buttons[7].pressed||a.buttons[2]&&a.buttons[2].pressed)&&(this.gamepadInput.shoot=!0),a.buttons[1]&&a.buttons[1].pressed&&(this.gamepadInput.down=!0),a.buttons[3]&&a.buttons[3].pressed&&this.knifeAttack(),a.buttons[6]&&a.buttons[6].pressed&&this.callLightning(),a.buttons[4]&&a.buttons[4].pressed&&this.callTornado(),this.gamepadInput.shoot&&this.hunter){const e=a.axes[2]||0,t=a.axes[3]||0;if(Math.sqrt(e*e+t*t)>i){const a=this.hunter.x+300*e,i=this.hunter.y+300*t;this.handleShoot(a,i)}else{const e=this.hunter.x+(this.hunter.flipX?-300:300);this.handleShoot(e,this.hunter.y-50)}}break}}activateDevMode(){btState.devMode||(btState.devMode=!0,btState.coins=999999,btState.ammo=999,btState.maxAmmo=999,btState.health=1e3,btState.maxHealth=1e3,btState.bibleAmmo=999,btState.bibleMaxAmmo=999,btState.hasBibleWeapon=!0,btState.biblesHeld=999,btState.upgrades.fireRate=3,btState.upgrades.damage=3,btState.upgrades.armor=.5,btState.upgrades.ammoCapacity=100,btState.upgrades.coinMultiplier=5,btState.angelProtectionActive=!0,btState.angelProtectionLevel=3,btState.angelProtectionTimer=99999,localStorage.setItem("birdturds_coins","999999"),this.showNotification("üîß DEVELOPER MODE ACTIVATED! üîß",16711935),this.devModeIndicator||(this.devModeIndicator=this.add.text(10,10,"üîß DEV MODE",{fontSize:"14px",fontWeight:"bold",color:"#ff00ff",backgroundColor:"rgba(0,0,0,0.8)",padding:{x:8,y:4}}).setScrollFactor(0).setDepth(9999)),this.updateCoins(),this.updateAmmo(),this.updateHealth(),this.updateBibleCount(),console.log("üîß DEVELOPER MODE ACTIVATED"),console.log("- Unlimited coins: 999,999"),console.log("- Unlimited ammo: 999"),console.log("- Max health: 1000"),console.log("- All upgrades maxed"),console.log("- Divine Angel protection"),console.log("- Bible weapon unlocked"))}setupMobileControls(){const e=this,t=this.game.canvas;if(!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0))return void console.log("Not mobile, skipping touch controls");console.log("Setting up NEW tap/drag mobile controls");const a=document.getElementById("mobile-touch-hint");a&&(a.style.display="block",a.style.opacity="1",setTimeout(()=>{a.style.transition="opacity 2s",a.style.opacity="0",setTimeout(()=>{a.style.display="none"},2e3)},4e3)),t.addEventListener("touchstart",t=>{t.preventDefault();const a=t.touches[0];e.touchState.active=!0,e.touchState.startX=a.clientX,e.touchState.startY=a.clientY,e.touchState.currentX=a.clientX,e.touchState.isDragging=!1,e.mobileInput.shoot=!0},{passive:!1}),t.addEventListener("touchmove",t=>{if(t.preventDefault(),!e.touchState.active)return;const a=t.touches[0],i=a.clientX-e.touchState.startX,s=a.clientY-e.touchState.startY;e.touchState.currentX=a.clientX,e.touchState.isDragging=!0,Math.abs(i)>e.touchState.moveThreshold?i<0?(e.mobileInput.left=!0,e.mobileInput.right=!1):(e.mobileInput.right=!0,e.mobileInput.left=!1):(e.mobileInput.left=!1,e.mobileInput.right=!1),s<-e.touchState.swipeThreshold&&!e.mobileInput.jump&&(e.mobileInput.jump=!0,e.touchState.startY=a.clientY),s>e.touchState.swipeThreshold?e.mobileInput.down=!0:e.mobileInput.down=!1},{passive:!1}),t.addEventListener("touchend",t=>{t.preventDefault(),e.touchState.active=!1,e.mobileInput.left=!1,e.mobileInput.right=!1,e.mobileInput.shoot=!1,e.mobileInput.jump=!1,e.mobileInput.down=!1,e.touchState.isDragging=!1},{passive:!1}),t.addEventListener("touchcancel",t=>{e.touchState.active=!1,e.mobileInput.left=!1,e.mobileInput.right=!1,e.mobileInput.shoot=!1,e.mobileInput.jump=!1,e.mobileInput.down=!1}),console.log("Mobile touch controls ready: tap=shoot, drag=move, swipe up=jump"),console.log("Mobile controls setup complete")}shakeOffTurds(){if(this.gameOver||btState.turdCount<=0)return;this.tweens.add({targets:this.hunter,x:this.hunter.x-15,duration:50,yoyo:!0,repeat:3,ease:"Sine.easeInOut"}),this.hunterTurds&&this.hunterTurds.length>0&&(this.hunterTurds.forEach(e=>{e&&e.active&&this.tweens.add({targets:e,x:e.x+Phaser.Math.Between(-100,100),y:e.y+100,alpha:0,rotation:4*Math.random(),duration:400,onComplete:()=>e.destroy()})}),this.hunterTurds=[]);const e=Math.min(3*btState.turdCount,15);btState.turdMeter=Math.max(0,btState.turdMeter-e),btState.turdCount=0,btState.shakesUsed++,this.updateHud()}findNearestShootableBird(){if(!this.birds||!this.hunter)return null;let e=null,t=1/0;return this.birds.getChildren().forEach(a=>{if(!a||!a.active||a.isFriendly)return;const i=Phaser.Math.Distance.Between(this.hunter.x,this.hunter.y,a.x,a.y);i<t&&i<800&&(t=i,e=a)}),e}shakeComplete(){const e=["Eww!","Gross!","Splat!","Nasty!","Yuck!"],t=e[Math.floor(Math.random()*e.length)];this.showNotification(t)}setupHUD(){this.hudElements={score:document.getElementById("hud-score"),healthFill:document.getElementById("hud-health-fill"),turdFill:document.getElementById("hud-turd-fill"),ammoFill:document.getElementById("hud-ammo-fill"),ammoText:document.getElementById("hud-ammo-text"),coins:document.getElementById("hud-coins"),weapon:document.getElementById("hud-weapon"),kills:document.getElementById("hud-kills"),accuracy:document.getElementById("hud-accuracy"),level:document.getElementById("hud-level"),levelFill:document.getElementById("hud-level-fill"),birdsLeft:document.getElementById("hud-birds-left")};const e=isChristmasSeason()?0:1;btState.currentLevel=e,btState.birdsKilledThisLevel=0,btState.birdsNeededThisLevel=LEVEL_CONFIG[e].birdsToKill,btState.levelComplete=!1,btState.gameWon=!1,console.log("üéÆ Game ready - click/tap to enable audio")}loadPlayerData(){try{const e=localStorage.getItem("birdturds_coins");e&&(btState.coins=parseInt(e)||0);const t=localStorage.getItem("birdturds_daily");if(t){const e=JSON.parse(t),a=(new Date).toDateString();e.date===a?(btState.coinsEarnedToday=e.earned||0,btState.lastCoinDate=a):(btState.coinsEarnedToday=0,btState.lastCoinDate=a)}}catch(e){}this.updateHud()}savePlayerData(){try{localStorage.setItem("birdturds_coins",btState.coins.toString()),localStorage.setItem("birdturds_daily",JSON.stringify({date:btState.lastCoinDate||(new Date).toDateString(),earned:btState.coinsEarnedToday}))}catch(e){}}update(e,t){if(this.gameOver||this.paused)return;if(!this.hunter||!this.hunter.active)return;if(!this.hunter.body)return;const a=t/1e3;this.coinSyncCounter||(this.coinSyncCounter=0),this.coinSyncCounter++,this.coinSyncCounter>=60&&(this.coinSyncCounter=0,this.updateCoinDisplay()),this.shieldActive&&this.shieldSprite&&this.hunter&&this.shieldSprite.setPosition(this.hunter.x,this.hunter.y);try{this.pollGamepad()}catch(e){}try{const t=a*(btState.slowMotion?.5:1);try{this.updateCurrentScene()}catch(e){console.warn("Scene update error:",e)}try{this.handleHunterMovement(a)}catch(e){console.warn("Movement error:",e)}try{this.animateHunter(a)}catch(e){console.warn("Animate error:",e)}try{this.handleSpawning(t)}catch(e){console.warn("Spawn error:",e)}try{this.handlePanelsLoop()}catch(e){console.warn("Panels error:",e)}try{this.updateBirds(t,e)}catch(e){console.warn("Birds error:",e)}try{this.updateTurds()}catch(e){console.warn("Turds error:",e)}try{this.updateBullets()}catch(e){console.warn("Bullets error:",e)}try{this.updateVehicles(t)}catch(e){console.warn("Vehicles error:",e)}try{this.updatePlanes(t)}catch(e){console.warn("Planes error:",e)}try{this.updateAnimals(t)}catch(e){console.warn("Animals error:",e)}try{this.updateNPCs(t)}catch(e){console.warn("NPCs error:",e)}try{this.updateTrump(t)}catch(e){console.warn("Trump error:",e)}try{this.updateItems(e)}catch(e){console.warn("Items error:",e)}try{this.updateCoins(e)}catch(e){console.warn("Coins error:",e)}try{this.updateParachuters(t)}catch(e){console.warn("Parachuters error:",e)}try{this.updateAmmoBoxes()}catch(e){console.warn("Ammo boxes error:",e)}try{this.updateStorm(t)}catch(e){console.warn("Storm error:",e)}try{this.updateBombs()}catch(e){console.warn("Bombs error:",e)}try{this.updateBots(t)}catch(e){console.warn("Bots error:",e)}try{this.checkLowAmmo()}catch(e){console.warn("Ammo check error:",e)}try{this.cleanupOffscreen()}catch(e){console.warn("Cleanup error:",e)}try{this.updateHud()}catch(e){console.warn("HUD error:",e)}try{this.updateDemons(t)}catch(e){console.warn("Demons error:",e)}try{this.updateAngelProtection(t)}catch(e){console.warn("Angel error:",e)}try{this.updateSkyClarity()}catch(e){console.warn("Sky error:",e)}try{this.updateVillains(t)}catch(e){console.warn("Villains error:",e)}try{this.updateDebugOverlay(a)}catch(e){console.warn("Debug overlay error:",e)}try{this.updateJetpack(t)}catch(e){}}catch(e){console.error("Update error:",e)}this.fireRateCooldown>0&&(this.fireRateCooldown-=a),this.knifeCooldown>0&&(this.knifeCooldown-=a),this.windCooldown>0&&(this.windCooldown-=a),this.keys.A&&Phaser.Input.Keyboard.JustDown(this.keys.A)&&this.showAngelMenu(),this.keys.B&&Phaser.Input.Keyboard.JustDown(this.keys.B)&&this.fireBibleWeapon(),this.updateBibleBullets()}updateBibleBullets(){this.bibleBullets&&(this.bibleBullets=this.bibleBullets.filter(e=>{if(!e||!e.active)return!1;if(this.demons){let t=!1;if(this.demons.getChildren().forEach(a=>{if(!a||!a.active||t)return;if(Phaser.Math.Distance.Between(e.x,e.y,a.x,a.y)<50){a.health-=e.damage,t=!0,this.showPointIndicator(a.x,a.y,`üìñ ${e.scriptureRef}!`,16766720);for(let e=0;e<8;e++){const t=e/8*Math.PI*2,i=this.add.text(a.x,a.y,"‚úùÔ∏è",{fontSize:"16px"}).setOrigin(.5).setDepth(20);this.tweens.add({targets:i,x:a.x+60*Math.cos(t),y:a.y+60*Math.sin(t),alpha:0,scale:.5,duration:500,onComplete:()=>i.destroy()})}a.health<=0&&this.onDemonKilled(a),e.destroy()}}),t)return!1}if(this.demonLies){let t=!1;this.demonLies.getChildren().forEach(a=>{if(!a||!a.active||t)return;Phaser.Math.Distance.Between(e.x,e.y,a.x,a.y)<40&&(btState.score+=50,this.showPointIndicator(a.x,a.y,"+50 TRUTH DESTROYS LIES!",16766720),a.destroy(),t=!0)})}const t=this.cameras.main.worldView;return!(e.x<t.x-100||e.x>t.right+100||e.y<-100||e.y>740)||(e.destroy(),!1)}))}onDemonKilled(e){btState.score+=DEMON_CONFIG.score,btState.kills++;for(let t=0;t<DEMON_CONFIG.coinDrop;t++)this.time.delayedCall(50*t,()=>{this.spawnCoinDrop(e.x+Phaser.Math.Between(-30,30),e.y+Phaser.Math.Between(-30,30),1)});this.showPointIndicator(e.x,e.y,`+${DEMON_CONFIG.score} DEMON VANQUISHED!`,16766720),this.showNotification("‚úùÔ∏è THE WORD OF GOD PREVAILS! ‚úùÔ∏è",16766720),this.showVictoryScripture();for(let t=0;t<20;t++){const a=t/20*Math.PI*2,i=40+60*Math.random(),s=Math.random()>.4,o=this.add.circle(e.x,e.y,s?8:5,s?16766720:16777215).setDepth(15).setAlpha(1);this.tweens.add({targets:o,x:e.x+Math.cos(a)*i,y:e.y+Math.sin(a)*i,alpha:0,scale:.2,duration:800,onComplete:()=>o.destroy()})}const t=this.add.text(e.x,e.y,"‚úùÔ∏è",{fontSize:"50px"}).setOrigin(.5).setDepth(16);this.tweens.add({targets:t,y:e.y-150,alpha:0,scale:2,duration:1500,ease:"Sine.easeOut",onComplete:()=>t.destroy()}),e.destroy()}updateSkyClarity(){if(!btState.currentLevel)return;const e=LEVEL_CONFIG[btState.currentLevel];if(!e)return;const t=btState.birdsKilledThisLevel/e.birdsToKill;this.skyClarity=Math.min(1,t),this.skyOverlay&&this.skyOverlay.setAlpha(.3*(1-this.skyClarity)),this.skyClarity>.8&&!this.sunRaysActive&&(this.createSunRays(),this.sunRaysActive=!0)}createSunRays(){const e=[];for(let t=0;t<5;t++){const a=this.add.rectangle(640+100*(t-2),-50,20,740,16766720,.1).setScrollFactor(0).setDepth(3).setRotation(.1*(t-2));this.tweens.add({targets:a,alpha:{from:.05,to:.15},duration:2e3,yoyo:!0,repeat:-1,delay:200*t}),e.push(a)}this.sunRays=e}updateCurrentScene(){const e=this.hunter.x;let t=this.inProtectedPark,a=this.inWhiteHouse,i=null,s=this.currentSceneIndex;if(this.bgPanels.getChildren().forEach(t=>{t&&e>=t.x&&e<t.x+this.panelWidth&&(i=t.sceneData,s=t.sceneIndex)}),i){s!==this.lastSceneIndex&&("swamp"===this.lastSceneKey&&(this.swampMessage&&(this.swampMessage.destroy(),this.swampMessage=null),this.swampMessageBg&&(this.swampMessageBg.destroy(),this.swampMessageBg=null)),this.currentScene=i,this.currentSceneIndex=s,this.triggerSceneTransition(i),this.updateGroundForScene(i),this.lastSceneIndex=s,this.lastSceneKey=i.key),this.inProtectedPark=i&&i.isProtectedPark,this.inWhiteHouse=i&&i.isWhiteHouse}this.inProtectedPark&&!t&&(this.showNotification("üèûÔ∏è ENTERING WILDLIFE SANCTUARY - NO HUNTING!"),this.showParkOverlay()),!this.inProtectedPark&&t&&(this.showNotification("üéØ Back in hunting zone! Fire away!"),this.hideParkOverlay()),this.inWhiteHouse&&!a&&(this.showNotification("üá∫üá∏ WELCOME TO WASHINGTON D.C.! PROTECT THE PRESIDENT!",16766720),this.time.delayedCall(1500,()=>{this.spawnTrump()})),!this.inWhiteHouse&&a&&this.cleanupTrump()}triggerSceneTransition(e){if(!e)return;this.snowflakes&&this.currentScene&&this.currentScene.isChristmas&&!e.isChristmas&&(this.snowflakes.clear(!0,!0),console.log("‚ùÑÔ∏è Cleared snowflakes - leaving Christmas scene"));const t=e.name||e.key.toUpperCase();this.sceneBanner&&(this.sceneBanner.setText(t),this.sceneBanner.setAlpha(0),this.sceneBanner.setScale(.5),this.tweens.add({targets:this.sceneBanner,alpha:1,scale:1,duration:400,ease:"Back.easeOut",onComplete:()=>{this.time.delayedCall(1500,()=>{this.tweens.add({targets:this.sceneBanner,alpha:0,scale:.8,duration:500,ease:"Power2"})})}})),("swamp"===e.key||e.isSwamp)&&this.showSwampMessage();const a=sceneTransitionMessages[e.key];if(a&&this.sceneSubtitle){const e=a[Math.floor(Math.random()*a.length)];this.sceneSubtitle.setText(e),this.sceneSubtitle.setAlpha(0),this.tweens.add({targets:this.sceneSubtitle,alpha:1,duration:600,delay:200,onComplete:()=>{this.time.delayedCall(1800,()=>{this.tweens.add({targets:this.sceneSubtitle,alpha:0,duration:400})})}})}e.skyColor&&this.sky&&this.transitionSkyColor(e.skyColor),e.ambientTint&&this.ambientOverlay&&this.applyAmbientTint(e),e.hazard&&this.triggerHazardWarning(),e.night&&this.triggerNightMode(),this.playSound("transition")}showSwampMessage(){this.swampMessage&&this.swampMessage.destroy(),this.swampMessageBg&&this.swampMessageBg.destroy();this.swampMessageBg=this.add.rectangle(640,150,700,60,0,.8).setScrollFactor(0).setDepth(500).setStrokeStyle(3,16711680),this.swampMessage=this.add.text(640,150,"LET'S DRAIN THE SWAMP OF THESE TURDS!",{fontSize:"28px",fontStyle:"bold",fontFamily:"Impact, Arial Black, sans-serif",color:"#ff0000",stroke:"#ffff00",strokeThickness:4,shadow:{offsetX:3,offsetY:3,color:"#000000",blur:5,fill:!0}}).setOrigin(.5).setScrollFactor(0).setDepth(501),this.tweens.add({targets:[this.swampMessage,this.swampMessageBg],scaleX:1.05,scaleY:1.05,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.showNotification("üêä DRAIN THE SWAMP! Arrest the globalists!",16711680)}transitionSkyColor(e){const t=e>>16&255,a=e>>8&255,i=255&e,s={r:this.currentSkyColor>>16&255,g:this.currentSkyColor>>8&255,b:255&this.currentSkyColor};this.tweens.add({targets:s,r:t,g:a,b:i,duration:1e3,ease:"Sine.easeInOut",onUpdate:()=>{const e=Math.round(s.r)<<16|Math.round(s.g)<<8|Math.round(s.b);this.sky.setFillStyle(e),this.currentSkyColor=e}})}applyAmbientTint(e){this.ambientOverlay&&(e.night?(this.ambientOverlay.setFillStyle(1710654),this.tweens.add({targets:this.ambientOverlay,alpha:.4,duration:1500,ease:"Sine.easeInOut"})):e.hazard?(this.ambientOverlay.setFillStyle(16729156),this.tweens.add({targets:this.ambientOverlay,alpha:.15,duration:800,ease:"Sine.easeInOut"})):this.tweens.add({targets:this.ambientOverlay,alpha:0,duration:1e3,ease:"Sine.easeInOut"}))}triggerHazardWarning(){this.showNotification("‚ö†Ô∏è DANGER ZONE! Increased hazards ahead!"),this.transitionOverlay&&(this.transitionOverlay.setFillStyle(16711680),this.transitionOverlay.setAlpha(.3),this.tweens.add({targets:this.transitionOverlay,alpha:0,duration:500,yoyo:!0,repeat:2}))}triggerNightMode(){this.showNotification("üåô Night falls... stay sharp!")}showParkOverlay(){this.parkBanner&&this.parkBanner.destroy(),this.parkBanner=this.add.text(this.cameras.main.worldView.centerX,100,"üèûÔ∏è NO HUNTING ZONE üö´",{fontSize:"24px",fontStyle:"bold",color:"#ff0000",backgroundColor:"#000000aa",padding:{x:20,y:10}}).setOrigin(.5).setScrollFactor(0).setDepth(200)}hideParkOverlay(){this.parkBanner&&this.tweens.add({targets:this.parkBanner,alpha:0,duration:500,onComplete:()=>{this.parkBanner&&this.parkBanner.destroy()}})}handleHunterMovement(e){if(!this.hunter||!this.hunter.body)return;const t=this.isProne?30:this.isCrouching?100:250,a=this.keys.S.isDown||this.keys.C.isDown||this.keys.SHIFT.isDown||this.mobileInput&&this.mobileInput.down||this.gamepadInput&&this.gamepadInput.down,i=this.keys.Z&&this.keys.Z.isDown,s=this.keys.SHIFT&&this.keys.SHIFT.isDown;i&&this.isOnGround()&&!this.isProne?(this.isProne=!0,this.isCrouching=!1,this.hunter.setScale(.24,.06),this.hunter.y=this.groundY+15,this.showNotification("üõ°Ô∏è PRONE! Very low profile!")):!i&&this.isProne?(this.isProne=!1,this.hunter.setScale(.24),this.hunter.y=this.groundY):!a||this.isCrouching||this.isProne||!this.isOnGround()||s?a||!this.isCrouching||this.isProne||(this.isCrouching=!1,this.hunter.setScale(.24)):(this.isCrouching=!0,this.hunter.setScale(.24,.156));let o=0;const n=this.cursors.left.isDown||this.keys.A.isDown||this.mobileInput&&this.mobileInput.left||this.gamepadInput&&this.gamepadInput.left,r=this.cursors.right.isDown||this.keys.D.isDown||this.mobileInput&&this.mobileInput.right||this.gamepadInput&&this.gamepadInput.right,h=s&&(n||r);n?(o=h?-350:-t,this.lastDirection=-1):r&&(o=h?350:t,this.lastDirection=1),this.hunter.body.setVelocityX(o);(this.cursors.up.isDown||this.keys.W.isDown||this.mobileInput&&this.mobileInput.jump||this.gamepadInput&&this.gamepadInput.jump)&&this.isOnGround()&&!this.isProne&&(this.hunter.body.setVelocityY(-420),this.playSound("jump"));const l=this.isOnGround();if(l?this.isShooting?this.playHunterAnim("shoot"):h?this.playHunterAnim("run"):0!==o?this.playHunterAnim("walk"):this.playHunterAnim("idle"):this.playHunterAnim("jump"),this.mobileInput&&this.mobileInput.shoot&&this.fireRateCooldown<=0){const e=this.findNearestShootableBird(),t=e?e.x:this.hunter.x+200*this.lastDirection,a=e?e.y:this.hunter.y-300;this.handleShoot(t,a)}this.isInAir=!l,this.hunter.y>this.groundY&&(this.hunter.y=this.groundY,this.hunter.body.velocity.y>0&&this.hunter.body.setVelocityY(0),this.isJumping=!1);const d=this.panelWidth||1344,c=btState.currentLevel-(isChristmasSeason()?0:1),u=Math.max(50,c*d),p=(c+1)*d-50;if(this.hunter.x<u&&(this.hunter.x=u,this.hunter.body&&this.hunter.body.setVelocityX(0)),this.hunter.x>p)if(btState.levelComplete)this.advanceToNextLevel(),this.hunter.x=(c+1)*d+100;else if(this.hunter.x=p,this.hunter.body&&this.hunter.body.setVelocityX(0),!this.lastBoundaryWarning||Date.now()-this.lastBoundaryWarning>3e3){const e=LEVEL_CONFIG[btState.currentLevel];if(e&&e.birdsToKill>0){const t=e.birdsToKill-btState.birdsKilledThisLevel;this.showNotification(`üöß Kill ${t} more birds to advance! üöß`,16766720)}this.lastBoundaryWarning=Date.now()}const m=this.input.activePointer;let g,y;m&&void 0!==m.worldX?(g=m.worldX,y=m.worldY):(g=this.hunter.x+200*this.lastDirection,y=this.hunter.y-200);const f=g-this.hunter.x,b=y-this.hunter.y;0!==o?this.hunter.flipX=o<0:Math.abs(f)>30&&(this.hunter.flipX=f<0);let S=0;if(b<0){S=.35*-Math.min(1,Math.abs(b)/350)}else{S=.1*Math.min(1,b/200)}this.hunter.flipX&&(S=-S);const w=this.hunter.rotation||0;if(this.hunter.setRotation(w+.2*(S-w)),this.hunterArmor&&(this.hunterArmor.setPosition(this.hunter.x,this.hunter.y),this.hunterArmor.setScale(this.hunter.scaleX,this.hunter.scaleY),this.hunterArmor.setFlipX(this.hunter.flipX),this.hunterArmor.setRotation(this.hunter.rotation)),this.hunterShadow){this.hunterShadow.setPosition(this.hunter.x,this.groundY+5);const e=Math.max(0,this.groundY-this.hunter.y),t=Math.max(.3,1-e/200),a=Math.max(.1,.3-e/500);this.hunterShadow.setScale(t,.5*t),this.hunterShadow.setAlpha(a)}if(this.hunterNameLabel&&this.hunterNameLabel.setPosition(this.hunter.x,this.hunter.y-100),this.mobileInput&&this.mobileInput.shoot&&this.fireRateCooldown<=0){const e=this.findNearestShootableBird(),t=e?e.x:this.hunter.x+200*this.lastDirection,a=e?e.y:this.hunter.y-300;this.handleShoot(t,a)}this.keys.SPACE.isDown&&this.fireRateCooldown<=0&&this.handleShoot(g,y)}isOnGround(){return this.hunter.body.blocked.down||Math.abs(this.hunter.y-this.groundY)<5}knifeAttack(){if(this.gameOver||this.knifeCooldown>0)return;this.knifeCooldown=.4;const e=this.hunter.x+(this.hunter.flipX?-40:40),t=this.hunter.y-20,a=this.add.text(e,t,"üî™",{fontSize:"32px"}).setDepth(100).setRotation(this.hunter.flipX?-.5:.5);this.tweens.add({targets:a,x:e+(this.hunter.flipX?-60:60),y:t-30,rotation:this.hunter.flipX?-2:2,alpha:0,scale:1.5,duration:250,onComplete:()=>a.destroy()});let i=0;this.birds.getChildren().forEach(e=>{if(!e||!e.active)return;if(Phaser.Math.Distance.Between(this.hunter.x,this.hunter.y,e.x,e.y)<80){const t=speciesConfig[e.species];if(!t)return;if(t.shootable){const a=Math.round(1.5*t.score);btState.score+=a,btState.kills++,i++,this.onBirdKilled(),t.coinDrop>0&&this.spawnCoinDrop(e.x,e.y,t.coinDrop),this.showPointIndicator(e.x,e.y,`+${a} üî™ SLICED!`,15680580);for(let t=0;t<5;t++){const t=this.add.circle(e.x,e.y,3,16711680).setDepth(15);this.tweens.add({targets:t,x:e.x+Phaser.Math.Between(-40,40),y:e.y+Phaser.Math.Between(-40,40),alpha:0,duration:300,onComplete:()=>t.destroy()})}e.destroy()}else btState.score+=t.score,this.showPointIndicator(e.x,e.y,`${t.score} DON'T KNIFE THAT!`,15680580)}}),i>=3?(btState.score+=20,this.showNotification("üî™ TRIPLE SLICE! +20 BONUS!")):i>=2?(btState.score+=10,this.showNotification("üî™ DOUBLE SLICE! +10 BONUS!")):1===i?this.showNotification("üî™ KNIFE KILL!"):this.showNotification("üî™ SWOOSH!")}onBirdKilled(){if(this.currentScene&&this.currentScene.isProtectedPark)return;btState.birdsKilledThisLevel++;const e=LEVEL_CONFIG[btState.currentLevel],t=e.birdsToKill-btState.birdsKilledThisLevel;t>0&&t<=10&&this.showNotification(`üéØ ${t} BIRDS LEFT!`,16776960),btState.birdsKilledThisLevel>=e.birdsToKill&&!btState.levelComplete&&(btState.levelComplete=!0,this.onLevelComplete())}onLevelComplete(){const e=btState.currentLevel;this.showNotification(`üéâ ZONE ${e} CLEARED! üéâ`,2278750);const t=150*e;if(btState.score+=t,this.showPointIndicator(640,320,`+${t} ZONE BONUS!`,16766720),this.createLevelCompleteFireworks(),this.skyClarity=1,this.skyOverlay&&this.skyOverlay.setAlpha(0),this.sunRays&&(this.sunRays.forEach(e=>e.destroy()),this.sunRays=null),this.sunRaysActive=!1,e>=12)return btState.gameWon=!0,btState.reachedWhiteHouse=!0,void this.onGameWon();this.time.delayedCall(3e3,()=>{this.advanceToNextLevel()})}checkStateParkProgress(){if(this.currentScene&&this.currentScene.isProtectedPark&&this.hunter&&this.hunter.x>1152&&!btState.levelComplete){btState.levelComplete=!0,this.showNotification("‚úÖ STATE PARK CLEARED! You didn't shoot!",2278750);const e=500;btState.score+=e,this.showPointIndicator(640,320,`+${e} NO-HUNT BONUS!`,2278750),this.createLevelCompleteFireworks(),this.time.delayedCall(3e3,()=>{this.advanceToNextLevel()})}}createLevelCompleteFireworks(){const e=[16711680,16777215,255,16766720,2278750,16711935];for(let t=0;t<10;t++)this.time.delayedCall(200*t,()=>{const t=Phaser.Math.Between(100,1180),a=Phaser.Math.Between(80,200),i=e[Math.floor(Math.random()*e.length)];for(let e=0;e<15;e++){const s=e/15*Math.PI*2,o=60+40*Math.random(),n=this.add.circle(t,a,4+3*Math.random(),i).setDepth(100).setAlpha(1);this.tweens.add({targets:n,x:t+Math.cos(s)*o,y:a+Math.sin(s)*o+30,alpha:0,scale:.3,duration:800+400*Math.random(),onComplete:()=>n.destroy()})}const s=this.add.circle(t,a,20,16777215,.9).setDepth(101);this.tweens.add({targets:s,alpha:0,scale:3,duration:300,onComplete:()=>s.destroy()})});this.playSound("powerup")}advanceToNextLevel(){const e=LEVEL_CONFIG[btState.currentLevel],t=this.currentScene&&this.currentScene.isProtectedPark;if(e&&!t&&!btState.levelComplete){const t=e.birdsToKill-btState.birdsKilledThisLevel;if(t>0)return console.warn("Blocked premature level advance",{level:btState.currentLevel,remaining:t}),void this.showNotification(`You still need to shoot ${t} birds to advance!`,16766720)}btState.currentLevel++,btState.birdsKilledThisLevel=0,btState.levelComplete=!1;const a=LEVEL_CONFIG[btState.currentLevel];btState.birdsNeededThisLevel=a?a.birdsToKill:100;const i=isChristmasSeason()?0:1;this.currentSceneIndex=btState.currentLevel-i,this.currentScene=sceneSequence[this.currentSceneIndex]||sceneSequence[sceneSequence.length-1];const s=this.panelWidth||1344,o=this.currentSceneIndex*s+100;this.hunter&&(this.hunter.x=o,this.cameras.main.pan(o,320,500,"Sine.easeInOut")),this.showLevelIntro(),this.transitionBackground(),btState.health=Math.min(btState.maxHealth,btState.health+25),btState.turdMeter=Math.max(0,btState.turdMeter-20),btState.ammo=Math.min(btState.ammoMax,btState.ammo+30)}onGameWon(){this.add.rectangle(640,320,1280,640,85,.9).setScrollFactor(0).setDepth(1e3);[this.add.text(640,170,"üá∫üá∏ VICTORY! üá∫üá∏",{fontSize:"64px",fontStyle:"bold",color:"#ffd700",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,250,"YOU REACHED THE WHITE HOUSE!",{fontSize:"32px",fontStyle:"bold",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,320,`"${TRUMP_QUOTES.welcome[Math.floor(Math.random()*TRUMP_QUOTES.welcome.length)]}"`,{fontSize:"24px",fontStyle:"italic",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,370,"üèõÔ∏è You are invited into the White House! üèõÔ∏è",{fontSize:"22px",fontStyle:"bold",color:"#88ff88"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,420,`FINAL SCORE: ${btState.score.toLocaleString()}`,{fontSize:"28px",fontStyle:"bold",color:"#ffffff"}).setOrigin(.5).setScrollFactor(0).setDepth(1001),this.add.text(640,470,'Romans 8:31 - "If God is for us, who can be against us?"',{fontSize:"16px",fontStyle:"italic",color:"#ffd700"}).setOrigin(.5).setScrollFactor(0).setDepth(1001)].forEach((e,t)=>{e.setAlpha(0),this.tweens.add({targets:e,alpha:1,duration:500,delay:200*t})});for(let e=0;e<20;e++)this.time.delayedCall(300*e,()=>{const e=Phaser.Math.Between(100,1180),t=Phaser.Math.Between(100,300);this.createFirework(e,t)})}createFirework(e,t){const a=[16711680,16777215,255,16766720],i=a[Math.floor(Math.random()*a.length)];for(let a=0;a<12;a++){const s=a/12*Math.PI*2,o=this.add.circle(e,t,4,i).setDepth(1002);this.tweens.add({targets:o,x:e+80*Math.cos(s),y:t+80*Math.sin(s),alpha:0,scale:.5,duration:800,onComplete:()=>o.destroy()})}}animateHunter(e){if(this.hunter&&this.hunter.body)if(!this.isInAir&&Math.abs(this.hunter.body.velocity.x)>10&&this.hunter.body.blocked.down){this.walkFrame+=10*e;const t=this.isCrouching?1:2,a=Math.sin(this.walkFrame)*t;this.hunter.y+a<=this.groundY+5&&(this.hunter.y=this.groundY+a)}else this.walkFrame=0}handleShoot(e,t){if(this.gameOver||this.fireRateCooldown>0)return;let a="rifle",i=16776960,s=5,o=1e3,n=null,r=!0;const h=btState.currentCharacter||"buck";if(btState.ammo>0){switch(btState.ammo--,a="rifle",h){case"buck":i=13934615,s=4,o=950,this.fireRateCooldown=.25/btState.upgrades.fireRate;break;case"bubba":return this.fireShotgunSpread(e,t,6,.35,6710886,750),void(this.fireRateCooldown=.7/btState.upgrades.fireRate);case"daisy":return this.fireShotgunSpread(e,t,8,.5,8947848,700),void(this.fireRateCooldown=.9/btState.upgrades.fireRate);case"sierra":i=16766720,s=3,o=1100,this.fireRateCooldown=.08/btState.upgrades.fireRate;break;case"clyde":i=13467442,s=5,o=1e3,this.fireRateCooldown=.2/btState.upgrades.fireRate;break;case"gunner":i=12088115,s=5,o=1050,this.fireRateCooldown=.1/btState.upgrades.fireRate,e+=30*(Math.random()-.5),t+=30*(Math.random()-.5);break;case"jolene":i=16729156,s=6,o=1400,this.fireRateCooldown=1/btState.upgrades.fireRate,this.createSniperTrail(e,t);break;case"tammy":i=16777096,s=3,o=900,this.fireRateCooldown=.12/btState.upgrades.fireRate;break;default:i=16776960,s=4,o=1e3,this.fireRateCooldown=.15/btState.upgrades.fireRate}this.playSound("shoot")}else{if(btState.hasShotgun&&btState.shotgunShells>0){btState.shotgunShells--,a="shotgun",this.fireRateCooldown=.8,this.playSound("shoot",{volume:1.2});const i=this.hunter.x+(this.hunter.flipX?-25:25),s=this.hunter.y-(this.isCrouching?20:35),o=Math.atan2(t-s,e-i);for(let e=0;e<5;e++){const e=o+.4*(Math.random()-.5),t=this.add.circle(i,s,3,8947848).setDepth(15);this.physics.add.existing(t),t.body.setAllowGravity(!1),t.body.setCircle(3),this.bullets.add(t),t.body.setVelocity(800*Math.cos(e),800*Math.sin(e)),t.spawnTime=this.time.now,t.damage=.6*btState.upgrades.damage,t.weaponType="shotgun"}return this.createMuzzleFlash(i,s),void(btState.shotgunShells<=0&&(btState.hasShotgun=!1))}if(btState.hasMinigun&&btState.minigunAmmo>0)btState.minigunAmmo--,a="minigun",i=16737792,s=3,o=1200,this.fireRateCooldown=.03,e+=40*(Math.random()-.5),t+=40*(Math.random()-.5),this.playSound("minigun"),btState.minigunAmmo<=0&&(btState.hasMinigun=!1);else if(btState.hasMachinegun&&btState.machinegunAmmo>0)btState.machinegunAmmo--,a="machinegun",i=16755200,s=4,o=1100,this.fireRateCooldown=.06,e+=25*(Math.random()-.5),t+=25*(Math.random()-.5),this.playSound("machinegun"),btState.machinegunAmmo<=0&&(btState.hasMachinegun=!1);else if(btState.hasBarrett&&btState.barrettAmmo>0)btState.barrettAmmo--,a="barrett",i=16711680,s=8,o=1600,this.fireRateCooldown=1.5,r=!0,this.createSniperTrail(e,t),this.playSound("barrett"),this.cameras.main.shake(100,.01),btState.barrettAmmo<=0&&(btState.hasBarrett=!1);else if(btState.hasSniper&&btState.sniperAmmo>0)btState.sniperAmmo--,a="sniper",i=16729156,s=6,o=1400,this.fireRateCooldown=1,this.createSniperTrail(e,t),this.playSound("sniper_shop"),btState.sniperAmmo<=0&&(btState.hasSniper=!1);else if(btState.hasDeagle&&btState.deagleAmmo>0)btState.deagleAmmo--,a="deagle",i=16766720,s=5,o=1e3,this.fireRateCooldown=.4,this.playSound("deagle"),btState.deagleAmmo<=0&&(btState.hasDeagle=!1);else if(btState.hasRevolver&&btState.revolverAmmo>0)btState.revolverAmmo--,a="revolver",i=12632256,s=4,o=900,this.fireRateCooldown=.5,this.playSound("revolver"),btState.revolverAmmo<=0&&(btState.hasRevolver=!1);else if(btState.hasBazooka&&btState.bazookaAmmo>0)btState.bazookaAmmo--,a="bazooka",n="üöÄ",o=600,r=!1,this.fireRateCooldown=2,this.playSound("explosion",{volume:.5}),btState.bazookaAmmo<=0&&(btState.hasBazooka=!1);else{if(!(btState.hasRocketLauncher&&btState.rocketAmmo>0))return void this.showNotification("‚ùå NO AMMO! Use knife (F) or find a weapon!");btState.rocketAmmo--,a="rocket",n="üí•",o=500,r=!1,this.fireRateCooldown=2.5,this.playSound("explosion",{volume:.6}),btState.rocketAmmo<=0&&(btState.hasRocketLauncher=!1)}}btState.shots++;const l=this.hunter.x+(this.hunter.flipX?-25:25),d=this.hunter.y-(this.isCrouching?20:35);let c;c=n?this.add.text(l,d,n,{fontSize:"16px"}).setDepth(15):this.add.circle(l,d,s,i).setDepth(15),this.physics.add.existing(c),c.body.setAllowGravity(!1),n||c.body.setCircle(s),this.bullets.add(c);const u=e-l,p=t-d,m=Math.max(1,Math.hypot(u,p));c.body.setVelocity(u/m*o,p/m*o),c.spawnTime=this.time.now;let g=1;switch(a){case"crossbow":g=1.5;break;case"revolver":g=btState.revolverDamage||2;break;case"deagle":g=btState.deagleDamage||2.5;break;case"sniper":g=btState.sniperDamage||3;break;case"barrett":g=btState.barrettDamage||5;break;case"bazooka":g=10;break;case"rocket":g=15;break;case"machinegun":g=.8;break;case"minigun":g=.5;break;default:"jolene"===h&&(g=2)}c.damage=btState.upgrades.damage*g,c.weaponType=a,n&&c.setRotation(Math.atan2(p,u)),r&&this.createMuzzleFlash(l,d)}fireShotgunSpread(e,t,a,i,s,o){const n=this.hunter.x+(this.hunter.flipX?-25:25),r=this.hunter.y-(this.isCrouching?20:35),h=Math.atan2(t-r,e-n);btState.ammo--,btState.shots++,this.playSound("shoot",{volume:1.2});for(let e=0;e<a;e++){const e=h+(Math.random()-.5)*i,t=this.add.circle(n,r,3,s).setDepth(15);this.physics.add.existing(t),t.body.setAllowGravity(!1),t.body.setCircle(3),this.bullets.add(t),t.body.setVelocity(Math.cos(e)*o,Math.sin(e)*o),t.spawnTime=this.time.now,t.damage=btState.upgrades.damage*(.5+.3*Math.random()),t.weaponType="shotgun"}this.createShotgunFlash(n,r)}createShotgunFlash(e,t){const a=this.add.circle(e,t,25,16755200,.9).setDepth(16),i=this.add.circle(e,t,15,16777215,.8).setDepth(17),s=this.add.circle(e,t,8,16776960,1).setDepth(18);this.tweens.add({targets:[a,i,s],alpha:0,scale:2.5,duration:100,onComplete:()=>{a.destroy(),i.destroy(),s.destroy()}})}createSniperTrail(e,t){const a=this.hunter.x+(this.hunter.flipX?-25:25),i=this.hunter.y-(this.isCrouching?20:35),s=this.add.graphics().setDepth(14);s.lineStyle(2,16711680,.8),s.lineBetween(a,i,e,t),this.tweens.add({targets:s,alpha:0,duration:150,onComplete:()=>s.destroy()})}createMuzzleFlash(e,t){const a=this.add.circle(e,t,15,16777215,.9).setDepth(16),i=this.add.circle(e,t,8,16776960,.8).setDepth(17);this.tweens.add({targets:[a,i],alpha:0,scale:2,duration:80,onComplete:()=>{a.destroy(),i.destroy()}})}handleSpawning(e){const t=LEVEL_CONFIG[btState.currentLevel]||LEVEL_CONFIG[1],a=t.spawnRate;if(this.spawnTimer+=e,this.vehicleTimer+=e,this.itemTimer+=e,this.planeTimer+=e,this.animalTimer+=e,this.npcTimer+=e,this.bossTimer+=e,btState.levelComplete)return;this.spawnTimer>=a&&(this.spawnTimer=0,this.spawnBirdWave()),this.vehicleTimer>=15&&(this.vehicleTimer=0,this.spawnVehicle()),this.planeTimer>=35&&(this.planeTimer=0,this.spawnPlane()),this.itemTimer>=12&&(this.itemTimer=0,this.spawnPickup()),this.animalTimer>=20&&(this.animalTimer=0,this.spawnAnimal()),this.npcTimer>=40&&(this.npcTimer=0,this.spawnNPC()),this.shelterTimer||(this.shelterTimer=0),this.shelterTimer+=e,this.shelterTimer>=60&&this.stormActive&&(this.shelterTimer=0,this.spawnShelter());const i=90-10*btState.currentLevel;if(this.bossTimer>=30&&!this.firstBossSpawned?(this.bossTimer=0,this.firstBossSpawned=!0,this.spawnBossBird(),this.showNotification("üêâ FIRST BOSS APPEARED! Use heavy weapons!")):this.firstBossSpawned&&this.bossTimer>=i&&Math.random()<t.bossChance&&(this.bossTimer=0,this.spawnBossBird()),btState.currentLevel>=DEMON_CONFIG.minLevel&&(this.demonTimer+=e,this.demonTimer>=15)){this.demonTimer=0;const e=DEMON_CONFIG.spawnChance+.05*(btState.currentLevel-3);Math.random()<e&&this.spawnDemon()}btState.vehicleHelperTimer=(btState.vehicleHelperTimer||0)+e,btState.vehicleHelperTimer>=30&&(btState.vehicleHelperTimer=0,this.spawnOwnedVehicleHelper()),this.birdHelperTimer||(this.birdHelperTimer=0),this.birdHelperTimer+=e,this.birdHelperTimer>=20&&(this.birdHelperTimer=0,this.spawnOwnedBirdHelper()),btState.hasCoinMagnet&&this.attractCoinsToPlayer()}spawnOwnedVehicleHelper(){const e=this.cameras.main.worldView,t=[];if(btState.hasHelicopter&&t.push("helicopter"),btState.hasTank&&t.push("tank"),btState.hasJeep&&t.push("jeep"),btState.hasTruck&&t.push("truck"),btState.hasATV&&t.push("atv"),btState.hasDirtbike&&t.push("dirtbike"),0===t.length)return;const a=t[Math.floor(Math.random()*t.length)],i=Math.random()>.5,s=i?e.left-100:e.right+100;"helicopter"===a?this.spawnHelperHelicopter(s,i):"tank"===a?this.spawnHelperTank(s,i):"jeep"===a?this.spawnHelperJeep(s,i):this.spawnHelperGroundVehicle(a,s,i),this.showNotification(`üöó Your ${a.toUpperCase()} is helping!`,2278750)}spawnHelperHelicopter(e,t){const a=this.add.sprite(e,60,"helicopter").setDepth(15);a.setScale(.12),a.setFlipX(!t),a.isHelper=!0,a.setTint(2278750),this.tweens.add({targets:a,x:t?this.cameras.main.worldView.right+100:this.cameras.main.worldView.left-100,duration:8e3,onUpdate:()=>{Math.random()<.02&&a.active&&this.helperShootNearestBird(a)},onComplete:()=>a.destroy()})}spawnHelperTank(e,t){const a=this.add.rectangle(e,this.groundY-25,80,40,2278750).setDepth(8);a.isHelper=!0;const i=this.add.rectangle(e+(t?30:-30),this.groundY-35,40,10,1467700).setDepth(9);this.tweens.add({targets:[a,i],x:t?"+=800":"-=800",duration:1e4,onUpdate:()=>{i.x=a.x+(t?30:-30),Math.random()<.015&&a.active&&this.helperShootNearestBird(a,!0)},onComplete:()=>{a.destroy(),i.destroy()}})}spawnHelperJeep(e,t){const a=this.add.rectangle(e,this.groundY-20,60,30,2278750).setDepth(8);a.isHelper=!0,this.tweens.add({targets:a,x:t?"+=700":"-=700",duration:6e3,onUpdate:()=>{Math.random()<.03&&a.active&&this.helperShootNearestBird(a)},onComplete:()=>a.destroy()})}spawnHelperGroundVehicle(e,t,a){const i=this.add.rectangle(t,this.groundY-15,50,25,2278750).setDepth(8);i.isHelper=!0,this.tweens.add({targets:i,x:a?"+=600":"-=600",duration:8e3,onComplete:()=>i.destroy()}),this.helperVehicles||(this.helperVehicles=[]),this.helperVehicles.push(i)}helperShootNearestBird(e,t=!1){if(!this.birds||0===this.birds.getChildren().length)return;let a=null,i=400;if(this.birds.getChildren().forEach(t=>{if(!t||!t.active)return;const s=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);s<i&&(i=s,a=t)}),a){const i=this.add.circle(e.x,e.y,4,2278750).setDepth(20);this.tweens.add({targets:i,x:a.x,y:a.y,duration:150,onComplete:()=>{if(i.destroy(),a&&a.active){const e=Math.floor(.5*(a.points||5));btState.score+=e,btState.kills++,this.showPointIndicator(a.x,a.y,`+${e} HELPER!`,2278750),a.destroy(),t&&this.birds.getChildren().forEach(e=>{e&&e.active&&Phaser.Math.Distance.Between(a.x,a.y,e.x,e.y)<80&&(btState.score+=3,btState.kills++,e.destroy())})}}})}}spawnOwnedBirdHelper(){if(0===btState.extraEagles+btState.goldenEagles+(btState.hasFalcon?1:0)+(btState.hasOwlHelper?1:0))return;const e=this.cameras.main.worldView,t=[];for(let e=0;e<btState.extraEagles;e++)t.push("eagle");for(let e=0;e<btState.goldenEagles;e++)t.push("golden_eagle");btState.hasFalcon&&t.push("falcon"),btState.hasOwlHelper&&t.push("owl");const a=t[Math.floor(Math.random()*t.length)],i=e.right+50,s=50+100*Math.random(),o=this.add.circle(i,s,15,"golden_eagle"===a?16766720:2278750).setDepth(12);o.isHelper=!0;this.tweens.add({targets:o,x:e.left-50,y:{value:s+50*Math.sin(.01*Date.now()),duration:500,yoyo:!0,repeat:-1},duration:6e3,onUpdate:()=>{Math.random()<.05&&o.active&&this.helperShootNearestBird(o)},onComplete:()=>o.destroy()});this.showNotification(`ü¶Ö Your ${a.toUpperCase()} is attacking birds!`,2278750)}attractCoinsToPlayer(){this.coins&&this.hunter&&this.coins.getChildren().forEach(e=>{if(!e||!e.active)return;if(Phaser.Math.Distance.Between(this.hunter.x,this.hunter.y,e.x,e.y)<200){const t=Phaser.Math.Angle.Between(e.x,e.y,this.hunter.x,this.hunter.y);e.x+=5*Math.cos(t),e.y+=3*Math.sin(t)}})}spawnDemon(){const e=this.cameras.main.worldView.right+100,t=80+100*Math.random();let a;btState.silentMode||this.showDemonScripture();if(this.textures.exists("demon_fly"))a=this.add.sprite(e,t,"demon_fly").setScale(.15),this.anims.exists("demon_fly_anim")||this.anims.create({key:"demon_fly_anim",frames:this.anims.generateFrameNumbers("demon_fly",{start:0,end:3}),frameRate:10,repeat:-1}),a.play("demon_fly_anim"),a.isAnimatedSprite=!0,this.physics.world.enable(a);else{a=this.add.container(e,t);const i=this.add.circle(0,0,25,6684672),s=this.add.triangle(-15,-20,0,0,5,-15,10,0,3342336),o=this.add.triangle(15,-20,0,0,5,-15,10,0,3342336),n=this.add.circle(-8,-5,5,16711680),r=this.add.circle(8,-5,5,16711680),h=this.add.rectangle(0,10,20,5,0);a.add([i,s,o,n,r,h]),a.isAnimatedSprite=!1,this.physics.world.enable(a)}a.health=DEMON_CONFIG.health,a.direction=-1,a.lieTimer=0,a.isDemon=!0,a.demonScale=.15,a.setDepth(12),this.demons.add(a),this.showNotification("üòà DEMON APPROACHES! Use Bible (B) to defeat!",16729156)}playDemonAttack(e){e&&e.active&&e.isAnimatedSprite&&(this.anims.exists("demon_attack_anim")||this.textures.exists("demon_attack")&&this.anims.create({key:"demon_attack_anim",frames:this.anims.generateFrameNumbers("demon_attack",{start:0,end:3}),frameRate:12,repeat:0}),this.anims.exists("demon_attack_anim")&&(e.play("demon_attack_anim"),e.once("animationcomplete",()=>{e.active&&!e.fleeing&&e.play("demon_fly_anim")})))}playDemonHit(e){e&&e.active&&e.isAnimatedSprite&&(this.anims.exists("demon_hit_anim")||this.textures.exists("demon_hit")&&this.anims.create({key:"demon_hit_anim",frames:this.anims.generateFrameNumbers("demon_hit",{start:0,end:3}),frameRate:12,repeat:0}),this.anims.exists("demon_hit_anim")&&(e.play("demon_hit_anim"),e.once("animationcomplete",()=>{e.active&&!e.fleeing&&e.play("demon_fly_anim")})))}playDemonFlee(e){if(e&&e.active&&(e.isAnimatedSprite&&(this.anims.exists("demon_flee_anim")||this.textures.exists("demon_flee")&&this.anims.create({key:"demon_flee_anim",frames:this.anims.generateFrameNumbers("demon_flee",{start:0,end:8}),frameRate:10,repeat:-1}),this.anims.exists("demon_flee_anim")&&(e.play("demon_flee_anim"),e.setFlipX(!0))),!btState.silentMode)){const e=DEMON_FLEE_SCRIPTURES[Math.floor(Math.random()*DEMON_FLEE_SCRIPTURES.length)];this.showScripturePopup(e,2278750,4e3)}}updateDemons(e){this.demons&&(this.demons.getChildren().forEach(t=>{if(!t||!t.active)return;const a=this.cameras.main.worldView;btState.angelProtectionActive&&!t.fleeing&&(t.fleeing=!0,t.direction=1,this.playDemonFlee(t));const i=t.fleeing?2*DEMON_CONFIG.speed:DEMON_CONFIG.speed;t.x+=i*t.direction*e;const s=t.fleeing?2:.5;t.y+=Math.sin(this.time.now/300)*s,t.fleeing||(t.lieTimer+=e,t.lieTimer>=DEMON_CONFIG.lieInterval&&(t.lieTimer=0,this.playDemonAttack(t),this.throwLie(t.x,t.y))),(t.x<a.x-100||t.x>a.right+200)&&(t.fleeing&&this.showVictoryScripture(),t.destroy())}),this.updateDemonLies(e))}showDemonFlee(e){this.showNotification("üòà‚û°Ô∏è DEMON FLEES FROM THE ANGEL! üòá",16766720);const t=DEMON_SCRIPTURES[Math.floor(Math.random()*DEMON_SCRIPTURES.length)];this.showScripturePopup(t,4521796),e.setTint&&e.setTint(8947848),this.tweens.add({targets:e,scaleX:.7,scaleY:.7,duration:500}),this.showPointIndicator(e.x,e.y-30,"üò± NOOO!",16711680)}throwLie(e,t){const a=DEMON_LIES[Math.floor(Math.random()*DEMON_LIES.length)],i=this.add.container(e,t),s=this.add.rectangle(0,0,8*a.length+20,24,3342336,.9).setStrokeStyle(2,16711680),o=this.add.text(0,0,a,{fontSize:"12px",fontStyle:"bold",color:"#ff4444"}).setOrigin(.5);i.add([s,o]),i.setDepth(13),this.physics.world.enable(i),i.body.setVelocity(Phaser.Math.Between(-50,50),DEMON_CONFIG.lieSpeed),i.isLie=!0,i.lieText=a,this.demonLies.add(i)}updateDemonLies(e){this.demonLies&&this.demonLies.getChildren().forEach(e=>{if(e&&e.active){if(this.hunter&&this.hunter.active){if(Phaser.Math.Distance.Between(e.x,e.y,this.hunter.x,this.hunter.y)<40)return void this.onLieHit(e)}e.y>this.groundY+50&&e.destroy()}})}onLieHit(e){if(btState.angelProtectionActive){const t=ANGEL_PROTECTION[btState.angelProtectionLevel];if(Math.random()<t.turdBlock)return this.showPointIndicator(e.x,e.y,"üòá LIE BLOCKED!",16766720),void e.destroy()}const t=DEMON_CONFIG.lieDamage;btState.health-=t,this.showPointIndicator(this.hunter.x,this.hunter.y-30,`${e.lieText}`,16729156),this.showNotification("üòà DEMON LIE HIT YOU! -"+t+" HP",16729156),this.cameras.main.shake(100,.01),e.destroy(),btState.health<=0&&(btState.health=0,this.triggerDeathAnimation("demon"))}checkDemonHit(e){if(!this.demons)return!1;let t=!1;return this.demons.getChildren().forEach(a=>{if(!a||!a.active)return;if(Phaser.Math.Distance.Between(e.x,e.y,a.x,a.y)<45){const i=e.damage||1;a.health-=i,this.showPointIndicator(a.x,a.y,`-${i}`,16776960);const s=Math.max(0,a.health/DEMON_CONFIG.health);this.showPointIndicator(a.x,a.y+30,`HP: ${"‚ñà".repeat(Math.ceil(8*s))}${"‚ñë".repeat(8-Math.ceil(8*s))}`,16729156),a.health<=0&&this.onDemonKilled(a),t=!0}}),this.demonLies&&this.demonLies.getChildren().forEach(a=>{if(!a||!a.active)return;Phaser.Math.Distance.Between(e.x,e.y,a.x,a.y)<30&&(btState.score+=25,this.showPointIndicator(a.x,a.y,"+25 TRUTH WINS!",2278750),a.destroy(),t=!0)}),t}updateVillains(e){if(!this.villains)return;const t=btState.currentLevel||1,a=VILLAIN_CONFIG.levelMultipliers[t]||{chance:0,interval:999},i=a.chance,s=a.interval;if(this.villainSpawnTimer+=e,this.villainSpawnTimer>=s&&(this.villainSpawnTimer=0,t>=VILLAIN_CONFIG.minLevel&&Math.random()<i)){if(this.spawnVillain(),7===t&&Math.random()<.35){const e=SWAMP_MESSAGES[Math.floor(Math.random()*SWAMP_MESSAGES.length)];this.showNotification(e,16729156)}if(8===t&&Math.random()<.25){const e=WHITEHOUSE_SWAMP_MESSAGES[Math.floor(Math.random()*WHITEHOUSE_SWAMP_MESSAGES.length)];this.showNotification(e,16729156)}}if(7===t&&!this.swampWaveTriggered){this.swampWaveTriggered=!0,this.showNotification("WELCOME TO THE SWAMP!",4873507),this.showNotification("DRAIN THE SWAMP FROM THESE WOKE TURD GLOBALISTS!",16711680),this.showNotification("STOP THEM FROM GETTING TO THE WHITE HOUSE!",16766720),this.showNotification("PRESS E TO ARREST FOR BIG POINTS!",2278750),this.showScripturePopup({verse:"When the righteous thrive, the people rejoice; when the wicked rule, the people groan.",ref:"Proverbs 29:2"},16766720);for(let e=0;e<8;e++)this.time.delayedCall(600*e,()=>this.spawnVillain())}8!==t||this.whiteHouseIntroTriggered||(this.whiteHouseIntroTriggered=!0,this.showNotification("YOU MADE IT TO THE WHITE HOUSE!",1982639),this.showNotification("CATCH THE STRAGGLERS FROM THE SWAMP!",16766720)),this.villains.getChildren().forEach(a=>{if(!a||!a.active||a.arrested)return;const i=7===t?1.2:1;if(a.x+=a.direction*a.villainSpeed*i*e,a.isAnimatedSprite||(a.y=a.baseY+3*Math.sin(Date.now()/200)),a.titleTag&&(a.titleTag.x=a.x,a.titleTag.y=a.y-60),a.escapeTimer-=e,a.escapeTimer<=0)return this.showNotification("WOKE TURD GLOBALIST ESCAPED!",16729156),a.titleTag&&a.titleTag.destroy(),void a.destroy();const s=this.cameras.main.worldView;if(a.x<s.x-100||a.x>s.right+100)return a.titleTag&&a.titleTag.destroy(),void a.destroy();if(a.lastTurdShot=(a.lastTurdShot||0)+e,a.lastTurdShot>=a.turdCooldown&&(a.lastTurdShot=0,a.turdCooldown=2+3*Math.random(),this.hunter&&Phaser.Math.Distance.Between(a.x,a.y,this.hunter.x,this.hunter.y)<300&&this.globalistShootTurd(a)),7===t&&Math.random()<.002){const e=a.globalistQuotes||GLOBALIST_QUOTES,t=e[Math.floor(Math.random()*e.length)];this.showVillainQuote(a,t)}})}spawnVillain(){const e=this.cameras.main.worldView,t=WOKE_GLOBALIST_TYPES[Math.floor(Math.random()*WOKE_GLOBALIST_TYPES.length)],a=t.type,i=Math.random()>.5,s=i?e.x-50:e.right+50,o=this.groundY-50,n=`globalist_${a}_walk`;let r;const h={1:.15,2:.2,3:.15,4:.17}[a]||.15;if(this.textures.exists(n)){r=this.add.sprite(s,o,n).setScale(h);const e=`globalist_${a}_walk_anim`;if(!this.anims.exists(e)){const t=this.textures.get(n).frameTotal-1;this.anims.create({key:e,frames:this.anims.generateFrameNumbers(n,{start:0,end:Math.max(0,t-1)}),frameRate:8,repeat:-1})}r.play(e),r.isAnimatedSprite=!0}else r=this.add.container(s,o),this.drawCartoonGlobalist(r,t),r.isAnimatedSprite=!1;const l=this.add.text(s,o-50,t.title,{fontSize:"11px",fontStyle:"bold",color:"#ff4444",backgroundColor:"rgba(0,0,0,0.85)",padding:{x:5,y:3}}).setOrigin(.5).setDepth(15);r.titleTag=l,r.setDepth(12),this.physics.world.enable(r),r.body&&(r.body.setSize(40,60),r.body.setOffset(-20,-30)),r.globalistType=a,r.globalistConfig=t,r.globalistTitle=t.title,r.villainPoints=t.points,r.villainCoins=t.coins,r.villainSpeed=t.speed,r.direction=i?1:-1,r.baseY=o,r.escapeTimer=VILLAIN_CONFIG.escapeTime,r.arrested=!1,r.isGlobalist=!0,r.lastTurdShot=0,r.turdCooldown=3+4*Math.random(),r.globalistQuotes=t.quotes||GLOBALIST_QUOTES,r.spriteScale=h,i||(r.setFlipX?r.setFlipX(!0):r.setScale&&r.setScale(-h,h)),this.villains.add(r);const d=SPIRITUAL_WARFARE_SCRIPTURES[Math.floor(Math.random()*SPIRITUAL_WARFARE_SCRIPTURES.length)];this.showNotification(`${t.title.toUpperCase()} SPOTTED! Press E to ARREST!`,16729156),this.shownSwampScripture||7!==btState.currentLevel||(this.shownSwampScripture=!0,this.time.delayedCall(500,()=>{this.showScripturePopup(d,16766720)})),this.time.delayedCall(2e3+2e3*Math.random(),()=>{if(r&&r.active&&!r.arrested){const e=r.globalistQuotes,t=e[Math.floor(Math.random()*e.length)];this.showVillainQuote(r,t)}})}globalistShootTurd(e){if(!e||!e.active||e.arrested||!this.hunter)return;const t=e.x,a=e.y-20,i=this.add.text(t,a,"üí©",{fontSize:"24px"}).setOrigin(.5).setDepth(50),s=this.hunter.x-t,o=this.hunter.y-30-a,n=Math.sqrt(s*s+o*o),r=s/n*200,h=o/n*200,l={time:0},d=this.time.addEvent({delay:16,callback:()=>{if(l.time+=.016,i.x+=.016*r,i.y+=.016*h,i.angle+=15,this.hunter&&Phaser.Math.Distance.Between(i.x,i.y,this.hunter.x,this.hunter.y-30)<30)return this.globalistTurdHit(i),void d.destroy();(l.time>3||i.y>this.groundY||i.y<0)&&(i.destroy(),d.destroy())},loop:!0})}globalistTurdHit(e){if(!this.hunter)return;this.showNotification("WOKE TURD HIT! Globalist got you!",9127187),btState.turdMeter+=8,btState.turdCount++;const t=this.add.text(this.hunter.x,this.hunter.y-50,"üí© SPLAT!",{fontSize:"16px",color:"#8B4513",fontStyle:"bold"}).setOrigin(.5).setDepth(100);this.tweens.add({targets:t,y:t.y-30,alpha:0,duration:1e3,onComplete:()=>t.destroy()}),e.destroy(),btState.turdMeter>=btState.maxTurdMeter&&this.triggerTurdDeath()}drawCartoonGlobalist(e,t){const a=this.add.ellipse(0,0,35,50,t.bodyColor).setStrokeStyle(2,0),i=this.add.circle(0,-35,18,t.headColor).setStrokeStyle(2,0),s=this.add.circle(-6,-38,4,16777215).setStrokeStyle(1,0),o=this.add.circle(6,-38,4,16777215).setStrokeStyle(1,0),n=this.add.circle(-5,-38,2,0),r=this.add.circle(7,-38,2,0),h=this.add.graphics();h.lineStyle(2,0),h.beginPath(),h.moveTo(-6,-28),h.quadraticCurveTo(0,-24,6,-28),h.strokePath();const l=this.add.rectangle(-6,-45,8,2,t.hairColor||3355443).setAngle(-10),d=this.add.rectangle(6,-45,8,2,t.hairColor||3355443).setAngle(10);e.add([a,i,s,o,n,r,h,l,d]),this.drawGlobalistHair(e,t),this.drawGlobalistAccessory(e,t);const c=this.add.polygon(0,-10,[[0,-12],[6,12],[-6,12]],16711680).setStrokeStyle(1,8912896);e.add(c)}drawGlobalistHair(e,t){const a=t.hairColor||3355443;switch(t.hairStyle){case"bald":const t=this.add.circle(-3,-50,4,16777215,.3);e.add(t);break;case"combover":const i=this.add.ellipse(-5,-50,20,8,a).setAngle(-20);e.add(i);break;case"wavy":for(let t=-12;t<=12;t+=6){const i=this.add.circle(t,2*Math.sin(t/3)-52,5,a);e.add(i)}break;case"slick":const s=this.add.ellipse(0,-50,22,10,a);e.add(s);break;case"curly":for(let t=0;t<8;t++){const i=this.add.circle(3*t-10,t%2*3-50,4,a);e.add(i)}break;case"ponytail":const o=this.add.ellipse(0,-50,18,8,a),n=this.add.ellipse(12,-45,6,15,a).setAngle(30);e.add([o,n]);break;case"mohawk":for(let t=0;t<5;t++){const i=this.add.triangle(0,-55-3*t,-4,5,4,5,0,-5,a);e.add(i)}break;case"spiky":for(let t=-10;t<=10;t+=5){const i=this.add.triangle(t,-52,-3,5,3,5,0,-8,a);e.add(i)}break;case"afro":const r=this.add.circle(0,-48,22,a);e.add(r);break;case"parted":const h=this.add.ellipse(-8,-50,12,8,a),l=this.add.ellipse(8,-50,12,8,a);e.add([h,l]);break;case"messy":for(let t=0;t<10;t++){const t=this.add.circle(Phaser.Math.Between(-12,12),Phaser.Math.Between(-55,-48),4,a);e.add(t)}break;case"bowlcut":const d=this.add.ellipse(0,-48,24,12,a);e.add(d);break;case"bun":const c=this.add.ellipse(0,-50,18,6,a),u=this.add.circle(0,-58,8,a);e.add([c,u]);break;case"flat":const p=this.add.rectangle(0,-52,24,8,a);e.add(p);break;case"hipster":const m=this.add.ellipse(0,-50,20,8,a),g=this.add.rectangle(-14,-42,4,12,a);e.add([m,g]);break;case"dyed":for(let t=-10;t<=10;t+=4){const i=this.add.circle(t,-52,5,a);e.add(i)}break;case"punk":const y=this.add.ellipse(0,-50,20,6,a);for(let t=-8;t<=8;t+=4){const i=this.add.triangle(t,-55,-2,4,2,4,0,-10,a);e.add(i)}e.add(y);break;case"shaved":const f=this.add.ellipse(0,-50,20,6,a).setAlpha(.5);e.add(f);break;case"wild":for(let t=0;t<12;t++){const i=t/12*Math.PI*2,s=this.add.circle(14*Math.cos(i),8*Math.sin(i)-48,5,a);e.add(s)}break;default:const b=this.add.ellipse(0,-50,18,8,a);e.add(b)}}drawGlobalistAccessory(e,t){switch(t.accessory){case"glasses":const t=this.add.circle(-6,-38,6,0,0).setStrokeStyle(2,0),a=this.add.circle(6,-38,6,0,0).setStrokeStyle(2,0),i=this.add.rectangle(0,-38,6,2,0);e.add([t,a,i]);break;case"sunglasses":const s=this.add.ellipse(-6,-38,8,6,0),o=this.add.ellipse(6,-38,8,6,0),n=this.add.rectangle(0,-38,4,2,0);e.add([s,o,n]);break;case"monocle":const r=this.add.circle(6,-38,7,0,0).setStrokeStyle(2,16766720),h=this.add.rectangle(10,-30,1,12,16766720);e.add([r,h]);break;case"bowtie":const l=this.add.triangle(-5,-15,0,0,8,4,8,-4,16711680),d=this.add.triangle(5,-15,0,0,-8,4,-8,-4,16711680),c=this.add.circle(0,-15,3,11141120);e.add([l,d,c]);break;case"earpiece":const u=this.add.rectangle(14,-38,3,8,2236962),p=this.add.rectangle(14,-28,1,15,2236962);e.add([u,p]);break;case"scarf":const m=this.add.rectangle(0,-18,30,6,8930304),g=this.add.rectangle(12,-10,6,12,8930304);e.add([m,g]);break;case"gold_chain":const y=this.add.ellipse(0,-8,20,8,0,0).setStrokeStyle(3,16766720);e.add(y);break;case"headset":const f=this.add.ellipse(0,-50,26,12,0,0).setStrokeStyle(3,3355443),b=this.add.rectangle(-14,-35,3,10,3355443),S=this.add.circle(-14,-28,4,3355443);e.add([f,b,S]);break;case"clipboard":const w=this.add.rectangle(18,-5,10,14,8939076).setStrokeStyle(1,0),T=this.add.rectangle(18,-3,8,10,16777215);e.add([w,T]);break;case"badge":const x=this.add.rectangle(-12,-5,8,10,16766720).setStrokeStyle(1,0);e.add(x);break;case"labcoat":const k=this.add.rectangle(0,5,40,20,16777215,.7).setStrokeStyle(1,13421772);e.add(k);break;case"lanyard":const A=this.add.rectangle(0,-5,2,25,255),v=this.add.rectangle(0,12,10,14,16777215).setStrokeStyle(1,0);e.add([A,v]);break;case"phone":const C=this.add.rectangle(16,-35,6,10,2236962).setStrokeStyle(1,0);e.add(C);break;case"mic":const E=this.add.rectangle(16,-30,3,15,3355443),R=this.add.circle(16,-40,5,4473924);e.add([E,R]);break;case"camera":const M=this.add.rectangle(16,-35,12,8,2236962).setStrokeStyle(1,0),I=this.add.circle(16,-35,3,4473924);e.add([M,I]);break;case"tablet":const O=this.add.rectangle(16,-30,10,14,3355443).setStrokeStyle(1,0),V=this.add.rectangle(16,-30,8,11,4491519);e.add([O,V]);break;case"vr_headset":const P=this.add.rectangle(0,-38,20,10,2236962),D=this.add.ellipse(0,-42,26,8,0,0).setStrokeStyle(2,3355443);e.add([P,D]);break;case"pin":const B=this.add.circle(-10,-8,4,16711680).setStrokeStyle(1,16766720);e.add(B)}}showVillainQuote(e,t){if(!e||!e.active)return;const a=this.add.container(e.x,e.y-90),i=this.add.rectangle(0,0,5*t.length+20,30,0,.8).setStrokeStyle(2,16729156),s=this.add.text(0,0,`"${t}"`,{fontSize:"10px",color:"#ffffff",fontStyle:"italic"}).setOrigin(.5);a.add([i,s]),a.setDepth(100),this.tweens.add({targets:a,y:a.y-30,alpha:0,duration:3e3,onComplete:()=>a.destroy()})}tryArrestGlobalist(){if(!this.hunter||this.gameOver)return;let e=null,t=VILLAIN_CONFIG.arrestRange;if(this.villains.getChildren().forEach(a=>{if(!a||!a.active||a.arrested)return;const i=Phaser.Math.Distance.Between(this.hunter.x,this.hunter.y,a.x,a.y);i<t&&(t=i,e=a)}),e)this.arrestGlobalist(e);else{this.villains.getChildren().some(e=>e&&e.active&&!e.arrested)&&this.showNotification("Get closer to arrest! Press E when near!",16755200)}}arrestGlobalist(e){if(!e||e.arrested)return;e.arrested=!0,this.arrestedCount++,e.body&&e.body.setVelocity(0,0);const t=ARREST_QUOTES[Math.floor(Math.random()*ARREST_QUOTES.length)];btState.score+=e.villainPoints,this.addCoins(e.villainCoins,"Villain arrested!"),this.showNotification(`${t} +${e.villainPoints} pts!`,2278750),this.showPointIndicator(e.x,e.y-30,`+${e.villainPoints}`,16766720);const a=GLOBALIST_QUOTES[Math.floor(Math.random()*GLOBALIST_QUOTES.length)];this.showVillainQuote(e,a);const i=this.add.text(e.x,e.y-20,"ARRESTED!",{fontSize:"14px",fontStyle:"bold",color:"#ff0000",backgroundColor:"#ffffff",padding:{x:4,y:2}}).setOrigin(.5).setDepth(101);let s=0;const o=setInterval(()=>{if(s>=10)return void clearInterval(o);const t=s%2==0?16711680:255;e.list.forEach(e=>{e.setTint&&e.setTint(t)}),s++},150);if(this.playSound("powerup"),this.time.delayedCall(1500,()=>{i.destroy(),this.showJailCell(e)}),this.arrestedCount>=3&&this.arrestedCount%3==0&&(this.showNotification(`SWAMP DRAINER BONUS! ${this.arrestedCount} arrested! +500 pts`,16766720),btState.score+=500),7===btState.currentLevel){const t=300;btState.score+=t,this.addCoins(15,"Swamp drained!"),this.showPointIndicator(e.x,e.y-80,`SWAMP BONUS +${t}!`,4873507),this.swampArrests||(this.swampArrests=0),this.swampArrests++,5===this.swampArrests?(this.showNotification("SWAMP 25% DRAINED! Keep going patriot!",16766720),btState.score+=500):10===this.swampArrests?(this.showNotification("SWAMP 50% DRAINED! Halfway there!",16766720),btState.score+=1e3):15===this.swampArrests?(this.showNotification("SWAMP 75% DRAINED! Almost clean!",16766720),btState.score+=1500):20===this.swampArrests&&(this.showNotification("MASTER SWAMP DRAINER! SWAMP IS CLEAN! +3000!",16766720),btState.score+=3e3,this.createLevelCompleteFireworks())}if(8===btState.currentLevel){const t=200;btState.score+=t,this.addCoins(10,"White House!"),this.showPointIndicator(e.x,e.y-80,`WHITE HOUSE BONUS +${t}!`,1982639)}}showJailCell(e){const t=e.x,a=this.groundY-60,i=this.add.container(t,a),s=4473924;for(let e=-30;e<=30;e+=15){const t=this.add.rectangle(e,0,4,80,s);i.add(t)}const o=this.add.rectangle(0,-40,70,6,s),n=this.add.rectangle(0,40,70,6,s);i.add([o,n]);const r=this.add.text(0,-55,"JAIL",{fontSize:"12px",fontStyle:"bold",color:"#ffffff",backgroundColor:"#ff0000",padding:{x:6,y:3}}).setOrigin(.5);i.add(r),i.setDepth(99),this.tweens.add({targets:e,x:t,y:a,scale:.5,alpha:.8,duration:500}),this.time.delayedCall(1500,()=>{this.showNotification("OFF TO JAIL! DRAINING THE SWAMP!",16766720),this.tweens.add({targets:[i,e],y:"-=300",alpha:0,duration:2e3,ease:"Power1",onComplete:()=>{i.destroy(),e.destroy()}})})}spawnBirdWave(){const e=this.cameras.main.worldView,t=this.currentScene&&this.currentScene.night;btState.currentLevel;let a=Object.keys(speciesConfig).filter(e=>{const a=speciesConfig[e];return!a.boss&&!a.groundBird&&!(a.nightOnly&&!t)});const i=1+Math.floor(3*Math.random()),s=Math.min(5,i+Math.floor(btState.currentLevel/2));for(let t=0;t<s;t++){const i=a[Math.floor(Math.random()*a.length)],s=speciesConfig[i];if(!s||!this.textures.exists(s.sprite))continue;const o=Math.random()<.2,n=o?e.x-100-60*t:e.right+100+60*t,r=100+150*Math.random(),h=o?1:-1,l=.9+.2*Math.random(),d=2*s.size*l,c=this.birds.create(n,r,s.sprite).setOrigin(.5).setScale(d).setFlipX(h>0).setDepth(5+5*l);c.config=s,c.direction=h,c.speed=s.speed+30*Math.random(),c.turdCooldown=.5+1*Math.random(),c.phase=Math.random()*Math.PI*2,c.flapPhase=Math.random()*Math.PI*2,c.health=s.health||1,c.depthScale=l,c.body.setAllowGravity(!1)}}spawnBossBird(){const e=this.cameras.main.worldView,t=speciesConfig.pterodactyl;if(!t||!this.textures.exists(t.sprite))return;const a=Math.random()<.5,i=2.5*t.size,s=this.birds.create(a?e.x-200:e.right+200,100,t.sprite).setOrigin(.5).setScale(i).setFlipX(a).setDepth(20);s.config=t,s.direction=a?1:-1,s.speed=t.speed,s.turdCooldown=.5,s.phase=0,s.flapPhase=0,s.health=t.health||1,s.isBoss=!0,s.body.setAllowGravity(!1),this.showNotification("‚ö†Ô∏è BOSS: PTERODACTYL! (Buy others in Shop!)")}releaseAllBossesAtWhiteHouse(){if(!btState.whiteHouseBossesReleased){if(btState.whiteHouseBossesReleased=!0,this.showNotification("ü¶Ö‚ö†Ô∏è ALL BOSS BIRDS RELEASED! PROTECT TRUMP! ‚ö†Ô∏èü¶Ö",16711680),this.cameras.main.shake(500,.02),!btState.silentMode){const e={verse:"The battle is not yours, but God's!",ref:"2 Chronicles 20:15"};this.time.delayedCall(1e3,()=>{this.showScripturePopup(e,16766720,5e3)})}ALL_BOSS_BIRDS.forEach((e,t)=>{this.time.delayedCall(2e3*t,()=>{this.spawnWhiteHouseBoss(e,t)})})}}spawnWhiteHouseBoss(e,t){const a=this.cameras.main.worldView,i=DIFFICULTY_MODES[btState.difficulty]||DIFFICULTY_MODES.intermediate,s=e.key;if(!this.textures.exists(s))return void console.log(`Boss sprite ${s} not found, using fallback`);const o=t%2==0,n=o?a.x-300:a.right+300,r=50+30*t%150,h=this.birds.create(n,r,s).setOrigin(.5).setScale(.12*e.size*2).setFlipX(o).setDepth(20);h.health=Math.floor(e.health*i.bossHealth),h.maxHealth=h.health,h.direction=o?1:-1,h.speed=e.speed*i.enemySpeed,h.turdCooldown=1.5,h.phase=0,h.flapPhase=0,h.isBoss=!0,h.isWhiteHouseBoss=!0,h.bossName=e.name,h.bossAbility=e.ability,h.abilityTimer=0,h.body.setAllowGravity(!1),this.createBossHealthBar(h,e.name,e.color),this.showNotification(`ü¶Ö ${e.name.toUpperCase()} ATTACKS! ${e.desc}`,e.color)}createBossHealthBar(e,t,a){const i=this.add.rectangle(e.x,e.y-50,84,12,0).setOrigin(.5).setDepth(25),s=this.add.rectangle(e.x,e.y-50,80,8,a).setOrigin(.5).setDepth(26),o=this.add.text(e.x,e.y-65,t,{fontSize:"10px",fontWeight:"bold",color:"#ffffff",backgroundColor:"rgba(0,0,0,0.8)",padding:{x:4,y:2}}).setOrigin(.5).setDepth(25);e.healthBarBg=i,e.healthBar=s,e.nameTag=o,e.healthBarWidth=80}updateBossHealthBar(e){if(!e.healthBar||!e.active)return;e.healthBarBg.setPosition(e.x,e.y-50),e.healthBar.setPosition(e.x,e.y-50),e.nameTag.setPosition(e.x,e.y-65);const t=e.health/e.maxHealth;e.healthBar.setSize(e.healthBarWidth*t,8),t<.3?e.healthBar.setFillStyle(16711680):t<.6&&e.healthBar.setFillStyle(16755200)}destroyBossHealthBar(e){e.healthBarBg&&e.healthBarBg.destroy(),e.healthBar&&e.healthBar.destroy(),e.nameTag&&e.nameTag.destroy()}onWhiteHouseBossDefeated(e){if(btState.bossesDefeated++,!btState.silentMode){const e=[{verse:"The Lord is my strength and my shield!",ref:"Psalm 28:7"},{verse:"Thanks be to God who gives us the victory!",ref:"1 Corinthians 15:57"},{verse:"Greater is He that is in you!",ref:"1 John 4:4"}],t=e[Math.floor(Math.random()*e.length)];this.showScripturePopup(t,2278750,3e3)}this.showNotification(`‚úÖ ${e.bossName} DEFEATED! (${btState.bossesDefeated}/${btState.totalBossesToDefeat})`,2278750),this.destroyBossHealthBar(e),btState.bossesDefeated>=btState.totalBossesToDefeat&&this.triggerVictory()}triggerVictory(){if(btState.gameWon=!0,this.showNotification("üèÜüá∫üá∏ VICTORY! AMERICA IS SAVED! üá∫üá∏üèÜ",16766720),this.trumpVictoryCelebration(),!btState.silentMode){const e=VICTORY_SCRIPTURES[Math.floor(Math.random()*VICTORY_SCRIPTURES.length)];this.time.delayedCall(2e3,()=>{this.showScripturePopup(e,16766720,8e3)})}}trumpVictoryCelebration(){if(this.trumpNPC&&this.trumpNPC.active){const e=this.trumpNPC.y;this.tweens.add({targets:this.trumpNPC,y:e-20,duration:300,yoyo:!0,repeat:3,ease:"Bounce.easeOut"});const t=this.add.text(this.trumpNPC.x,this.trumpNPC.y-100,"GOD BLESS AMERICA!",{fontSize:"18px",fontWeight:"bold",color:"#ffd700",backgroundColor:"rgba(0,0,0,0.9)",padding:{x:10,y:5}}).setOrigin(.5).setDepth(100);this.time.delayedCall(1500,()=>{const e=this.add.text(this.trumpNPC.x,this.trumpNPC.y-130,'"We will NEVER stop fighting for America!"',{fontSize:"12px",fontStyle:"italic",color:"#ffffff",backgroundColor:"rgba(0,0,0,0.8)",padding:{x:8,y:4}}).setOrigin(.5).setDepth(100);this.tweens.add({targets:[t,e],alpha:0,duration:5e3,delay:5e3})})}}spawnSpecificBoss(e){const t=this.cameras.main.worldView,a=speciesConfig[e];if(!a)return;const i=Math.random()<.5,s=2.5*a.size,o=this.birds.create(i?t.x-200:t.right+200,100,a.sprite||e).setOrigin(.5).setScale(s).setFlipX(i).setDepth(20);o.config=a,o.direction=i?1:-1,o.speed=a.speed,o.turdCooldown=.5,o.phase=0,o.flapPhase=0,o.health=a.health||1,o.isBoss=!0,o.body.setAllowGravity(!1),this.showNotification(`üéØ BOSS SUMMONED: ${e.toUpperCase()}!`),this.cameras.main.shake(300,.015)}spawnVehicle(){const e=this.cameras.main.worldView,t=Math.random()<.5,a=Math.random()<.4,i=t?e.x-200:e.right+200,s=a?"tractor_green":"tractor_red";if(!this.textures.exists(s))return;const o=this.add.ellipse(i,this.groundY+5,80,25,0,.3).setOrigin(.5).setDepth(5),n=this.vehicles.create(i,this.groundY+2,s).setOrigin(.5,1).setScale(.45).setFlipX(t).setDepth(8);n.shadow=o,n.body.setAllowGravity(!1),n.speed=a?80:100+50*Math.random(),n.direction=t?1:-1,n.bouncePhase=Math.random()*Math.PI*2,n.isGoodTractor=a,n.tireHealth=3,a?this.showNotification("üöú‚ú® CLEANUP TRACTOR! Scoops turds & lifts over you!"):(n.setTint(15680580),this.showNotification("üöú‚ö†Ô∏è BAD TRACTOR! Jump over or shoot tires!"))}spawnPhoneZombie(){if(this.phoneZombies||(this.phoneZombies=this.add.group()),this.phoneZombies.getLength()>=PHONE_ZOMBIE_CONFIG.maxOnScreen)return;const e=this.cameras.main.worldView,t=PHONE_ZOMBIE_TYPES[Math.floor(Math.random()*PHONE_ZOMBIE_TYPES.length)],a=Math.random()>.5,i=a?e.x+100+400*Math.random():e.right-100-400*Math.random(),s=this.groundY-10;let o;const n=`zombie_${t.type}`;this.textures.exists(n)?(o=this.add.sprite(i,s,n).setScale(.15).setOrigin(.5,1),o.isAnimatedSprite=!0,o.setFlipX(!a)):(o=this.add.container(i,s),this.drawPhoneZombie(o,t),o.isAnimatedSprite=!1),o.setDepth(10),this.physics.world.enable(o),o.body&&(o.body.setAllowGravity(!1),o.body.setSize(60,100)),o.zombieType=t,o.isPhoneZombie=!0,o.isAwake=!1,o.isHelper=!1,o.wanderDirection=a?1:-1,o.wanderTimer=0,o.quoteTimer=5+5*Math.random(),o.helpTimer=0,this.phoneZombies.add(o),this.time.delayedCall(1e3,()=>{if(o&&o.active&&!o.isAwake){const e=t.quotes[Math.floor(Math.random()*t.quotes.length)];this.showZombieQuote(o,e,8947848)}})}drawPhoneZombie(e,t){const a=t.type.includes("girl")||t.type.includes("woman"),i=t.type.includes("teen"),s=!i,o=s?1.2:1,n=9079434,r=3815994,h=a?5917258:3815994,l=14540253,d=3900150,c=this.add.ellipse(0,35*o,30*o,8*o,0,.3),u=this.add.ellipse(-7*o,25*o,10*o,22*o,r),p=this.add.ellipse(7*o,28*o,10*o,22*o,r),m=this.add.ellipse(-8*o,38*o,12*o,6*o,2763306),g=this.add.ellipse(8*o,40*o,12*o,6*o,2763306),y=this.add.ellipse(2*o,0,28*o,35*o,4868682);y.setAngle(8);const f=this.add.ellipse(-16*o,5*o,8*o,24*o,n);f.setAngle(-10);const b=this.add.ellipse(18*o,-8*o,8*o,26*o,n);b.setAngle(-40);const S=this.add.circle(-18*o,18*o,6*o,n),w=this.add.circle(28*o,-20*o,7*o,n),T=this.add.ellipse(5*o,-28*o,28*o,32*o,n);let x;if(T.setAngle(15),a){x=this.add.ellipse(5*o,-42*o,32*o,18*o,h);const t=this.add.ellipse(-10*o,-25*o,10*o,25*o,h),a=this.add.ellipse(20*o,-22*o,8*o,20*o,h);if(e.add([t,a]),i){const t=this.add.ellipse(20*o,-35*o,10*o,18*o,h);t.setAngle(30),e.add(t)}}else x=this.add.ellipse(5*o,-42*o,26*o,12*o,h);const k=this.add.ellipse(-2*o,-28*o,8*o,10*o,16777215),A=this.add.ellipse(12*o,-26*o,8*o,10*o,16777215),v=this.add.circle(0*o,-26*o,3*o,l),C=this.add.circle(14*o,-24*o,3*o,l);v.zombieEye=!0,C.zombieEye=!0;const E=this.add.ellipse(-2*o,-22*o,10*o,4*o,5592405,.4),R=this.add.ellipse(12*o,-20*o,10*o,4*o,5592405,.4),M=this.add.ellipse(6*o,-14*o,8*o,5*o,3355443),I=30*o,O=-22*o,V=this.add.ellipse(I,O,28*o,32*o,d,.35),P=(this.add.roundedRect,this.add.rectangle(I,O,14*o,24*o,1710618));P.setStrokeStyle(1,3355443);const D=this.add.rectangle(I,O,11*o,19*o,d),B=this.add.rectangle(I,O-5*o,8*o,2*o,16777215,.5),_=this.add.rectangle(I,O,8*o,2*o,16777215,.5),N=this.add.rectangle(I,O+5*o,8*o,2*o,16777215,.5),L=this.add.ellipse(8*o,-25*o,20*o,25*o,d,.15);if(this.tweens.add({targets:V,alpha:{from:.35,to:.55},scaleX:{from:1,to:1.15},scaleY:{from:1,to:1.15},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),i&&a){const t=this.add.circle(18*o,-38*o,4*o,6710886);e.add(t)}if(s&&!a){const t=this.add.triangle(2*o,-8*o,0,0,8,0,4,8,5592405);e.add(t)}e.add([c,u,p,m,g,y,f,S,b,w,x,T,k,A,v,C,E,R,M,L,V,P,D,B,_,N]),e.zombieElements={body:y,head:T,armRight:b,handRight:w,pupil1:v,pupil2:C,eyeBag1:E,eyeBag2:R,phone:P,phoneScreen:D,phoneGlow:V,faceGlow:L,screenLine1:B,screenLine2:_,screenLine3:N,hair:x};const H=this.add.text(0,-65*o,"üì± "+t.name,{fontSize:"10px",color:"#888888",fontStyle:"bold",backgroundColor:"rgba(0,0,0,0.85)",padding:{x:5,y:3}}).setOrigin(.5);e.add(H),e.nameTag=H,e.isFemale=a,e.isTeen=i,e.baseScale=o}showZombieQuote(e,t,a=8947848){if(!e||!e.active)return;const i=this.add.text(e.x,e.y-70,t,{fontSize:"10px",color:8947848===a?"#888888":"#22c55e",backgroundColor:"rgba(0,0,0,0.8)",padding:{x:6,y:4},wordWrap:{width:120}}).setOrigin(.5).setDepth(20);this.tweens.add({targets:i,y:i.y-20,alpha:0,duration:3e3,onComplete:()=>i.destroy()})}spawnBiblePickup(){if(this.biblePickups||(this.biblePickups=this.add.group()),this.biblePickups.getLength()>=BIBLE_PICKUP_CONFIG.maxOnScreen)return;const e=this.cameras.main.worldView,t=e.x+200+Math.random()*(e.width-400),a=this.groundY-5;let i;if(this.textures.exists("bible_pickup"))i=this.add.sprite(t,a,"bible_pickup").setScale(.08);else{i=this.add.container(t,a);const e=this.add.rectangle(0,0,20,25,9127187).setOrigin(.5),s=this.add.text(0,0,"‚úù",{fontSize:"14px",color:"#ffd700"}).setOrigin(.5),o=this.add.circle(0,0,20,BIBLE_PICKUP_CONFIG.glowColor,.3);i.add([o,e,s])}if(i.setDepth(8),i.isBiblePickup=!0,this.tweens.add({targets:i,y:a-8,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),"Container"===i.type){const e=i.list[0];this.tweens.add({targets:e,alpha:.6,scaleX:1.3,scaleY:1.3,duration:800,yoyo:!0,repeat:-1})}this.biblePickups.add(i),btState.silentMode||this.showNotification("üìñ BIBLE appeared! Pick it up to wake people!",16766720)}pickupBible(e){e&&e.active&&(btState.biblesHeld=(btState.biblesHeld||0)+1,e.destroy(),this.showNotification(`üìñ BIBLE COLLECTED! (${btState.biblesHeld} held) - Give to phone zombies!`,16766720),this.updateBibleCount())}updateBibleCount(){this.bibleCountText&&this.bibleCountText.setText(`üìñ ${btState.biblesHeld||0}`)}wakeUpZombie(e){if(!e||!e.active||e.isAwake)return;if(!btState.biblesHeld||btState.biblesHeld<=0)return void this.showNotification("üìñ No Bibles! Find one on the ground first!",16737894);btState.biblesHeld--,this.updateBibleCount(),e.isAwake=!0,btState.zombiesAwakened=(btState.zombiesAwakened||0)+1;const t=`person_${e.zombieType.type}`;this.textures.exists(t)&&e.isAnimatedSprite?this.tweens.add({targets:e,alpha:0,duration:150,yoyo:!0,onYoyo:()=>{e.setTexture(t),e.setScale(.15),this.tweens.add({targets:e,scaleX:.18,scaleY:.18,duration:200,yoyo:!0,ease:"Bounce.easeOut"});const a=this.add.circle(e.x,e.y-40,60,16766720,.3).setDepth(9);this.tweens.add({targets:a,alpha:0,scaleX:2,scaleY:2,duration:1e3,onComplete:()=>a.destroy()})}}):e.isAnimatedSprite||this.transformDrawnZombie(e),btState.score+=PHONE_ZOMBIE_CONFIG.pointsForWaking,this.addCoins(PHONE_ZOMBIE_CONFIG.coinsForWaking);const a=e.zombieType.wokenQuotes[Math.floor(Math.random()*e.zombieType.wokenQuotes.length)];this.showZombieQuote(e,a,2278750);const i=this.add.text(e.x,e.y-80,"‚úù SOUL AWAKENED!",{fontSize:"14px",fontWeight:"bold",color:"#22c55e",stroke:"#000000",strokeThickness:3}).setOrigin(.5).setDepth(85);if(this.tweens.add({targets:i,y:e.y-140,alpha:0,duration:2e3,ease:"Power2",onComplete:()=>i.destroy()}),!btState.silentMode){const e=WAKEUP_SCRIPTURES[Math.floor(Math.random()*WAKEUP_SCRIPTURES.length)];this.showScriptureInBanner(e,"wake"),btState.zombiesAwakened%3==0&&this.time.delayedCall(7e3,()=>{const e=RAPTURE_SCRIPTURES[Math.floor(Math.random()*RAPTURE_SCRIPTURES.length)];this.showScriptureInBanner(e,"rapture")}),btState.zombiesAwakened%5==0&&btState.zombiesAwakened>0&&this.time.delayedCall(14e3,()=>{{const e=END_TIMES_SIGNS_SCRIPTURES[Math.floor(Math.random()*END_TIMES_SIGNS_SCRIPTURES.length)];this.showScriptureInBanner(e,"signs")}}),btState.zombiesAwakened%7==0&&btState.zombiesAwakened>0&&this.time.delayedCall(21e3,()=>{const e=HOPE_SCRIPTURES[Math.floor(Math.random()*HOPE_SCRIPTURES.length)];this.showScriptureInBanner(e,"hope")})}this.showNotification(`‚úù ${e.zombieType.name} AWAKENED! +${PHONE_ZOMBIE_CONFIG.pointsForWaking} pts!`,2278750),this.cameras.main.flash(200,255,215,0,.3),this.createDivineGoldenPowder(e.x,e.y-50),this.time.delayedCall(2e3,()=>{e&&e.active&&this.convertToHelper(e)})}showEndTimesWarning(e){if(!e||btState.silentMode)return;const t=this.cameras.main.worldView,a=t.centerX,i=t.bottom-80,s=this.add.rectangle(a,i,450,100,0,.9).setOrigin(.5).setDepth(90).setStrokeStyle(2,16766720),o=this.add.text(a,i-35,"‚ö†Ô∏è END TIMES WARNING",{fontSize:"11px",fontWeight:"bold",color:"#ff6666"}).setOrigin(.5).setDepth(91),n=this.add.text(a,i-5,`"${e.verse}"`,{fontSize:"10px",fontStyle:"italic",color:"#ffffff",wordWrap:{width:420},align:"center"}).setOrigin(.5).setDepth(91),r=this.add.text(a,i+25,`‚Äî ${e.ref}`,{fontSize:"9px",color:"#ffd700"}).setOrigin(.5).setDepth(91),h=this.add.text(a,i+42,e.message||"",{fontSize:"10px",fontWeight:"bold",color:"#22c55e"}).setOrigin(.5).setDepth(91);this.time.delayedCall(5e3,()=>{this.tweens.add({targets:[s,o,n,r,h],alpha:0,duration:800,onComplete:()=>{s.destroy(),o.destroy(),n.destroy(),r.destroy(),h.destroy()}})})}showRaptureWarning(e){if(!e||btState.silentMode)return;const t=this.cameras.main.worldView,a=t.right-220,i=t.top+100;this.cameras.main.flash(200,255,215,0,.2);const s=this.add.rectangle(a,i,400,140,0,.92).setOrigin(.5).setDepth(90).setStrokeStyle(3,16766720);this.tweens.add({targets:s,strokeAlpha:{from:1,to:.6},duration:800,yoyo:!0,repeat:4});const o=this.add.text(a,i-50,"‚òÅÔ∏è RAPTURE WARNING ‚òÅÔ∏è",{fontSize:"14px",fontWeight:"bold",color:"#ffd700"}).setOrigin(.5).setDepth(91),n=this.add.text(a,i-30,"God doesn't want ANYONE left behind!",{fontSize:"11px",fontWeight:"bold",color:"#22c55e"}).setOrigin(.5).setDepth(91),r=this.add.text(a,i+5,`"${e.verse}"`,{fontSize:"10px",fontStyle:"italic",color:"#ffffff",wordWrap:{width:370},align:"center"}).setOrigin(.5).setDepth(91),h=this.add.text(a,i+40,`‚Äî ${e.ref}`,{fontSize:"9px",color:"#ffd700"}).setOrigin(.5).setDepth(91),l=this.add.text(a,i+58,e.message||"Are YOU ready?",{fontSize:"11px",fontWeight:"bold",color:"#f87171"}).setOrigin(.5).setDepth(91);this.time.delayedCall(6e3,()=>{this.tweens.add({targets:[s,o,n,r,h,l],alpha:0,duration:1e3,onComplete:()=>{s.destroy(),o.destroy(),n.destroy(),r.destroy(),h.destroy(),l.destroy()}})})}createDivineGoldenPowder(e,t){for(let a=0;a<40;a++)this.time.delayedCall(50*a,()=>{const i=e+Phaser.Math.Between(-40,40),s=t-Phaser.Math.Between(0,30),o=Phaser.Math.Between(3,8),n=this.add.circle(i,s,o,16766720);if(n.setDepth(150),n.setAlpha(.9),o>5){const e=this.add.circle(i,s,.5*o,16777215);e.setDepth(151),e.setAlpha(.8),this.tweens.add({targets:e,y:s+120+Phaser.Math.Between(-20,40),x:i+Phaser.Math.Between(-30,30),alpha:0,scale:.3,duration:Phaser.Math.Between(1500,2500),ease:"Sine.easeIn",onComplete:()=>e.destroy()})}const r=Phaser.Math.Between(-25,25),h=Phaser.Math.Between(1800,3e3);this.tweens.add({targets:n,y:s+120+Phaser.Math.Between(-20,50),x:{value:i+r,duration:h/3,yoyo:!0,repeat:2,ease:"Sine.easeInOut"},alpha:{value:0,duration:h,ease:"Cubic.easeIn"},scale:{value:.2,duration:h,ease:"Cubic.easeIn"},duration:h,ease:"Sine.easeIn",onComplete:()=>n.destroy()}),a%8==0&&this.createDivineStar(i,s-20)});const a=this.add.circle(e,t,60,16766720,.3);a.setDepth(100),this.tweens.add({targets:a,scale:1.5,alpha:0,duration:2e3,ease:"Cubic.easeOut",onComplete:()=>a.destroy()})}createDivineStar(e,t){const a=this.add.star(e,t,4,4,12,16777215);a.setDepth(152),a.setAlpha(0),this.tweens.add({targets:a,alpha:{value:1,duration:200},scale:{value:1.5,duration:500,yoyo:!0},rotation:2*Math.PI,y:t+50,duration:1200,ease:"Cubic.easeOut",onComplete:()=>a.destroy()})}convertToHelper(e){if(!e||!e.active)return;e.isHelper=!0,e.helpTimer=PHONE_ZOMBIE_CONFIG.helpDuration,e.attackCooldown=0;const t=e.zombieType.helpQuotes[Math.floor(Math.random()*e.zombieType.helpQuotes.length)];this.showZombieQuote(e,t,2278750),!e.isAnimatedSprite&&e.nameTag&&e.nameTag.setText("‚öîÔ∏è HELPER!"),this.showNotification(`‚öîÔ∏è ${e.zombieType.name} is now HELPING YOU FIGHT!`,2278750)}updatePhoneZombies(e){if(!this.phoneZombies)return;const t=this.cameras.main.worldView;this.hunter?this.hunter.x:t.centerX;this.phoneZombies.getChildren().forEach(a=>{if(a&&a.active){if(a.isHelper){if(a.helpTimer-=e,a.attackCooldown-=e,a.helpTimer<=0)return this.showZombieQuote(a,"I must go spread the word!",2278750),void this.tweens.add({targets:a,alpha:0,x:a.x+200*a.wanderDirection,duration:2e3,onComplete:()=>a.destroy()});let t=null,i=300;if(this.demons&&this.demons.getChildren().forEach(e=>{if(e&&e.active){const s=Phaser.Math.Distance.Between(a.x,a.y,e.x,e.y);s<i&&(i=s,t=e)}}),this.villains&&this.villains.getChildren().forEach(e=>{if(e&&e.active&&!e.arrested){const s=Phaser.Math.Distance.Between(a.x,a.y,e.x,e.y);s<i&&(i=s,t=e)}}),t){const s=t.x>a.x?1:-1;a.x+=60*s*e,a.setFlipX&&a.setFlipX(s<0),i<50&&a.attackCooldown<=0&&(a.attackCooldown=1.5,this.helperAttack(a,t))}}else if(!a.isAwake){if(a.wanderTimer-=e,a.quoteTimer-=e,a.wanderTimer<=0&&(a.wanderTimer=3+4*Math.random(),a.wanderDirection=Math.random()>.5?1:-1),a.x+=15*a.wanderDirection*e,a.quoteTimer<=0){a.quoteTimer=8+8*Math.random();const e=a.zombieType.quotes[Math.floor(Math.random()*a.zombieType.quotes.length)];this.showZombieQuote(a,e,8947848)}if(this.hunter&&btState.biblesHeld>0){Phaser.Math.Distance.Between(a.x,a.y,this.hunter.x,this.hunter.y)<PHONE_ZOMBIE_CONFIG.wakeRange?a.promptShown||(a.promptShown=!0,this.showZombieQuote(a,"Press V to give Bible!",16766720)):a.promptShown=!1}}(a.x<t.x-200||a.x>t.right+200)&&a.destroy()}})}helperAttack(e,t){const a=this.add.line(0,0,e.x,e.y,t.x,t.y,2278750).setOrigin(0).setDepth(15).setLineWidth(2);this.time.delayedCall(200,()=>a.destroy()),t.isDemon?(t.health-=PHONE_ZOMBIE_CONFIG.helpDamage,t.health<=0&&(this.playDemonFlee(t),this.showNotification("‚úù Helper defeated a demon!",2278750))):t.isGlobalist&&(this.arrestVillain(t),this.showNotification("‚úù Helper arrested a globalist!",2278750));const i=["Take that!","For God!","Truth wins!","Freedom!"];this.showZombieQuote(e,i[Math.floor(Math.random()*i.length)],2278750)}checkBiblePickups(){this.biblePickups&&this.hunter&&this.biblePickups.getChildren().forEach(e=>{if(!e||!e.active)return;Phaser.Math.Distance.Between(e.x,e.y,this.hunter.x,this.hunter.y)<BIBLE_PICKUP_CONFIG.pickupRange&&this.pickupBible(e)})}spawnPlane(){const e=this.cameras.main.worldView,t=Math.random()<.3,a=!t&&Math.random()<.4,i=t?"helicopter":"plane";if(!this.textures.exists(i))return;const s=Math.random()<.5,o=.3+.7*Math.random(),n=.15+.25*o,r=30+100*(1-o),h=this.planes.create(s?e.x-300:e.right+300,r,i).setOrigin(.5).setScale(n).setFlipX(s).setAlpha(.6+.4*o).setDepth(5*o-3);h.body.setAllowGravity(!1),h.speed=150+150*o,h.direction=s?1:-1,h.isHelicopter=t,h.isFighter=a,h.bobPhase=Math.random()*Math.PI*2,h.hasDeployed=!1,h.shootCooldown=0,h.bombCooldown=0,a&&(h.setTint(16737894),this.showNotification("‚úàÔ∏è FIGHTER JET INCOMING!"))}spawnAnimal(){if(!this.currentScene||!this.currentScene.animals||0===this.currentScene.animals.length)return;const e=this.currentScene.animals[Math.floor(Math.random()*this.currentScene.animals.length)];if(!groundAnimals[e]||!this.textures.exists(e))return;const t=this.cameras.main.worldView,a=Math.random()<.5,i=a?t.x-100:t.right+100;let s=.12,o=40,n=15;if(groundAnimals[e].isFarmAnimal)switch(e){case"cow":s=.16,o=60,n=20;break;case"horse":s=.18,o=70,n=22;break;case"pig":s=.13,o=45,n=16;break;case"sheep":s=.11,o=35,n=14;break;case"goat":s=.1,o=32,n=13;break;case"chicken_ground":case"rooster":s=.08,o=25,n=10;break;case"turkey_ground":s=.1,o=35,n=14;break;default:s=.12}else switch(e){case"bear":case"elk":s=.15,o=55,n=18;break;case"deer":s=.13,o=45,n=16;break;case"wolf":case"cougar":s=.11,o=40,n=14;break;case"rabbit":s=.08,o=25,n=10;break;case"fox":case"dog":case"cat":s=.1,o=32,n=12;break;case"skunk":s=.07,o=22,n=9;break;default:s=.12}const r=this.add.ellipse(i,this.groundY+3,o,n,0,.25).setOrigin(.5).setDepth(5),h=this.animals.create(i,this.groundY,e).setOrigin(.5,1).setScale(s).setFlipX(a).setDepth(6);h.shadow=r,h.body.setAllowGravity(!1),h.speed=groundAnimals[e].speed+20*Math.random(),h.direction=a?1:-1,h.walkPhase=Math.random()*Math.PI*2,h.animalType=e,h.hasAttacked=!1,h.hasNudged=!1}spawnNPC(){if(!this.currentScene||!this.currentScene.npcs||0===this.currentScene.npcs.length)return;const e=this.currentScene.npcs[Math.floor(Math.random()*this.currentScene.npcs.length)];if(!npcTypes[e]||!this.textures.exists(e))return;const t=this.cameras.main.worldView,a=Math.random()<.5,i=a?t.x-80:t.right+80,s=this.add.ellipse(i,this.groundY+3,30,12,0,.25).setOrigin(.5).setDepth(5),o=this.npcs.create(i,this.groundY,e).setOrigin(.5,1).setScale(.1).setFlipX(a).setDepth(7);o.shadow=s,o.body.setAllowGravity(!1),o.speed=npcTypes[e].speed+10*Math.random(),o.direction=a?1:-1,o.walkPhase=Math.random()*Math.PI*2,o.npcType=e}spawnTrump(){if(this.trump&&this.trump.active)return;if(!this.textures.exists("trump_walk"))return;const e=this.cameras.main.worldView.x-100;this.trump=this.add.sprite(e,this.groundY,"trump_walk").setOrigin(.5,1).setScale(.12).setDepth(15),this.trump.direction=1,this.trump.speed=80,this.trump.quoteTimer=0,this.trump.fistShakeTimer=0,this.trump.isInvincible=!0,this.trump.shadow=this.add.ellipse(e,this.groundY+5,50,18,0,.3).setOrigin(.5).setDepth(14),this.spawnBodyguards(),this.spawnAngel(),this.spawnAmericanEagles(),this.spawnDivineShield();const t=TRUMP_QUOTES.entrance[Math.floor(Math.random()*TRUMP_QUOTES.entrance.length)];this.showTrumpQuote(t),this.playSound("anthem"),this.showNotification("üá∫üá∏ THE PRESIDENT HAS ARRIVED! PROTECT HIM!",16766720)}spawnDivineShield(){if(this.divineShield)return;const e=this.trump?this.trump.x:this.cameras.main.worldView.centerX;this.divineShield=this.add.container(e,this.groundY-80).setDepth(20);const t=this.add.ellipse(0,-20,250,180,16766720,.15).setStrokeStyle(3,16766720,.6),a=this.add.ellipse(0,-20,200,150,16772744,.1).setStrokeStyle(2,16772744,.4),i=this.add.rectangle(0,-100,6,30,16777215,.8),s=this.add.rectangle(0,-90,20,6,16777215,.8),o=this.add.text(0,-140,"Romans 8:31",{fontSize:"14px",fontStyle:"bold",color:"#ffd700",stroke:"#000000",strokeThickness:3}).setOrigin(.5),n=this.add.text(0,-125,'"If God is for us, who can be against us?"',{fontSize:"11px",fontStyle:"italic",color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5),r=[];for(let e=0;e<8;e++){const t=e/8*Math.PI*2,a=110*Math.cos(t),i=80*Math.sin(t)-20,s=this.add.star(a,i,4,3,6,16777215,.7);r.push(s)}this.divineShield.add([t,a,i,s,o,n,...r]),this.divineShield.shieldDome=t,this.divineShield.innerGlow=a,this.divineShield.sparkles=r,this.divineShield.scriptureRef=o,this.divineShield.scriptureVerse=n,this.tweens.add({targets:t,alpha:.25,scaleX:1.05,scaleY:1.05,duration:1200,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.tweens.add({targets:a,alpha:.2,scaleX:1.08,scaleY:1.08,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut",delay:300}),this.tweens.add({targets:[o,n],alpha:{from:.8,to:1},duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),r.forEach((e,t)=>{this.tweens.add({targets:e,alpha:{from:.3,to:1},scale:{from:.8,to:1.2},duration:800,yoyo:!0,repeat:-1,delay:100*t})})}spawnBodyguards(){if(!this.textures.exists("bodyguard_shoot"))return;if(this.bodyguard&&this.bodyguard.active)return;const e=this.trump?this.trump.x:this.cameras.main.worldView.x;this.anims.exists("bodyguard_shoot_anim")||this.anims.create({key:"bodyguard_shoot_anim",frames:this.anims.generateFrameNumbers("bodyguard_shoot",{start:0,end:3}),frameRate:8,repeat:0}),this.bodyguard=this.add.sprite(e+70,this.groundY,"bodyguard_shoot").setOrigin(.5,1).setScale(.1).setDepth(14),this.bodyguard.isBodyguard=!0,this.bodyguard.shootCooldown=0,this.bodyguard.isInvincible=!0}spawnAngel(){if(!this.textures.exists("angel_protect"))return;if(this.angel&&this.angel.active)return;const e=this.trump?this.trump.x:this.cameras.main.worldView.centerX;this.anims.exists("angel_protect_anim")||this.anims.create({key:"angel_protect_anim",frames:this.anims.generateFrameNumbers("angel_protect",{start:0,end:3}),frameRate:6,repeat:-1}),this.angel=this.add.sprite(e,this.groundY-120,"angel_protect").setOrigin(.5,1).setScale(.12).setDepth(16),this.angel.play("angel_protect_anim"),this.angel.isAngelShield=!0,this.angel.isInvincible=!0,this.angel.shieldRadius=180,this.angel.setRotation(-.15),this.tweens.add({targets:this.angel,y:this.groundY-130,duration:1200,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),this.angel.setTint(16772795)}updateBodyguardShooting(e){if(!this.bodyguard||!this.trump||!this.trump.active)return;if(!this.bodyguard.active)return;if(this.bodyguard.shootCooldown-=e,this.bodyguard.shootCooldown>0)return;let t=null,a=350;this.birds.getChildren().forEach(e=>{if(!e||!e.active)return;const i=speciesConfig[e.species];if(!i||i.protected||i.helper)return;const s=Phaser.Math.Distance.Between(e.x,e.y,this.trump.x,this.trump.y-50);s<a&&(a=s,t=e)}),t&&(this.bodyguardShoot(this.bodyguard,t),this.bodyguard.shootCooldown=.6)}bodyguardShoot(e,t){if(!e||!t)return;e.play("bodyguard_shoot_anim");const a=this.add.circle(e.x+30,e.y-50,5,16776960).setDepth(15);this.tweens.add({targets:a,x:t.x,y:t.y,duration:120,onComplete:()=>{if(a.destroy(),t&&t.active){const e=speciesConfig[t.species],a=e?e.points:10;btState.score+=Math.floor(.5*a),this.showPointIndicator(t.x,t.y,`+${Math.floor(.5*a)} SECRET SERVICE!`,1982639),this.createBirdExplosion(t.x,t.y,e?e.color:8947848),t.shadow&&t.shadow.destroy(),t.destroy(),this.playSound("hit")}}});const i=this.add.circle(e.x+40,e.y-55,12,16755200).setDepth(15).setAlpha(.9);this.time.delayedCall(100,()=>i.destroy()),this.playSound("shoot")}checkAngelTurdBlock(e){if(!this.angel||!this.trump||!this.trump.active)return!1;if(!e||!1===e.active)return!1;if(Phaser.Math.Distance.Between(e.x,e.y,this.trump.x,this.trump.y)<this.angel.shieldRadius){const t=this.add.circle(e.x,e.y,20,16766720,.7).setDepth(17);return this.tweens.add({targets:t,scale:2,alpha:0,duration:300,onComplete:()=>t.destroy()}),e.destroy(),Math.random()<.3&&this.showPointIndicator(this.trump.x,this.trump.y-100,"‚ú® DIVINE PROTECTION! ‚ú®",16766720),!0}return!1}spawnAmericanEagles(){if(!this.textures.exists("americaneagle"))return;this.americanEagles||(this.americanEagles=[]);const e=this.trump?this.trump.x:this.cameras.main.worldView.centerX,t=this.add.sprite(e-100,this.groundY-120,"americaneagle").setOrigin(.5).setScale(.1).setDepth(13);t.isAmericanEagle=!0,t.side="left",this.americanEagles.push(t);const a=this.add.sprite(e+100,this.groundY-120,"americaneagle").setOrigin(.5).setScale(.1).setDepth(13).setFlipX(!0);a.isAmericanEagle=!0,a.side="right",this.americanEagles.push(a)}showTrumpQuote(e){if(!this.trump)return;this.playSound("trump_speak"),this.speakTrumpQuote(e);const t=this.add.container(this.trump.x,this.trump.y-140);t.setDepth(20);const a=Math.min(7*e.length,280)+40,i=this.add.graphics();i.fillStyle(16777215,.98),i.lineStyle(3,3900150);const s=a/2;i.fillCircle(0-.7*s,-9,18),i.fillCircle(0-.4*s,-15,21),i.fillCircle(0,-12,24),i.fillCircle(0+.4*s,-15,21),i.fillCircle(0+.7*s,-9,18),i.fillCircle(0+.8*s,0,15),i.fillCircle(0+.7*s,9,18),i.fillCircle(0+.4*s,12,19.5),i.fillCircle(0,9,21),i.fillCircle(0-.4*s,12,19.5),i.fillCircle(0-.7*s,9,18),i.fillCircle(0-.8*s,0,15),i.fillRoundedRect(.7*-s,-12,1.4*s,24,10),i.fillCircle(0,45,12),i.fillCircle(5,62,8),i.fillCircle(8,75,5),i.strokeCircle(0-.7*s,-9,18),i.strokeCircle(0-.4*s,-15,21),i.strokeCircle(0,-12,24),i.strokeCircle(0+.4*s,-15,21),i.strokeCircle(0+.7*s,-9,18);const o=this.add.text(0,-5,e,{fontSize:"13px",fontFamily:"Comic Sans MS, cursive, sans-serif",fontStyle:"bold",color:"#1e40af",wordWrap:{width:280},align:"center"}).setOrigin(.5);t.add([i,o]),this.tweens.add({targets:t,y:t.y-8,duration:1500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.setScale(0),this.tweens.add({targets:t,scale:1,duration:300,ease:"Back.easeOut"}),this.trump.speechBubble=t,this.time.delayedCall(5e3,()=>{t&&!1!==t.active&&this.tweens.add({targets:t,alpha:0,scale:.5,duration:400,onComplete:()=>t.destroy()})})}updateTrump(e){if(!this.trump||!this.trump.active)return;const t=this.cameras.main.worldView;if(this.trump.x+=this.trump.speed*e,this.trump.shadow&&this.trump.shadow.setPosition(this.trump.x,this.groundY+5),this.trump.speechBubble&&!1!==this.trump.speechBubble.active&&this.trump.speechBubble.setPosition(this.trump.x,this.trump.y-120),this.bodyguard&&!1!==this.bodyguard.active&&(this.bodyguard.x=this.trump.x+70,this.updateBodyguardShooting(e)),this.angel&&!1!==this.angel.active&&(this.angel.x=this.trump.x),this.divineShield&&!1!==this.divineShield.active&&(this.divineShield.x=this.trump.x),this.americanEagles&&this.americanEagles.forEach(e=>{if(e&&!1!==e.active){const t="left"===e.side?-100:100;e.x=this.trump.x+t}}),this.trump.fistShakeTimer+=e,this.trump.fistShakeTimer>8&&(this.trump.fistShakeTimer=0,Math.random()<.5)){const e=TRUMP_QUOTES.fistShake[Math.floor(Math.random()*TRUMP_QUOTES.fistShake.length)];this.showTrumpQuote(e)}if(this.hunter){Math.abs(this.hunter.x-this.trump.x)<200&&(btState.trumpProximityBonus=(btState.trumpProximityBonus||0)+2*e,btState.trumpProximityBonus>=1&&(btState.score+=2,btState.trumpProximityBonus=0,this.showPointIndicator(this.hunter.x,this.hunter.y-50,"+2 PROTECTING!",2278750)))}if(this.trump.x>t.right+150){const e=TRUMP_QUOTES.protected[Math.floor(Math.random()*TRUMP_QUOTES.protected.length)];this.showTrumpQuote(e),btState.score+=100,this.showNotification("üá∫üá∏ PRESIDENT SAFE! +100 BONUS!",16766720),this.time.delayedCall(2e3,()=>{this.cleanupTrump()})}}cleanupTrump(){this.trump&&(this.trump.shadow&&this.trump.shadow.destroy(),this.trump.speechBubble&&this.trump.speechBubble.destroy(),this.trump.destroy(),this.trump=null),this.bodyguard&&(this.bodyguard.destroy(),this.bodyguard=null),this.angel&&(this.angel.destroy(),this.angel=null),this.divineShield&&(this.divineShield.destroy(),this.divineShield=null),this.americanEagles&&(this.americanEagles.forEach(e=>e&&e.destroy()),this.americanEagles=[])}checkTrumpShot(e){if(!this.trump||!this.trump.active)return!1;if(this.angel&&this.angel.active){if(Phaser.Math.Distance.Between(e.x,e.y,this.angel.x,this.angel.y-50)<60){this.showPointIndicator(this.angel.x,this.angel.y-80,"‚ú® DIVINE DEFLECTION! ‚ú®",16766720);const t=this.add.circle(e.x,e.y,15,16766720,.8).setDepth(17);return this.tweens.add({targets:t,scale:2,alpha:0,duration:300,onComplete:()=>t.destroy()}),e.destroy(),!0}}if(this.bodyguard&&this.bodyguard.active){if(Phaser.Math.Distance.Between(e.x,e.y,this.bodyguard.x,this.bodyguard.y-40)<40)return this.showPointIndicator(this.bodyguard.x,this.bodyguard.y-60,"üï¥Ô∏è FRIENDLY FIRE BLOCKED!",1982639),e.destroy(),!0}if(Phaser.Math.Distance.Between(e.x,e.y,this.trump.x,this.trump.y-50)<50){this.showTrumpQuote("God has me, this is nothing! Making America Great Again, Cleaning Out The Turds!"),this.showPointIndicator(this.trump.x,this.trump.y-100,"üôè DIVINE PROTECTION! üôè",16766720);const t=this.add.circle(this.trump.x,this.trump.y-50,40,16766720,.6).setDepth(17);return this.tweens.add({targets:t,scale:3,alpha:0,duration:500,onComplete:()=>t.destroy()}),this.playSound("powerup"),e.destroy(),!0}return!1}spawnShelter(){const e=this.cameras.main.worldView.x+640+200*Math.random()-100,t=this.groundY,a=this.add.container(e,t);a.setDepth(3);const i=this.add.rectangle(0,-80,120,15,9127187),s=this.add.rectangle(-50,-40,8,80,6636321),o=this.add.rectangle(50,-40,8,80,6636321),n=this.add.rectangle(0,-40,100,70,4863784,.7);a.add([n,s,o,i]),a.isShelter=!0,a.shelterBounds={x:e-50,y:t-90,width:100,height:90},this.shelters||(this.shelters=[]),this.shelters.push(a),this.showNotification("üè† SHELTER APPEARED! Hide from lightning!"),this.time.delayedCall(3e4,()=>{a&&!1!==a.active&&this.tweens.add({targets:a,alpha:0,duration:1e3,onComplete:()=>{a.destroy();const e=this.shelters.indexOf(a);e>-1&&this.shelters.splice(e,1)}})})}spawnPickup(){const e=this.cameras.main.worldView,t=["ammo","firstaid","coin"],a=t[Math.floor(Math.random()*t.length)];if(!this.textures.exists(a))return;const i=this.items.create(e.x+e.width*(.3+.5*Math.random()),this.groundY-60-50*Math.random(),a).setOrigin(.5).setScale(.18).setDepth(9);i.type=a,i.phase=Math.random()*Math.PI*2,i.body.setAllowGravity(!1)}updateBirds(e,t){const a=this.cameras.main.worldView,i=this.birds.getChildren().filter(e=>e&&e.active);this.birds.getChildren().forEach(s=>{if(!s||!s.active||!s.config)return;const o=s.config;let n=0,r=0;if(i.forEach(e=>{if(e===s||!e.active)return;const t=s.x-e.x,a=s.y-e.y,i=Math.hypot(t,a);if(i<60&&i>0){const e=(60-i)/60;n+=t/i*e*80,r+=a/i*e*40}}),s.x+=(s.speed*s.direction+n)*e,s.y+=.6*Math.sin(t/400+s.phase)+r*e,s.isBoss&&this.hunter&&this.hunter.active){const t=Math.hypot(s.x-this.hunter.x,s.y-this.hunter.y);if(s.isCarrying&&this.hunterBeingCarried){if(this.hunter.x=s.x,this.hunter.y=s.y+40,this.hunter.body.setVelocity(0,0),this.keys.K&&this.keys.K.isDown||this.keys.F&&this.keys.F.isDown)if(s.health-=3,this.showPointIndicator(s.x,s.y,"üî™ STAB! -3 HP",15680580),s.health<=0){this.hunterBeingCarried=!1,s.isCarrying=!1,this.createDeathEffect(s.x,s.y);const e=s.config.score;btState.score+=e,btState.kills++,this.onBirdKilled(),this.showPointIndicator(s.x,s.y,`+${e} ESCAPE KILL!`,2278750),s.destroy()}else this.hunterBeingCarried=!1,s.isCarrying=!1,this.hunter.y=this.groundY,this.showNotification("üî™ STABBED! You escaped!");return(this.input.activePointer.isDown||this.keys.SPACE.isDown)&&(s.health-=.5,s.health<=0&&(this.hunterBeingCarried=!1,s.isCarrying=!1,this.hunter.y=this.groundY)),void(s.y<50&&(btState.health-=.3,this.updateHud(),btState.health<=0&&(this.hunterBeingCarried=!1,s.isCarrying=!1,this.triggerDeathAnimation("carried"))))}if(!s.isDiving&&!s.isCarrying&&Math.abs(s.x-this.hunter.x)<200&&s.y<this.hunter.y-50&&(s.isDiving=!0,s.diveTarget={x:this.hunter.x,y:this.groundY-20},this.showNotification("‚ö†Ô∏è BOSS DIVING! Duck or go PRONE (Z)!")),s.isDiving){const a=s.diveTarget.x-s.x,i=(s.diveTarget.y,s.y,400);if(s.x+=a/Math.max(Math.abs(a),1)*i*e*.5,s.y+=i*e,s.rotation=s.direction>0?.5:-.5,s.y>=this.groundY-30&&(s.isDiving=!1,s.y=this.groundY-30,this.tweens.add({targets:s,y:100,duration:1e3,ease:"Sine.easeOut"})),t<50&&!this.isProne&&!this.isCrouching&&!btState.invincible&&!this.hunterBeingCarried)if(Math.random()<.3)s.isCarrying=!0,this.hunterBeingCarried=!0,s.isDiving=!1,this.showNotification("ü¶Ö GRABBED! Press K to STAB or keep shooting!"),this.cameras.main.shake(500,.03),this.tweens.add({targets:s,y:80,duration:1500,ease:"Sine.easeOut"});else{const e=25*(1-btState.upgrades.armor);btState.health=Math.max(0,btState.health-e),this.showPointIndicator(this.hunter.x,this.hunter.y-50,"-25 HP BOSS HIT!",15680580),this.cameras.main.shake(300,.02),btState.health<=0&&this.triggerDeathAnimation("boss"),this.updateHud()}}}s.setFlipX(s.direction>0),s.y=Math.max(50,Math.min(280,s.y)),s.flapPhase+=e*(s.isBoss?6:10);const h=2*o.size*(s.depthScale||1),l=1+.15*Math.sin(s.flapPhase),d=1+.08*Math.sin(s.flapPhase);if(s.setScale(h*d,h*l),s.rotation=.1*Math.sin(.5*s.flapPhase),s.turdCooldown-=e,s.turdCooldown<=0&&(o.helper?Math.random()<(o.coinDropRate||.12)&&this.spawnCoinDrop(s.x,s.y+10,1):Math.random()<o.turdRate&&this.spawnTurd(s.x,s.y+10),s.turdCooldown=.8+1.4*Math.random()),o.helper){const t=this.getNearestShootableBird(s.x,s.y);if(t&&t.active){const a=t.x-s.x,i=t.y-s.y,o=Math.hypot(a,i);o>1&&(s.x+=a/o*e*120,s.y+=i/o*e*120,s.setFlipX(a>0)),o<40&&(this.showPointIndicator(t.x,t.y,"+5 HELPER",2278750),btState.score+=btState.doublePoints?10:5,this.spawnCoinDrop(t.x,t.y,1),t.destroy())}}const c=s.isBoss?800:500;(s.direction>0&&s.x>a.right+c||s.direction<0&&s.x<a.x-c)&&s.destroy()})}updateTurds(){this.turds.getChildren().forEach(e=>{e&&e.active&&(this.checkAngelTurdBlock(e)||(e.body.setGravityY(600),e.stinkEffect&&e.stinkEffect.active&&e.stinkEffect.setPosition(e.x,e.y-15),e.y>=this.groundY-8&&(this.spawnGroundTurd(e.x),e.stinkEffect&&e.stinkEffect.destroy(),e.destroy())))}),this.groundTurds.getChildren().forEach(e=>{e&&e.active&&(e.spawnTime||(e.spawnTime=this.time.now),this.time.now-e.spawnTime>3e4&&(e.fliesEffect&&e.fliesEffect.destroy(),e.destroy()))})}updateBullets(){const e=this.time.now;this.bullets.getChildren().forEach(t=>{t&&t.active&&(e-t.spawnTime>1200||t.x<-100||t.x>20100||t.y<-100||t.y>740)&&t.destroy()})}updateVehicles(e){const t=this.cameras.main.worldView;this.vehicles.getChildren().forEach(a=>{if(!a||!a.active)return;if(a.setFlipX(a.direction>0),a.isGoodTractor&&this.hunter&&this.hunter.active){const e=a.x-this.hunter.x,t=Math.abs(e);t<150&&t>30?a.isLifting||(a.isLifting=!0,this.tweens.add({targets:a,y:this.groundY-100,duration:400,ease:"Sine.easeOut"})):t<=30?a.y=this.groundY-100:a.isLifting&&t>150&&(a.isLifting=!1,this.tweens.add({targets:a,y:this.groundY+2,duration:400,ease:"Sine.easeIn"})),this.groundTurds&&this.groundTurds.getChildren().forEach(e=>{if(!e||!e.active)return;Math.abs(a.x-e.x)<60&&Math.abs(e.y-(a.y-10))<40&&this.tweens.add({targets:e,y:e.y-60,alpha:0,scale:.02,duration:300,onComplete:()=>e.destroy()})})}if(a.x+=a.speed*e*a.direction,a.isLifting||a.isGoodTractor||(a.bouncePhase+=8*e,a.y=this.groundY+2+3*Math.sin(a.bouncePhase)),a.shadow&&a.shadow.active&&a.shadow.setPosition(a.x,this.groundY+5),!a.hasWarned&&this.hunter&&this.hunter.active){const e=Math.abs(a.x-this.hunter.x);e<300&&e>100&&(a.isGoodTractor?this.showNotification("üöú‚úÖ CLEANUP TRACTOR! Stay still - scoops turds!"):this.showNotification("üöú‚ö†Ô∏è BAD TRACTOR! JUMP (W) or SHOOT TIRES!"),a.hasWarned=!0)}if(!a.isGoodTractor&&this.hunter&&this.hunter.active&&!this.gameOver){const e=Math.abs(a.x-this.hunter.x),t=this.hunter.y<this.groundY-60;e<50&&!btState.invincible&&!t&&this.triggerVehicleHit(a)}(a.direction>0&&a.x>t.right+400||a.direction<0&&a.x<t.x-400)&&(a.shadow&&a.shadow.destroy(),a.destroy())})}updateBombs(){this.bombs&&this.bombs.getChildren().forEach(e=>{e&&e.active&&e.y>=this.groundY-20&&this.explodeBomb(e)})}updatePlanes(e){const t=this.cameras.main.worldView;this.planes.getChildren().forEach(a=>{if(!a||!a.active)return;if(a.setFlipX(a.direction>0),a.x+=a.speed*e*a.direction,a.bobPhase+=e*(a.isHelicopter?10:2),a.isHelicopter?a.y+=.5*Math.sin(a.bobPhase):a.rotation=.03*Math.sin(a.bobPhase),!a.isFighter&&!a.hasDeployed&&Math.random()<.003&&(this.deployParachuter(a.x,a.y+30),a.hasDeployed=!0),a.isFighter){if(a.shootCooldown-=e,a.bombCooldown-=e,a.shootCooldown<=0){const e=this.findNearestShootableBird(a.x,a.y,400);e&&(this.fighterShoot(a,e),a.shootCooldown=.8)}a.bombCooldown<=0&&Math.random()<.01&&(this.dropBomb(a.x,a.y),a.bombCooldown=3)}(a.direction>0&&a.x>t.right+500||a.direction<0&&a.x<t.x-500)&&a.destroy()})}fighterShoot(e,t){const a=speciesConfig[t.species];if(!a||!a.shootable)return;const i=this.add.circle(e.x,e.y,3,16711680).setDepth(20);this.tweens.add({targets:i,x:t.x,y:t.y,duration:100,onComplete:()=>{i.destroy();const e=Math.round(.3*a.score);btState.score+=e,this.showPointIndicator(t.x,t.y,`+${e} ‚úàÔ∏è FIGHTER!`,16737894),t.destroy()}})}dropBomb(e,t){const a=this.add.text(e,t,"üí£",{fontSize:"24px"}).setOrigin(.5).setDepth(25);this.physics.world.enable(a),a.body.setVelocityY(200),a.body.setGravityY(400),a.isBomb=!0,this.bombs=this.bombs||this.physics.add.group(),this.bombs.add(a),this.showNotification("üí£ BOMB INCOMING! TAKE COVER!"),this.time.delayedCall(3e3,()=>{a.active&&this.explodeBomb(a)})}explodeBomb(e){const t=e.x,a=e.y;e.destroy();const i=this.add.text(t,a,"üí•",{fontSize:"64px"}).setOrigin(.5).setDepth(30);this.tweens.add({targets:i,scale:2,alpha:0,duration:500,onComplete:()=>i.destroy()});let s=0;if(this.birds.getChildren().forEach(e=>{if(!e||!e.active)return;if(Phaser.Math.Distance.Between(t,a,e.x,e.y)<150){const t=speciesConfig[e.species];t&&t.shootable&&(btState.score+=Math.round(.2*t.score),s++),e.destroy()}}),s>0&&this.showPointIndicator(t,a,`üí• ${s} BIRDS!`,16737792),this.hunter&&this.hunter.active){const e=Phaser.Math.Distance.Between(t,a,this.hunter.x,this.hunter.y);if(e<150){const t=Math.round(30*(1-e/150));btState.turdMeter+=t,this.showPointIndicator(this.hunter.x,this.hunter.y-50,`üí£ -${t}% BOMB HIT!`,16711680),this.cameras.main.shake(300,.02),btState.turdMeter>=100&&this.triggerDeathAnimation("bomb")}}}updateStorm(e){this.stormTimer+=e,!this.stormActive&&this.stormTimer>45+45*Math.random()&&(this.startStorm(),this.stormTimer=0),this.stormActive&&(this.stormDuration-=e,Math.random()<.005&&this.randomLightningStrike(),this.stormDuration<=0&&this.endStorm()),this.lightningCooldown>0&&(this.lightningCooldown-=e)}startStorm(){this.stormActive=!0,this.stormDuration=15+10*Math.random(),this.stormOverlay=this.add.rectangle(this.cameras.main.worldView.centerX,this.cameras.main.worldView.centerY,2560,1280,51,.3).setScrollFactor(0).setDepth(50);const e=stormMessages[Math.floor(Math.random()*stormMessages.length)];this.showNotification(e),this.rainEmitter=this.add.particles(0,0,"turd",{x:{min:0,max:1280},y:-20,lifespan:1e3,speedY:{min:300,max:500},scale:.02,alpha:.3,frequency:20,tint:6724095}).setScrollFactor(0).setDepth(49)}endStorm(){this.stormActive=!1,this.stormOverlay&&this.tweens.add({targets:this.stormOverlay,alpha:0,duration:2e3,onComplete:()=>{this.stormOverlay&&this.stormOverlay.destroy()}}),this.rainEmitter&&(this.rainEmitter.stop(),this.time.delayedCall(2e3,()=>{this.rainEmitter&&this.rainEmitter.destroy()})),this.showNotification("‚òÄÔ∏è Storm passed!"),this.lightningCharges=Math.min(this.lightningCharges+2,5)}randomLightningStrike(){const e=this.cameras.main.worldView,t=e.x+Math.random()*e.width;this.strikeLightning(t,!0)}callLightning(){if(this.gameOver)return;if(this.lightningCharges<=0)return void this.showNotification("‚ö° No lightning charges! Wait for storm!");if(this.lightningCooldown>0)return void this.showNotification("‚ö° Lightning recharging...");this.lightningCharges--,this.lightningCooldown=3;const e=this.input.activePointer.worldX||this.hunter.x+Phaser.Math.Between(-200,200);this.strikeLightning(e,!1),this.showNotification(`‚ö° LIGHTNING CALLED! (${this.lightningCharges} left)`)}strikeLightning(e,t){const a=this.add.text(e,-50,"‚ö°",{fontSize:"80px"}).setOrigin(.5).setDepth(100);this.cameras.main.flash(100,255,255,255),this.cameras.main.shake(100,.01),this.tweens.add({targets:a,y:this.groundY,duration:80,ease:"Linear",onComplete:()=>{const i=this.add.text(e,this.groundY-20,"üí•",{fontSize:"48px"}).setOrigin(.5).setDepth(100);this.tweens.add({targets:[a,i],alpha:0,scale:1.5,duration:300,onComplete:()=>{a.destroy(),i.destroy()}});let s=0;if(this.birds.getChildren().forEach(a=>{if(!a||!a.active)return;if(Math.abs(a.x-e)<120&&a.y>50){const e=speciesConfig[a.species];if(e&&e.shootable){const i=t?Math.round(.5*e.score):e.score;btState.score+=i,s++,a.setTint(16776960),this.tweens.add({targets:a,alpha:0,scale:.1,duration:200,onComplete:()=>a.destroy()})}}}),s>0){const t=lightningHitMessages[Math.floor(Math.random()*lightningHitMessages.length)];this.showPointIndicator(e,this.groundY-80,`${t} ${s} BIRDS!`,16776960)}if(this.hunter&&this.hunter.active&&!btState.invincible){if(Math.abs(this.hunter.x-e)<80){const e=20;btState.turdMeter+=e,this.showPointIndicator(this.hunter.x,this.hunter.y-50,`‚ö° SHOCKED! -${e}%`,16776960),this.hunter.setTint(16776960),this.time.delayedCall(300,()=>{this.hunter&&this.hunter.clearTint()}),btState.turdMeter>=100&&this.triggerDeathAnimation("lightning")}}}})}callTornado(){if(this.gameOver)return;if(this.windCharges<=0)return void this.showNotification("üå™Ô∏è No wind charges! Wait for them to recharge!");if(this.windCooldown>0)return void this.showNotification("üí® Wind recharging...");this.windCharges--,this.windCooldown=5;const e=windMessages[Math.floor(Math.random()*windMessages.length)];this.showNotification(e),this.spawnTornado()}spawnTornado(){const e=this.cameras.main.worldView,t=Math.random()<.5,a=t?e.x-100:e.right+100,i=this.add.text(a,200,"üå™Ô∏è",{fontSize:"64px"}).setOrigin(.5).setDepth(90),s=t?1:-1;this.tweens.add({targets:i,x:t?e.right+100:e.x-100,duration:3e3,ease:"Linear",onUpdate:()=>{i.rotation+=.2,i.y=200+50*Math.sin(2*i.rotation),this.birds.getChildren().forEach(e=>{if(!e||!e.active)return;const t=Math.abs(e.x-i.x);if(t<150){const a=speciesConfig[e.species];if(a&&a.shootable&&(e.x+=20*s,e.y-=10,e.rotation+=.3,t<60)){const t=Math.round(.7*a.score);btState.score+=t;const i=tornadoKillMessages[Math.floor(Math.random()*tornadoKillMessages.length)];this.showPointIndicator(e.x,e.y,`+${t} ${i}`,6333946),this.tweens.add({targets:e,x:e.x+200*s,y:e.y-150,rotation:e.rotation+4*Math.PI,alpha:0,scale:.1,duration:500,onComplete:()=>e.destroy()})}}})},onComplete:()=>{i.destroy(),this.showNotification("üí® Tornado passed! Birds swept away!")}}),this.time.delayedCall(15e3,()=>{this.windCharges<3&&(this.windCharges++,this.showNotification("üí® Wind charge restored!"))})}deployParachuter(e,t){const a=this.add.container(e,t).setDepth(25),i=this.add.text(0,-30,"ü™Ç",{fontSize:"36px"});i.setOrigin(.5);const s=this.add.text(0,10,"üßë‚Äç‚úàÔ∏è",{fontSize:"24px"});s.setOrigin(.5),a.add([i,s]),a.fallSpeed=60+30*Math.random(),a.swayPhase=Math.random()*Math.PI*2,a.shootCooldown=0,a.isAlly=!0,a.hasLanded=!1,this.parachuters.add(a),this.physics.world.enable(a),a.body.setSize(40,60);const o=parachuterMessages[Math.floor(Math.random()*parachuterMessages.length)];this.showNotification(o)}updateParachuters(e){this.parachuters.getChildren().forEach(t=>{if(!t||!t.active)return;if(t.hasLanded||(t.y+=t.fallSpeed*e,t.swayPhase+=2*e,t.x+=30*Math.sin(t.swayPhase)*e,t.y>=this.groundY-20&&(t.y=this.groundY-20,t.hasLanded=!0,t.list&&t.list[0]&&t.list[0].setAlpha(0))),t.shootCooldown-=e,t.shootCooldown<=0){const e=this.findNearestShootableBird(t.x,t.y,300);e&&(this.parachuterShoot(t,e),t.shootCooldown=1.5+Math.random())}t.hasLanded&&(t.groundTime=(t.groundTime||0)+e,t.groundTime>15&&(this.showPointIndicator(t.x,t.y-30,"üëã MISSION COMPLETE!",2278750),t.destroy()));const a=this.cameras.main.worldView;(t.x<a.x-500||t.x>a.right+500)&&t.destroy()})}findNearestShootableBird(e,t,a){let i=null,s=a;return this.birds.getChildren().forEach(a=>{if(!a||!a.active)return;const o=speciesConfig[a.species];if(!o||!o.shootable)return;const n=Phaser.Math.Distance.Between(e,t,a.x,a.y);n<s&&(i=a,s=n)}),i}parachuterShoot(e,t){const a=speciesConfig[t.species];if(!a)return;const i=this.add.circle(e.x,e.y-10,3,2278750).setDepth(20);this.tweens.add({targets:i,x:t.x,y:t.y,duration:150,onComplete:()=>{i.destroy();const e=Math.round(.5*a.score);btState.score+=e,this.showPointIndicator(t.x,t.y,`+${e} ü™Ç ALLY ASSIST!`,2278750),t.destroy()}})}checkLowAmmo(){this.lowAmmoCheckTimer=(this.lowAmmoCheckTimer||0)+1,this.lowAmmoCheckTimer<180||(this.lowAmmoCheckTimer=0,btState.ammo<10&&Math.random()<.15&&this.spawnAmmoBox(),btState.ammo<10&&btState.ammo>0?this.lowAmmoWarned||(this.showNotification("‚ö†Ô∏è LOW AMMO! Press [P] to quick-buy refill!"),this.showQuickBuyHint(),this.lowAmmoWarned=!0):0!==btState.ammo||this.noAmmoWarned?btState.ammo>=10&&(this.lowAmmoWarned=!1,this.noAmmoWarned=!1,this.hideQuickBuyHint()):(this.showNotification("üö´ OUT OF AMMO! Press [P] to buy refill!"),this.showQuickBuyHint(),this.noAmmoWarned=!0))}spawnAmmoBox(){if(this.ammoPickups||(this.ammoPickups=this.physics.add.group()),this.ammoPickups.getChildren().length>=2)return;const e=this.cameras.main.worldView.right+100+200*Math.random(),t=640-this.groundHeight-20,a=this.add.sprite(e,t,"ammo").setOrigin(.5).setDepth(15).setScale(.8);a.baseY=t,a.bobPhase=0,this.ammoPickups.add(a),this.physics.world.enable(a),a.body.setAllowGravity(!1),this.tweens.add({targets:a,alpha:{from:.7,to:1},yoyo:!0,repeat:-1,duration:500}),this.showNotification("üì¶ AMMO BOX spotted! Go get it!")}updateAmmoBoxes(){this.ammoPickups&&this.ammoPickups.getChildren().forEach(e=>{if(!e||!e.active)return;if(e.bobPhase=(e.bobPhase||0)+.05,e.y=e.baseY+5*Math.sin(e.bobPhase),this.hunter&&this.hunter.active){Math.hypot(e.x-this.hunter.x,e.y-this.hunter.y)<50&&this.collectAmmoBox(e)}const t=this.cameras.main.worldView;e.x<t.left-100&&e.destroy()})}collectAmmoBox(e){const t=10+Math.floor(11*Math.random());btState.ammo+=t,this.showNotification(`üì¶ +${t} AMMO!`),this.showPointIndicator(e.x,e.y,`+${t} üî´`,2278750),this.playSound("coin"),this.tweens.add({targets:e,y:e.y-50,scale:1.5,alpha:0,duration:300,onComplete:()=>e.destroy()})}setupCoinDisplay(){this.coinDisplayContainer=this.add.container(1270,10),this.coinDisplayContainer.setDepth(999),this.coinDisplayContainer.setScrollFactor(0);const e=this.add.rectangle(0,0,120,28,1976635,.85);e.setStrokeStyle(1,16766720,.5),e.setOrigin(1,0);const t=this.add.text(-100,14,"üí©",{fontSize:"14px"}).setOrigin(.5);this.coinDisplayText=this.add.text(-55,14,"0",{fontSize:"13px",fontFamily:"Arial",color:"#ffd700",fontStyle:"bold"}).setOrigin(0,.5);const a=this.add.text(-10,14,"[TAB]",{fontSize:"9px",fontFamily:"Arial",color:"#6b7280"}).setOrigin(1,.5);this.coinDisplayContainer.add([e,t,this.coinDisplayText,a]),this.updateCoinDisplay(),this.coinAnimations=[]}updateCoinDisplay(){if(!this.coinDisplayText)return;const e=parseInt(localStorage.getItem("birdturds_coins")||"0");btState.coins=e,this.coinDisplayText.setText(e.toLocaleString())}animateCoinChange(e,t=!0){if(!this.coinDisplayContainer)return;const a=t?"#22c55e":"#ef4444",i=t?"+":"-",s=this.add.text(1215,40,`${i}${Math.abs(e)} üí©`,{fontSize:"14px",fontFamily:"Arial",color:a,fontStyle:"bold",stroke:"#000",strokeThickness:2}).setOrigin(.5).setScrollFactor(0).setDepth(1e3);this.tweens.add({targets:s,y:s.y-30,alpha:0,duration:1200,ease:"Power2",onComplete:()=>s.destroy()}),this.coinDisplayContainer&&this.tweens.add({targets:this.coinDisplayContainer,scaleX:1.15,scaleY:1.15,yoyo:!0,duration:150,ease:"Quad.easeOut"}),this.updateCoinDisplay()}addCoins(e,t=""){let a=parseInt(localStorage.getItem("birdturds_coins")||"0");a+=e,localStorage.setItem("birdturds_coins",a.toString()),btState.coins=a,this.animateCoinChange(e,!0),t&&this.showNotification(`+${e} üí© ${t}`)}spendCoins(e){let t=parseInt(localStorage.getItem("birdturds_coins")||"0");return!(t<e)&&(t-=e,localStorage.setItem("birdturds_coins",t.toString()),btState.coins=t,this.animateCoinChange(e,!1),!0)}getQuickShopItems(){return{consumables:[{id:"ammo_refill",name:"üîÑ Ammo Refill",desc:"Refill all ammo",cost:100,key:"1"},{id:"health_pack",name:"‚ù§Ô∏è Health +50",desc:"+50 HP",cost:200,key:"2"},{id:"full_heal",name:"‚ù§Ô∏è‚ù§Ô∏è Full Heal",desc:"100% HP",cost:500,key:"3"},{id:"shield_temp",name:"üåü Shield 10s",desc:"Invincible 10s",cost:500,key:"4"},{id:"double_points",name:"‚≠ê 2x Points",desc:"30s double score",cost:300,key:"5"},{id:"slow_motion",name:"‚è±Ô∏è Slow-Mo",desc:"15s slow birds",cost:400,key:"6"},{id:"sturdy_hat",name:"üé© Turd Hat",desc:"Block turds 45s",cost:800,key:"7"},{id:"jetpack",name:"üöÄ Jetpack",desc:"Fly 30 seconds!",cost:5e3,key:"8"},{id:"airstrike",name:"‚úàÔ∏è Airstrike",desc:"Bomb all birds",cost:2e3,key:"9"},{id:"nuke",name:"‚ò¢Ô∏è NUKE",desc:"Clear screen!",cost:5e3,key:"0"}],weapons:[{id:"shotgun_12",name:"üí• 12ga Shotgun",desc:"8-pellet spread",cost:8e3,key:"F1"},{id:"machinegun",name:"‚ö° M249 SAW",desc:"Full auto 200rds",cost:15e3,key:"F2"},{id:"sniper",name:"üéØ .308 Sniper",desc:"3x damage scope",cost:12e3,key:"F3"},{id:"bazooka",name:"üöÄ Bazooka",desc:"AOE explosions",cost:4e4,key:"F4"}],bosses:[{id:"boss_pterodactyl",name:"ü¶ñ Pterodactyl",desc:"+100pts +25üí©",cost:500,key:"B"},{id:"boss_phoenix",name:"üî• Phoenix",desc:"+150pts +50üí©",cost:1e3,key:"N"},{id:"boss_thunderbird",name:"‚ö° Thunderbird",desc:"+300pts +75üí©",cost:2e3,key:"M"}]}}toggleQuickShop(){this.quickShopOpen?this.closeQuickShop():this.openQuickShop()}openQuickShop(){if(this.quickShopOpen)return;this.quickShopOpen=!0,this.paused=!0;const e=parseInt(localStorage.getItem("birdturds_coins")||"0"),t=this.getQuickShopItems();this.quickShopOverlay=this.add.container(640,320),this.quickShopOverlay.setDepth(2e3),this.quickShopOverlay.setScrollFactor(0);const a=this.add.rectangle(0,0,1280,640,0,.85),i=Math.min(700,1240),s=Math.min(500,600),o=this.add.rectangle(0,0,i,s,1976635,.98);o.setStrokeStyle(3,16766720);const n=this.add.text(0,-s/2+25,"‚ö° QUICK SHOP ‚ö°",{fontSize:"22px",fontFamily:"Arial",color:"#ffd700",fontStyle:"bold"}).setOrigin(.5),r=this.add.text(0,-s/2+55,`üí© ${e.toLocaleString()} TurdCoins`,{fontSize:"16px",fontFamily:"Arial",color:"#22c55e",fontStyle:"bold"}).setOrigin(.5),h=this.add.text(i/2-10,-s/2+15,"[TAB] or [ESC] to close",{fontSize:"10px",fontFamily:"Arial",color:"#6b7280"}).setOrigin(1,0);this.quickShopOverlay.add([a,o,n,r,h]);let l=-s/2+90;const d=this.add.text(-i/2+20,l,"üéÅ CONSUMABLES (Press number key)",{fontSize:"12px",fontFamily:"Arial",color:"#f472b6",fontStyle:"bold"});this.quickShopOverlay.add(d),l+=22,t.consumables.forEach((t,a)=>{const s=a%5,o=Math.floor(a/5),n=-i/2+70+130*s,r=l+55*o,h=e>=t.cost,d=this.createShopItemButton(t,n,r,h);this.quickShopOverlay.add(d)}),l+=130;const c=this.add.text(-i/2+20,l,"üî´ WEAPONS (Press F1-F4)",{fontSize:"12px",fontFamily:"Arial",color:"#60a5fa",fontStyle:"bold"});this.quickShopOverlay.add(c),l+=22,t.weapons.forEach((t,a)=>{const s=-i/2+90+160*a,o=e>=t.cost,n=this.createShopItemButton(t,s,l+20,o);this.quickShopOverlay.add(n)}),l+=80;const u=this.add.text(-i/2+20,l,"ü¶ñ SUMMON BOSSES (B/N/M keys) - Kill for bonus coins!",{fontSize:"12px",fontFamily:"Arial",color:"#a855f7",fontStyle:"bold"});this.quickShopOverlay.add(u),l+=22,t.bosses.forEach((t,a)=>{const s=-i/2+120+180*a,o=e>=t.cost,n=this.createShopItemButton(t,s,l+20,o);this.quickShopOverlay.add(n)}),this.quickShopOverlay.setAlpha(0),this.tweens.add({targets:this.quickShopOverlay,alpha:1,duration:150})}createShopItemButton(e,t,a,i){const s=this.add.container(t,a),o=i?3621201:2042167,n=i?2278750:4937059,r=this.add.rectangle(0,0,120,50,o,.9);r.setStrokeStyle(i?2:1,n);const h=this.add.rectangle(-45,-15,22,18,0,.5),l=this.add.text(-45,-15,`[${e.key}]`,{fontSize:"9px",fontFamily:"Arial",color:"#ffd700"}).setOrigin(.5),d=this.add.text(0,-5,e.name,{fontSize:"10px",fontFamily:"Arial",color:i?"#fff":"#6b7280",fontStyle:"bold"}).setOrigin(.5),c=this.add.text(0,12,`${e.cost.toLocaleString()} üí©`,{fontSize:"10px",fontFamily:"Arial",color:i?"#22c55e":"#ef4444"}).setOrigin(.5);return s.add([r,h,l,d,c]),r.setInteractive({useHandCursor:i}),i&&(r.on("pointerover",()=>{r.setFillStyle(4937059),r.setStrokeStyle(2,16766720)}),r.on("pointerout",()=>{r.setFillStyle(3621201),r.setStrokeStyle(2,2278750)}),r.on("pointerdown",()=>{this.quickBuyItem(e.id,e.cost,e.name)})),s}closeQuickShop(){this.quickShopOpen&&(this.quickShopOpen=!1,this.paused=!1,this.quickShopOverlay&&this.tweens.add({targets:this.quickShopOverlay,alpha:0,duration:100,onComplete:()=>{this.quickShopOverlay.destroy(),this.quickShopOverlay=null}}))}quickBuyItem(e,t,a){const i=parseInt(localStorage.getItem("birdturds_coins")||"0");return i<t?(this.showNotification(`‚ùå Need ${t} üí©, have ${i}!`),this.playSound("error"),!1):!!this.spendCoins(t)&&(this.applyQuickBuyItem(e),this.showNotification(`‚úÖ ${a} ACTIVATED!`),this.playSound("powerup"),this.closeQuickShop(),!0)}applyQuickBuyItem(e){switch(e){case"ammo_refill":btState.ammo=btState.ammoMax,this.showPointIndicator(this.hunter.x,this.hunter.y-20,"FULL AMMO! üî´",2278750);break;case"health_pack":btState.health=Math.min(100,btState.health+50),this.showPointIndicator(this.hunter.x,this.hunter.y-20,"+50 HP ‚ù§Ô∏è",15680580);break;case"full_heal":btState.health=100,this.showPointIndicator(this.hunter.x,this.hunter.y-20,"FULL HP! ‚ù§Ô∏è",15680580);break;case"shield_temp":this.activateShield(10);break;case"shield_long":this.activateShield(30);break;case"double_points":this.activateScoreMultiplier(2,30);break;case"triple_points":this.activateScoreMultiplier(3,30);break;case"slow_motion":this.activateSlowMotion(15);break;case"freeze":this.freezeAllBirds(10);break;case"sturdy_hat":this.activateTurdHat(45);break;case"sturdy_hat_xl":this.activateTurdHat(90);break;case"jetpack":this.activateJetpack(30);break;case"jetpack_xl":this.activateJetpack(60);break;case"airstrike":this.callAirstrike();break;case"nuke":this.callNuke();break;case"boss_pterodactyl":this.summonBoss("pterodactyl");break;case"boss_phoenix":this.summonBoss("phoenix");break;case"boss_thunderbird":this.summonBoss("thunderbird");break;case"boss_dragon":this.summonBoss("dragon");break;case"shotgun_12":case"machinegun":case"sniper":case"bazooka":case"minigun":case"barrett":let t=JSON.parse(localStorage.getItem("birdturds_owned")||"[]");t.includes(e)||(t.push(e),localStorage.setItem("birdturds_owned",JSON.stringify(t))),"function"==typeof this.switchWeapon&&this.switchWeapon(e);break;default:console.log("Unknown quick buy item:",e)}this.updateHud()}activateShield(e){this.shieldActive=!0,this.shieldEndTime=this.time.now+1e3*e,this.shieldSprite||(this.shieldSprite=this.add.circle(0,0,50,3900150,.3),this.shieldSprite.setStrokeStyle(3,6333946)),this.shieldSprite.setVisible(!0),this.showNotification(`üåü SHIELD ACTIVE ${e}s!`),this.time.delayedCall(1e3*e,()=>{this.shieldActive=!1,this.shieldSprite&&this.shieldSprite.setVisible(!1),this.showNotification("üåü Shield expired!")})}activateScoreMultiplier(e,t){this.scoreMultiplier=e,this.showNotification(`‚≠ê ${e}x POINTS for ${t}s!`),this.time.delayedCall(1e3*t,()=>{this.scoreMultiplier=1,this.showNotification("‚≠ê Score multiplier ended")})}activateSlowMotion(e){this.slowMotionActive=!0,this.physics.world.timeScale=2,this.showNotification(`‚è±Ô∏è SLOW-MO ${e}s!`),this.time.delayedCall(1e3*e,()=>{this.slowMotionActive=!1,this.physics.world.timeScale=1,this.showNotification("‚è±Ô∏è Normal speed resumed")})}freezeAllBirds(e){this.showNotification(`‚ùÑÔ∏è FREEZE ${e}s!`),this.birds&&this.birds.getChildren().forEach(e=>{e&&e.active&&(e.frozen=!0,e.setTint(8900331),e.body.setVelocity(0,0))}),this.time.delayedCall(1e3*e,()=>{this.birds&&this.birds.getChildren().forEach(e=>{e&&e.active&&(e.frozen=!1,e.clearTint())}),this.showNotification("‚ùÑÔ∏è Birds unfrozen!")})}activateTurdHat(e){this.turdHatActive=!0,this.showNotification(`üé© TURD HAT ${e}s - Turds blocked!`),this.time.delayedCall(1e3*e,()=>{this.turdHatActive=!1,this.showNotification("üé© Hat wore off!")})}callAirstrike(){if(this.showNotification("‚úàÔ∏è AIRSTRIKE INCOMING!"),this.birds){let e=0;this.birds.getChildren().forEach(t=>{t&&t.active&&(this.createExplosion(t.x,t.y),this.addScore(t.birdPoints||10),t.destroy(),e++)}),this.showNotification(`‚úàÔ∏è Airstrike killed ${e} birds!`)}}callNuke(){this.showNotification("‚ò¢Ô∏è TACTICAL NUKE LAUNCHED!");const e=this.add.rectangle(640,320,1280,640,16777215,1);e.setScrollFactor(0).setDepth(9999),this.tweens.add({targets:e,alpha:0,duration:1e3,onComplete:()=>e.destroy()});let t=0;this.birds&&this.birds.getChildren().forEach(e=>{e&&e.active&&(this.addScore(2*(e.birdPoints||10)),e.destroy(),t++)}),this.turds&&this.turds.clear(!0,!0),this.showNotification(`‚ò¢Ô∏è NUKE! ${t} kills! Screen cleared!`)}activateJetpack(e){this.jetpackActive||(this.jetpackActive=!0,this.jetpackEndTime=this.time.now+1e3*e,this.showNotification(`üöÄ JETPACK ${e}s! Use W/S to fly!`),this.time.delayedCall(1e3*e,()=>{this.jetpackActive=!1,this.showNotification("üöÄ Jetpack fuel empty!")}))}setupQuickShopKeys(){this.input.keyboard.on("keydown-TAB",e=>{e.preventDefault(),this.toggleQuickShop()}),this.input.keyboard.on("keydown-ESC",()=>{this.quickShopOpen&&this.closeQuickShop()});const e=this.getQuickShopItems();for(let t=1;t<=9;t++)this.input.keyboard.on(`keydown-${t}`,()=>{if(this.quickShopOpen&&e.consumables[t-1]){const a=e.consumables[t-1];this.quickBuyItem(a.id,a.cost,a.name)}});this.input.keyboard.on("keydown-ZERO",()=>{if(this.quickShopOpen&&e.consumables[9]){const t=e.consumables[9];this.quickBuyItem(t.id,t.cost,t.name)}}),this.input.keyboard.on("keydown-B",()=>{const t=document.activeElement;if((!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName)&&this.quickShopOpen){const t=e.bosses[0];this.quickBuyItem(t.id,t.cost,t.name)}}),this.input.keyboard.on("keydown-N",()=>{if(this.quickShopOpen&&e.bosses[1]){const t=e.bosses[1];this.quickBuyItem(t.id,t.cost,t.name)}}),this.input.keyboard.on("keydown-M",()=>{if(this.quickShopOpen&&e.bosses[2]){const t=e.bosses[2];this.quickBuyItem(t.id,t.cost,t.name)}})}showQuickBuyHint(){if(this.quickBuyHint)return;this.quickBuyHint=this.add.container(640,100),this.quickBuyHint.setDepth(1e3),this.quickBuyHint.setScrollFactor(0);const e=this.add.rectangle(0,0,280,50,1976635,.95);e.setStrokeStyle(2,2278750);parseInt(localStorage.getItem("birdturds_coins")||"0");const t=this.add.text(0,0,"‚ö†Ô∏è LOW AMMO! [TAB] Quick Shop | [P] Refill (100üí©)",{fontSize:"12px",fontFamily:"Arial",color:"#22c55e",fontStyle:"bold"}).setOrigin(.5);this.quickBuyHint.add([e,t]),this.tweens.add({targets:this.quickBuyHint,alpha:{from:.7,to:1},yoyo:!0,repeat:-1,duration:500})}hideQuickBuyHint(){this.quickBuyHint&&(this.quickBuyHint.destroy(),this.quickBuyHint=null)}quickBuyAmmo(){let e=parseInt(localStorage.getItem("birdturds_coins")||"0");if(e<100)return this.showNotification(`‚ùå Need 100üí©, have ${e}!`),void this.playSound("error");this.spendCoins(100),btState.ammo=btState.ammoMax,this.showNotification(`‚úÖ AMMO REFILLED! üî´ ${btState.ammoMax} rounds!`),this.playSound("powerup"),this.updateHud(),this.hideQuickBuyHint()}updateAnimals(e){const t=this.cameras.main.worldView,a=this.animals.getChildren().filter(e=>e&&e.active),i=this.npcs.getChildren().filter(e=>e&&e.active);this.animals.getChildren().forEach(s=>{if(!s||!s.active)return;const o=groundAnimals[s.animalType];if(s.setFlipX(s.direction>0),o&&o.canCharge&&this.hunter&&this.hunter.active&&!s.isCharging){const e=Math.abs(s.x-this.hunter.x),t="elk"===s.animalType?.01:.008;if(e<300&&e>50&&Math.random()<t){s.isCharging=!0,s.chargeDirection=s.x<this.hunter.x?1:-1,s.speed="elk"===s.animalType?200:180,s.setTint(16737894);const e=(s.animalType,"ü¶å");this.showNotification(`${e} ${s.animalType.toUpperCase()} CHARGING! JUMP OVER IT!`)}}if(s.isCharging){if(s.direction=s.chargeDirection,s.setFlipX(s.direction>0),s.x+=s.speed*s.direction*e,this.hunter&&this.hunter.active&&!btState.invincible){if(Math.abs(s.x-this.hunter.x)<35&&!s.hasAttacked)if(this.isInAir||this.isProne){const e="elk"===s.animalType?15:10;this.showPointIndicator(this.hunter.x,this.hunter.y-80,`+${e} NICE JUMP!`,2278750),btState.score+=e,s.hasAttacked=!0}else{const e=o.chargeDamage||15,t=(1-btState.upgrades.armor)*(1-btState.armorReduction),a=Math.round(e*t);btState.health=Math.max(0,btState.health-a),this.showPointIndicator(this.hunter.x,this.hunter.y-50,`-${a} HP ${s.animalType.toUpperCase()} HIT!`,15680580),this.showNotification(`ü¶å TRAMPLED! Jump over charging ${s.animalType}!`),this.cameras.main.shake(300,.02),s.hasAttacked=!0,btState.health<=0&&this.triggerDeathAnimation(s.animalType),this.updateHud()}}(s.chargeDirection>0&&s.x>this.hunter.x+100||s.chargeDirection<0&&s.x<this.hunter.x-100)&&(s.isCharging=!1,s.speed=o.speed||80,s.clearTint())}else{let t=0;[...a,...i].forEach(e=>{if(e===s||!e.active)return;const a=s.x-e.x,i=Math.abs(a);if(i<80&&i>0){t+=(a>0?1:-1)*((80-i)/80)*60}}),s.x+=(s.speed*s.direction+t)*e}if(s.walkPhase+=8*e,s.y=this.groundY+2*Math.sin(s.walkPhase),s.shadow&&s.shadow.active&&s.shadow.setPosition(s.x,this.groundY+3),this.hunter&&this.hunter.active&&!this.gameOver&&s.animalType&&!s.hasAttacked&&!s.isCharging){if(Math.abs(s.x-this.hunter.x)<40)if(o&&o.dangerous&&!btState.invincible)this.triggerAnimalAttack(s);else if(o&&o.isFarmAnimal&&!s.hasNudged){s.hasNudged=!0;const e=o.canNudge?80:40,t=s.direction||(s.x<this.hunter.x?1:-1);this.tweens.add({targets:this.hunter,x:this.hunter.x+t*e,duration:200,ease:"Quad.easeOut"});const a=["üêÑ Moo! (Excuse me!)","üê∑ Oink! (Coming through!)","üê¥ Neigh! (Watch out!)","üêë Baa! (Pardon me!)","üêê Meh! (Move along!)","üêî Cluck! (Out of the way!)"],i=a[Math.floor(Math.random()*a.length)];this.showNotification(i,2278750),this.playSound(s.animalType),this.time.delayedCall(3e3,()=>{s&&s.active&&(s.hasNudged=!1)})}}(s.direction>0&&s.x>t.right+300||s.direction<0&&s.x<t.x-300)&&(s.shadow&&s.shadow.destroy(),s.destroy())})}updateNPCs(e){const t=this.cameras.main.worldView,a=this.animals.getChildren().filter(e=>e&&e.active),i=this.npcs.getChildren().filter(e=>e&&e.active);this.npcs.getChildren().forEach(s=>{if(!s||!s.active)return;s.setFlipX(s.direction>0);let o=0;[...a,...i].forEach(e=>{if(e===s||!e.active)return;const t=s.x-e.x,a=Math.abs(t);if(a<60&&a>0){o+=(t>0?1:-1)*((60-a)/60)*40}}),s.x+=(s.speed*s.direction+o)*e,s.walkPhase+=6*e,s.y=this.groundY+1.5*Math.sin(s.walkPhase),s.shadow&&s.shadow.active&&s.shadow.setPosition(s.x,this.groundY+3);(s.direction>0&&s.x>t.right+200||s.direction<0&&s.x<t.x-200)&&(s.shadow&&s.shadow.destroy(),s.destroy())})}triggerVehicleHit(e){if(this.gameOver||this.hunterHitCooldown)return;this.hunterHitCooldown=!0,this.time.delayedCall(2e3,()=>{this.hunterHitCooldown=!1});const t=e.direction;this.hunter.setTint(16711680),this.tweens.add({targets:this.hunter,x:this.hunter.x+150*t,y:this.hunter.y-100,rotation:t*Math.PI*2,duration:400,ease:"Quad.easeOut",onComplete:()=>{this.tweens.add({targets:this.hunter,y:this.groundY,rotation:0,duration:300,ease:"Bounce.easeOut",onComplete:()=>{this.hunter.clearTint()}})}}),btState.turdMeter=Math.min(100,btState.turdMeter+35),this.showNotification("üöú HIT BY VEHICLE!"),this.createImpactEffect(this.hunter.x,this.hunter.y,16737792),btState.turdMeter>=100&&this.triggerDeathAnimation("vehicle")}triggerAnimalAttack(e){if(this.gameOver||this.hunterHitCooldown)return;this.hunterHitCooldown=!0,this.time.delayedCall(1500,()=>{this.hunterHitCooldown=!1});const t=e.animalType?e.animalType.toUpperCase():"ANIMAL",a=-1*e.direction;this.hunter.setTint(16711680),this.tweens.add({targets:this.hunter,x:this.hunter.x+80*a,y:this.hunter.y-30,duration:200,ease:"Quad.easeOut",yoyo:!0,onComplete:()=>{this.hunter.clearTint()}});const i="bear"===e.animalType?40:"cougar"===e.animalType?35:"wolf"===e.animalType?25:20;btState.turdMeter=Math.min(100,btState.turdMeter+i),this.showNotification(`üêæ ${t} ATTACK!`),e.speed*=2,e.hasAttacked=!0,this.createImpactEffect(this.hunter.x,this.hunter.y-20,16711680),btState.turdMeter>=100&&this.triggerDeathAnimation("animal",t)}triggerDeathAnimation(e,t=""){if(!this.gameOver){if(this.gameOver=!0,this.physics.pause(),btState.funnyDeaths++,this.playSound("gameover"),this.stopBackgroundMusic(),"vehicle"===e)this.tweens.add({targets:this.hunter,scaleY:.02,duration:300,onComplete:()=>{this.showDeathMessage("üöú ROAD KILL!","Flattened like a pancake!")}});else if("animal"===e)this.tweens.add({targets:this.hunter,rotation:4*Math.PI,alpha:.5,y:this.groundY+20,duration:500,onComplete:()=>{this.showDeathMessage("üêª MAULED!",`Attacked by a ${t.toLowerCase()}!`)}});else if("buried"===e){this.hunter.setTint(13751771),this.tweens.add({targets:this.hunter,scaleY:.3,y:this.groundY+30,duration:800,ease:"Sine.easeIn",onComplete:()=>{this.showDeathMessage("üí© BURIED ALIVE!","Covered in so many turds you couldn't escape!")}});for(let e=0;e<10;e++){const t=this.add.image(this.hunter.x+Phaser.Math.Between(-40,40),this.groundY-10,"turd").setScale(.06).setDepth(15);this.tweens.add({targets:t,y:t.y-30,alpha:.8,duration:300,delay:50*e})}}else this.hunter.setTint(13751771),this.showDeathMessage("üí© GAME OVER DUDE!","Turd Happens!");this.time.delayedCall(2e3,()=>{this.checkLeaderboard(),this.showGameOverScreen()})}}showDeathMessage(e,t){const a=document.createElement("div");a.innerHTML=`<div style="font-size:48px;margin-bottom:10px;">${e}</div><div style="font-size:20px;color:#94a3b8;">${t}</div>`,a.style.cssText="position:fixed;top:40%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#ef4444;font-weight:bold;z-index:9999;text-shadow:0 4px 20px rgba(0,0,0,0.8);",document.body.appendChild(a),setTimeout(()=>a.remove(),3e3)}createImpactEffect(e,t,a){for(let i=0;i<12;i++){const s=this.add.circle(e,t,6,a).setDepth(20),o=i/12*Math.PI*2;this.tweens.add({targets:s,x:e+80*Math.cos(o),y:t+80*Math.sin(o),alpha:0,scale:.3,duration:400,onComplete:()=>s.destroy()})}}updateItems(e){this.items.getChildren().forEach(t=>{t&&t.active&&(t.y+=.4*Math.sin(e/400+t.phase),t.setScale(.18+.02*Math.sin(e/250)),"coin"===t.type&&(t.rotation+=.05))})}updateCoins(e){const t=this.cameras.main.worldView;this.coins.getChildren().forEach(a=>{if(!a||!a.active)return;a.rotation+=.12,a.y+=.3*Math.sin(e/250+a.phase),a.spawnTime||(a.spawnTime=e);const i=(e-a.spawnTime)/1e3;if(i>5&&a.setAlpha(.5*Math.sin(e/100)+.5),i>8)return this.showPointIndicator(a.x,a.y,"üí® COIN GONE!",10265519),void a.destroy();this.birds.getChildren().forEach(e=>{if(!(e&&e.active&&a&&a.active))return;Math.hypot(e.x-a.x,e.y-a.y)<40&&e.config&&e.config.shootable&&(this.showPointIndicator(a.x,a.y,"üê¶ STOLEN!",15680580),a.destroy())}),(a.x<t.x-200||a.x>t.right+200)&&a.destroy()})}handlePanelsLoop(){this.bgPanels&&this.cameras&&this.cameras.main}cleanupOffscreen(){const e=this.cameras.main.worldView;this.groundTurds.getChildren().forEach(t=>{t&&t.active&&t.x<e.x-800&&t.destroy()}),this.items.getChildren().forEach(t=>{t&&t.active&&t.x<e.x-800&&t.destroy()})}onBulletHitsBird(e,t){if(!(e&&t&&e.active&&t.active))return;if(this.checkDemonHit(e))return void e.destroy();const a=t.config;if(!a)return;if(this.inProtectedPark){e.destroy(),btState.score-=100;const a=protectedParkMessages[Math.floor(Math.random()*protectedParkMessages.length)];return this.showNotification(a),this.showPointIndicator(t.x,t.y,"-100 NO HUNTING!",15680580),void this.cameras.main.shake(200,.01)}e.destroy(),t.health=(t.health||1)-(e.damage||1),this.playSound("hit");const i=a.sprite||"bird";if(this.playSound(i),t.health<=0){this.playSound("bird_death"),Math.random()<.2&&this.playRandomCombatLine();let e=a.score;if(btState.doublePoints&&(e*=2),btState.score+=e,btState.kills++,a.shootable&&e>0&&this.onBirdKilled(),e<0?(this.showPointIndicator(t.x,t.y-20,`${e} POINTS!`,15680580),this.showPointIndicator(t.x,t.y+20,`DON'T SHOOT ${a.helper?"HELPERS":"PROTECTED"}!`,15680580),this.cameras.main.shake(150,.008)):this.showPointIndicator(t.x,t.y,`+${e}`,2278750),a.shootable&&e>0){const e=shootableBirdKillMessages[Math.floor(Math.random()*shootableBirdKillMessages.length)];this.showNotification(e)}else if(!a.shootable||e<0){const e=protectedBirdHitMessages[Math.floor(Math.random()*protectedBirdHitMessages.length)];this.showNotification(e)}if(a.coinDrop&&a.coinDrop>0&&this.spawnCoinDrop(t.x,t.y,a.coinDrop*btState.upgrades.coinMultiplier),a.respawns&&!t.hasRespawned)return t.hasRespawned=!0,void(t.health=a.health||3);this.createDeathEffect(t.x,t.y),t.body.setAllowGravity(!0),t.body.setGravityY(800),t.body.setVelocity(Phaser.Math.Between(-50,50),-100),t.setTint(6710886),this.tweens.add({targets:t,rotation:t.direction>0?3:-3,alpha:.7,duration:800,onComplete:()=>{t&&t.active&&t.destroy()}}),btState.accuracy=btState.shots>0?Math.round(btState.kills/btState.shots*100):0}else t.setTint(16711680),this.time.delayedCall(100,()=>{t&&t.active&&t.clearTint()})}onTurdHitsHunter(e,t){if(!t||!t.active)return;if(btState.invincible)return void t.destroy();if(btState.angelProtectionActive){const a=ANGEL_PROTECTION[btState.angelProtectionLevel];if(Math.random()<a.turdBlock){t.destroy(),this.showPointIndicator(e.x,e.y-80,"üòá ANGEL BLOCKED!",16766720);const a=this.add.circle(e.x,e.y-40,30,16766720,.5).setDepth(25);return void this.tweens.add({targets:a,alpha:0,scale:2,duration:300,onComplete:()=>a.destroy()})}}if(this.playSound("splat"),Math.random()<.3&&this.playTurdReactionLine(),btState.hatProtection)return t.destroy(),void this.showPointIndicator(e.x,e.y-80,"üé© HAT BLOCKED!",16436245);let a=8*(1-btState.upgrades.armor);if(btState.angelProtectionActive){a*=1-ANGEL_PROTECTION[btState.angelProtectionLevel].damageReduction}btState.turdMeter=Math.min(btState.maxTurdMeter,btState.turdMeter+a),btState.turdCount++,t.destroy(),this.hunterTurds||(this.hunterTurds=[]);const i=this.add.image(e.x+Phaser.Math.Between(-20,20),e.y-Phaser.Math.Between(20,60),"turd").setScale(.032).setDepth(12).setAlpha(.9);this.hunterTurds.push(i),this.tweens.add({targets:i,scaleX:.048,scaleY:.024,duration:100,yoyo:!0}),e.setTint(13751771),this.time.delayedCall(150,()=>{e&&e.active&&e.clearTint()});const s=turdExclamations[Math.floor(Math.random()*turdExclamations.length)];this.showPointIndicator(e.x,e.y-80,s,13751771),btState.turdMeter>=80&&btState.turdMeter<100&&this.showNotification("‚ö†Ô∏è SHAKE IT OFF! Press X or Q!"),btState.turdMeter>=100&&this.triggerDeathAnimation("buried"),this.updateHud()}onCollectItem(e,t){if(t&&t.active){if("ammo"===t.type)btState.ammo=Math.min(btState.ammoMax,btState.ammo+30),this.showNotification("üì¶ +30 AMMO!");else if("firstaid"===t.type){const t=35;if(btState.health=Math.min(btState.maxHealth,btState.health+t),btState.turdCount=Math.max(0,btState.turdCount-3),this.hunterTurds){this.hunterTurds.splice(0,3).forEach(e=>e&&e.destroy())}this.showNotification(`‚ù§Ô∏è +${t} HEALTH!`),this.showPointIndicator(e.x,e.y-50,`+${t} HP`,2278750),this.updateHud()}else"coin"===t.type&&this.addCoins(5);t.destroy()}}onCollectCoin(e,t){if(t&&t.active&&e&&e.active)try{const e=(new Date).toDateString();if(btState.lastCoinDate!==e&&(btState.coinsEarnedToday=0,btState.lastCoinDate=e),btState.coinsEarnedToday>=btState.dailyCoinLimit)return this.dailyLimitShown||(this.showMessage("Daily coin limit reached! (500/day)","#f59e0b"),this.dailyLimitShown=!0),void t.destroy();if(btState.coins++,btState.coinsEarnedToday++,btState.score+=5,this.showPointIndicator(t.x,t.y-20,"+1 ü™ô",16436245),this.showPointIndicator(t.x+30,t.y-40,"+5 PTS",2278750),this.playSound("coin"),this.add&&this.add.particles)try{const e=this.add.circle(t.x,t.y,15,16436245,.8).setDepth(20);this.tweens.add({targets:e,scale:2,alpha:0,duration:300,onComplete:()=>e.destroy()})}catch(e){}this.savePlayerData(),t.destroy(),btState.coinsEarnedToday%50==0&&btState.coinsEarnedToday<btState.dailyCoinLimit&&this.showNotification(`ü™ô ${btState.coinsEarnedToday}/${btState.dailyCoinLimit} daily coins!`)}catch(e){console.error("Coin collection error:",e),t&&t.active&&t.destroy()}}spawnTurd(e,t){if(!this.textures.exists("turd"))return;const a=this.turds.create(e,t,"turd").setOrigin(.5).setScale(.04).setDepth(11);a.body.setAllowGravity(!0),a.body.setVelocityX(Phaser.Math.Between(-20,20)),this.tweens.add({targets:a,rotation:2*Math.PI*(Math.random()>.5?1:-1),duration:800,repeat:-1,ease:"Linear"}),this.tweens.add({targets:a,scaleX:.048,scaleY:.032,duration:150,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"});const i=this.add.text(e,t-15,"üí®",{fontSize:"12px"}).setOrigin(.5).setDepth(10).setAlpha(.6);a.stinkEffect=i}spawnGroundTurd(e){if(!this.textures.exists("turd"))return;const t=this.groundTurds.create(e,this.groundY-5,"turd").setOrigin(.5,1).setScale(.048).setAlpha(.8).setDepth(4);t.body.setAllowGravity(!1);const a=this.add.text(e,this.groundY-20,"ü™∞",{fontSize:"10px"}).setOrigin(.5).setDepth(5);this.tweens.add({targets:a,x:e+10,y:this.groundY-25,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.fliesEffect=a}spawnCoinDrop(e,t,a){if(this.textures.exists("coin"))for(let i=0;i<a;i++){const a=this.coins.create(e+30*(Math.random()-.5),t,"coin").setOrigin(.5).setScale(.06).setDepth(12);a.phase=Math.random()*Math.PI*2,a.body.setAllowGravity(!1),a.body.setVelocity(Phaser.Math.Between(-60,60),Phaser.Math.Between(-120,-40));const i=this.add.text(a.x,a.y-15,"üí∞",{fontSize:"12px"}).setOrigin(.5).setDepth(13);this.tweens.add({targets:a.body.velocity,y:80,duration:600,onComplete:()=>{a&&a.active&&a.body.setVelocity(0,0),i&&i.active&&i.destroy()}}),this.tweens.add({targets:i,alpha:0,y:i.y-20,duration:800,onComplete:()=>{i&&i.destroy()}})}}getNearestShootableBird(e,t){let a=null,i=1/0;return this.birds.getChildren().forEach(s=>{if(!(s&&s.active&&s.config&&s.config.shootable))return;const o=Math.hypot(s.x-e,s.y-t);o<i&&(i=o,a=s)}),a}createDeathEffect(e,t){for(let a=0;a<8;a++){const i=this.add.ellipse(e,t,8,4,16777215,.7).setDepth(15),s=a/8*Math.PI*2;this.tweens.add({targets:i,x:e+60*Math.cos(s),y:t+60*Math.sin(s),alpha:0,rotation:4*Math.random(),duration:500,onComplete:()=>i.destroy()})}}showPointIndicator(e,t,a,i=16777215){const s=this.add.text(e,t-30,a,{fontSize:"28px",fontFamily:"system-ui",color:"#"+i.toString(16).padStart(6,"0"),fontStyle:"bold",stroke:"#000",strokeThickness:4}).setOrigin(.5).setDepth(25);this.tweens.add({targets:s,y:s.y-80,alpha:0,scale:1.5,duration:1200,onComplete:()=>s.destroy()})}showNotification(e){const t=document.createElement("div");t.textContent=e,t.style.cssText="position:fixed;top:100px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.85);color:#facc15;padding:12px 28px;border-radius:8px;font-size:18px;font-weight:bold;z-index:9999;",document.body.appendChild(t),setTimeout(()=>t.remove(),2e3)}showScripturePopup(e,t=16766720,a=5e3){const i=Date.now();if(this.lastScriptureTime&&i-this.lastScriptureTime<6e4)return void console.log("Scripture rate limited - wait 60s between popups");let s,o;if(this.lastScriptureTime=i,"string"==typeof e){const t=e.match(/^"?(.+?)"?\s*[‚Äî-]\s*(.+)$/);t?(s=t[1].replace(/^"|"$/g,""),o=t[2]):(s=e,o="")}else{if(!e||"object"!=typeof e)return void console.warn("Invalid scripture format:",e);s=e.verse||e.text||"Scripture",o=e.ref||e.reference||""}const n="#"+t.toString(16).padStart(6,"0"),r=document.createElement("div");if(r.id="scripture-popup",r.innerHTML=`\n      <button onclick="this.parentElement.remove()" style="position:absolute;top:8px;right:8px;background:#ef4444;color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;font-size:16px;line-height:1;">√ó</button>\n      <div style="font-size:18px;font-weight:bold;margin-bottom:8px;">‚úùÔ∏è ${s} ‚úùÔ∏è</div>\n      ${o?`<div style="font-size:14px;font-style:italic;color:#ffd700;">‚Äî ${o}</div>`:""}\n    `,r.style.cssText=`\n      position:fixed;top:40px;left:50%;transform:translateX(-50%);\n      background:linear-gradient(135deg, rgba(0,30,60,0.95), rgba(0,15,30,0.95));\n      color:${n};padding:20px 40px;border-radius:10px;\n      font-size:16px;z-index:10000;text-align:center;\n      border:2px solid ${n};box-shadow:0 0 30px ${n}40;\n      animation: scriptureGlow 2s ease-in-out infinite;\n      max-width:80vw;\n    `,!document.getElementById("scripture-style")){const e=document.createElement("style");e.id="scripture-style",e.textContent="\n        @keyframes scriptureGlow {\n          0%, 100% { box-shadow: 0 0 20px rgba(255,215,0,0.3); }\n          50% { box-shadow: 0 0 40px rgba(255,215,0,0.6); }\n        }\n      ",document.head.appendChild(e)}document.body.appendChild(r),r.style.opacity="0",r.style.transition="opacity 0.5s ease-out",setTimeout(()=>r.style.opacity="1",50);const h=s+(o?". "+o:"");this.speakText(h,"scripture"),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>r.remove(),500)},a)}showDemonScripture(){const e=DEMON_SCRIPTURES[Math.floor(Math.random()*DEMON_SCRIPTURES.length)];this.showScripturePopup(e,4521796),this.showNotification("üòà DEMON APPROACHES! Stand firm in faith!",16729156)}showAngelScripture(){const e=ANGEL_SCRIPTURES[Math.floor(Math.random()*ANGEL_SCRIPTURES.length)];this.showScripturePopup(e,16766720)}showVictoryScripture(){const e=VICTORY_SCRIPTURES[Math.floor(Math.random()*VICTORY_SCRIPTURES.length)];this.showScripturePopup(e,2278750)}showWarriorScripture(){const e=WARRIOR_SCRIPTURES[Math.floor(Math.random()*WARRIOR_SCRIPTURES.length)];this.showScripturePopup(e,8965375)}showLoveScripture(){const e=LOVE_SCRIPTURES[Math.floor(Math.random()*LOVE_SCRIPTURES.length)];this.showScripturePopup(e,16746700)}showRandomJoke(){if(this.gameOver||this.paused)return;if("true"===localStorage.getItem("birdturds_noJokes"))return void this.time.delayedCall(1e3*this.jokeInterval,()=>this.showRandomJoke());if(Math.random()<.3)return this.showEncouragementScripture(),void this.time.delayedCall(1e3*this.jokeInterval,()=>this.showRandomJoke());let e;do{e=Math.floor(Math.random()*this.jokes.length)}while(e===this.lastJokeIndex&&this.jokes.length>1);this.lastJokeIndex=e;const t=this.jokes[e];this.speakText(t.setup+"... "+t.punchline,"joke");const a=document.getElementById("joke-banner"),i=document.getElementById("joke-content");if(a&&i){let e="";if(Math.random()<.5){const t=ENCOURAGEMENT_SCRIPTURES[Math.floor(Math.random()*ENCOURAGEMENT_SCRIPTURES.length)];e=`<div style="font-size:11px;color:#ffd700;margin-top:12px;font-style:italic;border-top:1px solid #333;padding-top:8px;">‚úùÔ∏è "${t.verse}" ‚Äî ${t.ref}</div>`}i.innerHTML=`\n        <button onclick="document.getElementById('joke-banner').style.display='none'" style="position:absolute;top:8px;right:8px;background:#ef4444;color:#fff;border:none;width:24px;height:24px;border-radius:50%;cursor:pointer;font-size:16px;line-height:1;">√ó</button>\n        <div style="color:#facc15;font-weight:bold;font-size:14px;margin-bottom:8px;">üòÇ DAILY GIGGLE üòÇ</div>\n        <div style="font-size:15px;margin-bottom:8px;">${t.setup}</div>\n        <div style="color:#facc15;font-size:17px;font-weight:bold;">${t.punchline}</div>\n        ${e}\n        <div style="font-size:10px;color:#9ca3af;margin-top:10px;font-style:italic;">Brought to you by Dude.com üòÇ</div>\n      `,a.style.position="relative",a.style.display="block",a.style.opacity="1",a.style.transition="opacity 0.5s ease-out",setTimeout(()=>{a.style.opacity="0",setTimeout(()=>{a.style.display="none"},500)},6e3)}this.time.delayedCall(1e3*this.jokeInterval,()=>this.showRandomJoke())}showEncouragementScripture(){const e=ENCOURAGEMENT_SCRIPTURES[Math.floor(Math.random()*ENCOURAGEMENT_SCRIPTURES.length)],t=document.getElementById("joke-banner"),a=document.getElementById("joke-content");if(t&&a){const i=["‚úùÔ∏è GOD'S WORD FOR YOU ‚úùÔ∏è","‚öîÔ∏è WARRIOR'S WORD ‚öîÔ∏è","‚ù§Ô∏è GOD LOVES YOU ‚ù§Ô∏è","üõ°Ô∏è STAND FIRM IN FAITH üõ°Ô∏è","‚ú® TRUTH & LIGHT ‚ú®"],s=i[Math.floor(Math.random()*i.length)];a.innerHTML=`\n        <div style="color:#ffd700;font-weight:bold;font-size:16px;margin-bottom:12px;">${s}</div>\n        <div style="font-size:16px;margin-bottom:10px;line-height:1.4;">"${e.verse}"</div>\n        <div style="color:#88ccff;font-size:14px;font-style:italic;">‚Äî ${e.ref}</div>\n        <div style="font-size:10px;color:#9ca3af;margin-top:12px;">Jesus is Lord ‚Ä¢ God wants warriors for truth!</div>\n      `,t.style.display="block",t.style.opacity="1",t.style.transition="opacity 0.5s ease-out",setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none"},500)},7e3)}}showScriptureInBanner(e,t="wake"){if(!e)return;const a=document.getElementById("joke-banner"),i=document.getElementById("joke-content");if(!a||!i)return;let s,o,n,r,h;switch(t){case"rapture":s="#ffd700",o="‚òÅÔ∏è THE RAPTURE IS COMING ‚òÅÔ∏è",n="#ffd700",r="#22c55e",h="God doesn't want ANYONE left behind! Are YOU ready?";break;case"signs":s="#ff6666",o="‚ö†Ô∏è END TIMES SIGNS ‚ö†Ô∏è",n="#ff4444",r="#ffa500",h="The signs are all around us - Wake up!";break;case"hope":s="#22c55e",o="üíö HOPE IN CHRIST üíö",n="#22c55e",r="#88ccff",h="Jesus overcame the world - You can too!";break;case"family":s="#f472b6",o="üë®‚Äçüë©‚Äçüëß‚Äçüë¶ FAMILY WARNING üë®‚Äçüë©‚Äçüëß‚Äçüë¶",n="#f472b6",r="#ff88cc",h="Unite your family in Christ before it's too late!";break;case"teen":s="#3b82f6",o="üì± WAKE UP GENERATION! üì±",n="#3b82f6",r="#60a5fa",h="Put down the phone. Pick up the Bible!";break;default:s="#22c55e",o="‚úùÔ∏è SOUL AWAKENED! ‚úùÔ∏è",n="#22c55e",r="#88ff88",h="Another soul set free from distraction!"}const l="teen"===t||"wake"===t?'<div style="font-size:9px;margin-top:8px;"><a href="https://tpusafaith.com" target="_blank" style="color:#60a5fa;text-decoration:underline;">Learn more at TPUSA Faith</a> - Equipping youth for biblical truth!</div>':"";i.innerHTML=`\n      <div style="border:2px solid ${n};border-radius:10px;padding:12px;background:rgba(0,0,0,0.3);">\n        <div style="color:${s};font-weight:bold;font-size:14px;margin-bottom:10px;text-align:center;">${o}</div>\n        <div style="font-size:13px;margin-bottom:8px;line-height:1.4;color:#ffffff;font-style:italic;">"${e.verse}"</div>\n        <div style="color:#ffd700;font-size:12px;text-align:right;margin-bottom:8px;">‚Äî ${e.ref}</div>\n        ${e.message?`<div style="color:${r};font-size:11px;font-weight:bold;text-align:center;margin-bottom:6px;">${e.message}</div>`:""}\n        <div style="font-size:10px;color:#9ca3af;text-align:center;border-top:1px solid #333;padding-top:8px;margin-top:8px;">${h}</div>\n        ${l}\n      </div>\n    `,a.style.display="block",a.style.opacity="1",a.style.transition="opacity 0.5s ease-out";setTimeout(()=>{a.style.opacity="0",setTimeout(()=>{a.style.display="none"},500)},"rapture"===t?1e4:7e3)}checkWellness(){if(this.gameOver)return;const e=Date.now(),t=Math.floor((e-this.sessionStartTime)/6e4);e-this.lastBreakReminder>=this.breakInterval&&(this.lastBreakReminder=e,this.showWellnessReminder());const a=this.totalPlayTime+t;localStorage.setItem("birdturds_totalPlayTime",a.toString()),this.time.delayedCall(6e4,()=>this.checkWellness())}showWellnessReminder(){let e;do{e=Math.floor(Math.random()*this.wellnessMessages.length)}while(e===this.lastWellnessIndex&&this.wellnessMessages.length>1);this.lastWellnessIndex=e;const t=this.wellnessMessages[e],a=Math.floor((Date.now()-this.sessionStartTime)/6e4),i=document.createElement("div");i.id="wellness-popup",i.innerHTML=`\n      <div style="background:linear-gradient(135deg,#1e3a5f,#0f172a);padding:25px;border-radius:16px;max-width:400px;text-align:center;border:2px solid #3b82f6;box-shadow:0 10px 40px rgba(59,130,246,0.3);">\n        <div style="font-size:50px;margin-bottom:15px;">${t.icon}</div>\n        <h3 style="color:#60a5fa;font-size:18px;margin-bottom:10px;">Healthy Gaming Reminder</h3>\n        <p style="color:#e2e8f0;font-size:14px;margin-bottom:15px;">${t.msg}</p>\n        <p style="color:#94a3b8;font-size:12px;margin-bottom:20px;">You've been playing for ${a} minutes this session.</p>\n        <div style="display:flex;gap:10px;justify-content:center;">\n          <button onclick="document.getElementById('wellness-popup').remove()" style="background:#3b82f6;color:#fff;border:none;padding:10px 25px;border-radius:999px;font-weight:bold;cursor:pointer;">Got it! üëç</button>\n          <button onclick="document.getElementById('wellness-popup').remove();if(typeof pauseGame==='function')pauseGame();" style="background:#22c55e;color:#fff;border:none;padding:10px 20px;border-radius:999px;font-weight:bold;cursor:pointer;">Take a Break üßò</button>\n        </div>\n        <p style="color:#64748b;font-size:10px;margin-top:15px;">üí° Tip: Regular breaks improve focus and performance!</p>\n      </div>\n    `,i.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:15000;",document.body.appendChild(i),setTimeout(()=>{const e=document.getElementById("wellness-popup");e&&e.remove()},15e3)}initBots(e=2){this.bots=[];const t=["TurdHunterBot","BirdSlayer99","PoopDodger","SkyShooter","FeatherFury","WingClipper"],a=[3900150,2278750,16096779,15485081,9133302];for(let i=0;i<Math.min(e,this.maxBots);i++){const e={id:"bot_"+i,name:t[i%t.length],x:200+19600*Math.random(),y:this.groundY,score:0,kills:0,health:100,direction:Math.random()<.5?-1:1,targetBird:null,shootCooldown:0,moveCooldown:0,color:a[i%a.length],sprite:null,nameTag:null};this.textures.exists("hunter")&&(e.sprite=this.add.sprite(e.x,e.y,"hunter").setOrigin(.5,1).setScale(.22).setTint(e.color).setAlpha(.85).setDepth(9),e.nameTag=this.add.text(e.x,e.y-80,`ü§ñ ${e.name}`,{fontSize:"10px",color:"#"+e.color.toString(16).padStart(6,"0"),backgroundColor:"#000000aa",padding:{x:4,y:2}}).setOrigin(.5).setDepth(10)),this.bots.push(e)}console.log(`Initialized ${this.bots.length} bots`)}updateBots(e){if(this.bots&&0!==this.bots.length)try{this.bots.forEach(t=>{if(t&&!(t.health<=0)){if(t.shootCooldown=Math.max(0,t.shootCooldown-e),t.moveCooldown=Math.max(0,t.moveCooldown-e),t.targetBird&&t.targetBird.active||(t.targetBird=this.getNearestShootableBird(t.x,t.y)),t.moveCooldown<=0){if(t.targetBird&&t.targetBird.active){const a=t.targetBird.x-t.x;Math.abs(a)>50&&(t.direction=a>0?1:-1,t.x+=150*t.direction*e)}else Math.random()<.02&&(t.direction=-t.direction),t.x+=80*t.direction*e;t.x=Math.max(100,Math.min(19900,t.x))}if(t.targetBird&&t.targetBird.active&&t.shootCooldown<=0){if(Math.hypot(t.targetBird.x-t.x,t.targetBird.y-t.y)<500){const e=.7+.2*Math.random();if(Math.random()<e){const e=t.targetBird;if(!e||!e.active)return void(t.targetBird=null);if(e.health=(e.health||1)-1,e.health<=0){const a=e.config&&e.config.score?e.config.score:10;t.score+=a,t.kills++,this.showPointIndicator(e.x,e.y,`ü§ñ +${a}`,t.color),this.tweens.add({targets:e,y:e.y+100,alpha:0,rotation:2*Math.random(),duration:300,onComplete:()=>e.destroy()}),t.targetBird=null}}if(t.sprite){const e=this.add.circle(t.x+30*t.direction,t.y-60,8,16776960).setDepth(15);this.tweens.add({targets:e,alpha:0,scale:2,duration:100,onComplete:()=>e.destroy()})}t.shootCooldown=.8+.4*Math.random()}}if(t.sprite&&(t.sprite.setPosition(t.x,t.y),t.sprite.setFlipX(t.direction>0),t.targetBird)){const e=t.targetBird.y-t.y<0?-.2:.05;t.sprite.setRotation(t.direction<0?-e:e)}t.nameTag&&(t.nameTag.setPosition(t.x,t.y-80),t.nameTag.setText(`ü§ñ ${t.name} (${t.score})`))}})}catch(e){console.error("Bot update error:",e)}}getBotScores(){return this.bots.map(e=>({name:e.name,score:e.score,kills:e.kills,isBot:!0}))}showInstructions(){const e=document.getElementById("instructions");e&&(e.style.display="block")}hideInstructions(){const e=document.getElementById("instructions");e&&(e.style.display="none")}showLeaderboard(){"function"==typeof window.showLeaderboardModal&&window.showLeaderboardModal()}updateHud(){if(this.hudElements.score&&(this.hudElements.score.textContent=btState.score.toLocaleString()),this.hudElements.healthFill&&(this.hudElements.healthFill.style.width=btState.health+"%",btState.health>60?this.hudElements.healthFill.style.background="linear-gradient(90deg, #22c55e, #16a34a)":btState.health>30?this.hudElements.healthFill.style.background="linear-gradient(90deg, #facc15, #eab308)":this.hudElements.healthFill.style.background="linear-gradient(90deg, #ef4444, #dc2626)"),this.hudElements.turdFill&&(this.hudElements.turdFill.style.width=btState.turdMeter+"%",btState.turdMeter<50?this.hudElements.turdFill.style.background="linear-gradient(90deg, #9ca3af, #6b7280)":btState.turdMeter<80?this.hudElements.turdFill.style.background="linear-gradient(90deg, #a16207, #854d0e)":this.hudElements.turdFill.style.background="linear-gradient(90deg, #7c2d12, #451a03)"),this.hudElements.ammoFill&&(this.hudElements.ammoFill.style.width=btState.ammo/btState.ammoMax*100+"%"),this.hudElements.ammoText&&(this.hudElements.ammoText.textContent=`${btState.ammo}/${btState.ammoMax}`),this.hudElements.coins&&(this.hudElements.coins.textContent=btState.coins.toLocaleString()),this.hudElements.weapon&&(this.hudElements.weapon.textContent=btState.weaponName),this.hudElements.kills&&(this.hudElements.kills.textContent=btState.kills),this.hudElements.accuracy&&(this.hudElements.accuracy.textContent=btState.accuracy+"%"),this.hudElements.level&&(this.hudElements.level.textContent=`${btState.currentLevel}/12`),this.hudElements.birdsLeft){const e=LEVEL_CONFIG[btState.currentLevel];0===e.birdsToKill?this.hudElements.birdsLeft.textContent="üö´ NO HUNTING":this.hudElements.birdsLeft.textContent=`${btState.birdsKilledThisLevel}/${e.birdsToKill}`}if(this.hudElements.levelFill){const e=LEVEL_CONFIG[btState.currentLevel];if(0===e.birdsToKill)this.hudElements.levelFill.style.width="100%",this.hudElements.levelFill.style.background="linear-gradient(90deg, #ff6600, #ff4400)";else{const t=Math.min(100,btState.birdsKilledThisLevel/e.birdsToKill*100);this.hudElements.levelFill.style.width=t+"%",this.hudElements.levelFill.style.background=t>=100?"linear-gradient(90deg, #22c55e, #16a34a)":"linear-gradient(90deg, #facc15, #f59e0b)"}}}triggerGameOver(){this.gameOver||this.triggerDeathAnimation("turd")}checkLeaderboard(){try{const e="function"==typeof isGuest&&!isGuest();"function"==typeof submitHighScore&&e&&submitHighScore(btState.score,btState.kills,btState.accuracy);const t=JSON.parse(localStorage.getItem("birdturds_leaderboard")||"[]");if(t.length<10||btState.score>t[t.length-1].score){let a,i="Unknown";a=e&&"function"==typeof getCurrentUserName?getCurrentUserName()||"Player":"Guest",t.push({initials:a.slice(0,10),city:i,score:btState.score,kills:btState.kills,accuracy:btState.accuracy,date:(new Date).toISOString().split("T")[0]}),t.sort((e,t)=>t.score-e.score),t.splice(100),localStorage.setItem("birdturds_leaderboard",JSON.stringify(t))}"function"==typeof saveUserData&&e&&saveUserData()}catch(e){console.error("Leaderboard error:",e)}}showGameOverScreen(){const e=[{title:"POOPED OUT!",sub:"You got crapped on... literally."},{title:"BIRD BRAIN!",sub:"Even pigeons outsmarted you."},{title:"TURD HAPPENS!",sub:"Should've brought an umbrella."},{title:"FOWL PLAY!",sub:"The birds won this round."},{title:"PLUCKED!",sub:"You were the sitting duck."},{title:"SPLAT!",sub:"Death by doo-doo. Tragic."},{title:"POULTRY IN MOTION!",sub:"And you weren't fast enough."},{title:"EGGS-TERMINATED!",sub:"The birds had the last laugh."},{title:"WELL... CRAP.",sub:"That's what you get for standing still."},{title:"PECKED TO DEATH!",sub:"By angry bird turds. Ironic."},{title:"GAME OVER, MAN!",sub:"The turds were too powerful."},{title:"FLEW THE COOP!",sub:"Your dignity, that is."},{title:"WING AND A PRAYER!",sub:"Prayer didn't work."},{title:"RUFFLED FEATHERS!",sub:"Yours, specifically."},{title:"DUCK... DIDN'T!",sub:"Should've ducked. Or something."}],t=e[Math.floor(Math.random()*e.length)],a="function"!=typeof isGuest||isGuest()?'<p style="color:#fde68a;font-size:13px;margin-top:15px;">‚ö†Ô∏è Playing as Guest - Score not saved to global leaderboard.<br/><a href="#" onclick="showAuthModal();return false;" style="color:#22c55e;">Create account</a> to compete!</p>':'<p style="color:#22c55e;font-size:13px;margin-top:15px;">‚úÖ Score saved to global leaderboard!</p>',i=[{verse:"For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life.",ref:"John 3:16"},{verse:"I am the way and the truth and the life. No one comes to the Father except through me.",ref:"John 14:6"},{verse:"Come to me, all you who are weary and burdened, and I will give you rest.",ref:"Matthew 11:28"},{verse:"Behold, I stand at the door and knock. If anyone hears my voice and opens the door, I will come in.",ref:"Revelation 3:20"},{verse:"For the Son of Man came to seek and to save the lost.",ref:"Luke 19:10"},{verse:"The Lord is not slow in keeping his promise... not wanting anyone to perish, but everyone to come to repentance.",ref:"2 Peter 3:9"},{verse:"If you declare with your mouth, 'Jesus is Lord,' and believe in your heart that God raised him from the dead, you will be saved.",ref:"Romans 10:9"},{verse:"For it is by grace you have been saved, through faith‚Äîand this is not from yourselves, it is the gift of God.",ref:"Ephesians 2:8"}],s=i[Math.floor(Math.random()*i.length)],o=document.createElement("div");o.id="gameover-overlay";const n="function"==typeof isGuest&&!isGuest()?'<button id="gameover-leaderboard-btn" style="background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;padding:12px 25px;font-size:14px;font-weight:bold;border-radius:999px;cursor:pointer;margin:5px;box-shadow:0 4px 15px rgba(59,130,246,0.4);touch-action:manipulation;">üèÜ Leaderboard</button>':'<p style="color:#9ca3af;font-size:11px;margin-top:5px;">Login to view leaderboard</p>';o.innerHTML=`\n      <div style="background:linear-gradient(135deg,#1e293b,#0f172a);padding:25px 40px;border-radius:20px;text-align:center;border:2px solid #facc15;max-width:550px;position:relative;overflow:hidden;">\n        \x3c!-- Close Button --\x3e\n        <button id="gameover-close-btn" style="position:absolute;top:10px;right:10px;background:#374151;color:#9ca3af;border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:16px;line-height:1;touch-action:manipulation;z-index:10;">‚úï</button>\n        \n        \x3c!-- JESUS IN CLOUDS - Heavenly scene at top --\x3e\n        <div style="position:relative;margin:-25px -40px 15px -40px;height:180px;overflow:hidden;border-radius:18px 18px 0 0;">\n          \n    <svg viewBox="0 0 400 200" width="100%" height="180" style="position:absolute;top:0;left:0;pointer-events:none;opacity:0.9;">\n      \x3c!-- Sky gradient background --\x3e\n      <defs>\n        <linearGradient id="skyGrad" x1="0%" y1="0%" x2="0%" y2="100%">\n          <stop offset="0%" style="stop-color:#fef3c7;stop-opacity:0.8"/>\n          <stop offset="50%" style="stop-color:#fcd34d;stop-opacity:0.4"/>\n          <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.1"/>\n        </linearGradient>\n        <radialGradient id="gloryGlow" cx="50%" cy="50%" r="50%">\n          <stop offset="0%" style="stop-color:#fff;stop-opacity:1"/>\n          <stop offset="40%" style="stop-color:#fef3c7;stop-opacity:0.8"/>\n          <stop offset="100%" style="stop-color:#fcd34d;stop-opacity:0"/>\n        </radialGradient>\n        <filter id="softGlow" x="-50%" y="-50%" width="200%" height="200%">\n          <feGaussianBlur stdDeviation="3" result="blur"/>\n          <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>\n        </filter>\n      </defs>\n      \n      \x3c!-- Heavenly background glow --\x3e\n      <rect x="0" y="0" width="400" height="200" fill="url(#skyGrad)"/>\n      \n      \x3c!-- Glory rays --\x3e\n      <g opacity="0.6" filter="url(#softGlow)">\n        <line x1="200" y1="80" x2="50" y2="200" stroke="#fcd34d" stroke-width="3"/>\n        <line x1="200" y1="80" x2="100" y2="200" stroke="#fef3c7" stroke-width="2"/>\n        <line x1="200" y1="80" x2="150" y2="200" stroke="#fcd34d" stroke-width="3"/>\n        <line x1="200" y1="80" x2="250" y2="200" stroke="#fcd34d" stroke-width="3"/>\n        <line x1="200" y1="80" x2="300" y2="200" stroke="#fef3c7" stroke-width="2"/>\n        <line x1="200" y1="80" x2="350" y2="200" stroke="#fcd34d" stroke-width="3"/>\n      </g>\n      \n      \x3c!-- Clouds layer 1 (back) --\x3e\n      <g fill="#fff" opacity="0.7">\n        <ellipse cx="60" cy="140" rx="50" ry="25"/>\n        <ellipse cx="100" cy="135" rx="40" ry="20"/>\n        <ellipse cx="340" cy="145" rx="45" ry="22"/>\n        <ellipse cx="300" cy="140" rx="35" ry="18"/>\n      </g>\n      \n      \x3c!-- Central glory circle --\x3e\n      <circle cx="200" cy="80" r="60" fill="url(#gloryGlow)" filter="url(#softGlow)"/>\n      \n      \x3c!-- Jesus figure (reverent silhouette) --\x3e\n      <g transform="translate(200,80)" filter="url(#softGlow)">\n        \x3c!-- Halo --\x3e\n        <circle cx="0" cy="-25" r="18" fill="none" stroke="#fcd34d" stroke-width="3" opacity="0.8"/>\n        \n        \x3c!-- Head --\x3e\n        <circle cx="0" cy="-25" r="12" fill="#fef3c7"/>\n        \n        \x3c!-- Hair/beard suggestion --\x3e\n        <ellipse cx="0" cy="-18" rx="10" ry="8" fill="#92400e" opacity="0.3"/>\n        \n        \x3c!-- Robe body --\x3e\n        <path d="M-25,0 Q-20,-15 0,-15 Q20,-15 25,0 L20,50 Q0,55 -20,50 Z" fill="#fff" opacity="0.9"/>\n        \n        \x3c!-- Arms extended (welcoming) --\x3e\n        <path d="M-25,0 Q-40,5 -50,0" stroke="#fff" stroke-width="8" fill="none" stroke-linecap="round"/>\n        <path d="M25,0 Q40,5 50,0" stroke="#fff" stroke-width="8" fill="none" stroke-linecap="round"/>\n        \n        \x3c!-- Hands --\x3e\n        <circle cx="-50" cy="0" r="6" fill="#fef3c7"/>\n        <circle cx="50" cy="0" r="6" fill="#fef3c7"/>\n        \n        \x3c!-- Gentle face suggestion --\x3e\n        <circle cx="-4" cy="-28" r="1.5" fill="#92400e" opacity="0.5"/>\n        <circle cx="4" cy="-28" r="1.5" fill="#92400e" opacity="0.5"/>\n        <path d="M-3,-22 Q0,-20 3,-22" stroke="#92400e" stroke-width="1" fill="none" opacity="0.4"/>\n      </g>\n      \n      \x3c!-- Clouds layer 2 (front) --\x3e\n      <g fill="#fff" opacity="0.9">\n        <ellipse cx="150" cy="160" rx="60" ry="30"/>\n        <ellipse cx="200" cy="170" rx="50" ry="25"/>\n        <ellipse cx="250" cy="160" rx="55" ry="28"/>\n        <ellipse cx="80" cy="180" rx="40" ry="20"/>\n        <ellipse cx="320" cy="175" rx="45" ry="22"/>\n      </g>\n      \n      \x3c!-- "Come to Me" text --\x3e\n      <text x="200" y="195" text-anchor="middle" fill="#92400e" font-size="11" font-style="italic" opacity="0.8">"Come to me, all who are weary..."</text>\n    </svg>\n        </div>\n        \n        \x3c!-- Dead Hunter (smaller) --\x3e\n        <svg viewBox="0 0 120 150" width="100" height="125" style="margin-bottom:10px;">\n      \x3c!-- Heavenly glow background --\x3e\n      <defs>\n        <radialGradient id="heavenGlow" cx="50%" cy="30%" r="60%">\n          <stop offset="0%" style="stop-color:#fef3c7;stop-opacity:1"/>\n          <stop offset="50%" style="stop-color:#fcd34d;stop-opacity:0.5"/>\n          <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0"/>\n        </radialGradient>\n        <filter id="glowFilter">\n          <feGaussianBlur stdDeviation="2" result="blur"/>\n          <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>\n        </filter>\n      </defs>\n      \n      \x3c!-- Heavenly background glow --\x3e\n      <ellipse cx="60" cy="40" rx="55" ry="35" fill="url(#heavenGlow)"/>\n      \n      \x3c!-- Light rays from above --\x3e\n      <g stroke="#fcd34d" stroke-width="2" opacity="0.6">\n        <line x1="60" y1="0" x2="30" y2="60"/>\n        <line x1="60" y1="0" x2="60" y2="70"/>\n        <line x1="60" y1="0" x2="90" y2="60"/>\n      </g>\n      \n      \x3c!-- Angel figure (carrying the hunter up) --\x3e\n      <g transform="translate(60,55)" filter="url(#glowFilter)">\n        \x3c!-- Angel wings --\x3e\n        <ellipse cx="-30" cy="0" rx="25" ry="12" fill="#fff" opacity="0.9"/>\n        <ellipse cx="30" cy="0" rx="25" ry="12" fill="#fff" opacity="0.9"/>\n        <ellipse cx="-22" cy="-5" rx="18" ry="8" fill="#fef3c7" opacity="0.8"/>\n        <ellipse cx="22" cy="-5" rx="18" ry="8" fill="#fef3c7" opacity="0.8"/>\n        \n        \x3c!-- Angel body (white robe) --\x3e\n        <ellipse cx="0" cy="15" rx="12" ry="20" fill="#fff"/>\n        \n        \x3c!-- Angel head with halo --\x3e\n        <circle cx="0" cy="-10" r="10" fill="#fef3c7"/>\n        <ellipse cx="0" cy="-22" rx="14" ry="6" fill="none" stroke="#fcd34d" stroke-width="2"/>\n        \n        \x3c!-- Gentle smile --\x3e\n        <path d="M-3,-8 Q0,-5 3,-8" stroke="#92400e" stroke-width="1" fill="none"/>\n        \x3c!-- Eyes (closed peacefully) --\x3e\n        <path d="M-4,-11 Q-3,-12 -2,-11" stroke="#92400e" stroke-width="1" fill="none"/>\n        <path d="M2,-11 Q3,-12 4,-11" stroke="#92400e" stroke-width="1" fill="none"/>\n      </g>\n      \n      \x3c!-- Hunter being lifted (smaller, at angel's feet) --\x3e\n      <g transform="translate(60,95)">\n        \x3c!-- Hunter body --\x3e\n        <ellipse cx="0" cy="15" rx="10" ry="15" fill="#4b5320"/>\n        \x3c!-- Hunter head --\x3e\n        <circle cx="0" cy="-5" r="8" fill="#fcd9b6"/>\n        \x3c!-- Peaceful closed eyes --\x3e\n        <path d="M-3,-6 Q-2,-7 -1,-6" stroke="#1f2937" stroke-width="1" fill="none"/>\n        <path d="M1,-6 Q2,-7 3,-6" stroke="#1f2937" stroke-width="1" fill="none"/>\n        \x3c!-- Small smile --\x3e\n        <path d="M-2,-2 Q0,0 2,-2" stroke="#1f2937" stroke-width="1" fill="none"/>\n        \x3c!-- Hat --\x3e\n        <ellipse cx="0" cy="-12" rx="10" ry="3" fill="#4b5320"/>\n        <rect x="-6" y="-17" width="12" height="6" rx="2" fill="#4b5320"/>\n      </g>\n      \n      \x3c!-- Sparkles/stars --\x3e\n      <text x="15" y="30" font-size="10">‚ú®</text>\n      <text x="95" y="35" font-size="8">‚≠ê</text>\n      <text x="25" y="85" font-size="8">‚ú®</text>\n      <text x="90" y="90" font-size="10">üí´</text>\n      \n      \x3c!-- Small clouds at bottom --\x3e\n      <g fill="#fff" opacity="0.8">\n        <ellipse cx="25" cy="140" rx="20" ry="8"/>\n        <ellipse cx="95" cy="138" rx="18" ry="7"/>\n        <ellipse cx="60" cy="145" rx="25" ry="6"/>\n      </g>\n    </svg>\n        \n        \x3c!-- Funny Title --\x3e\n        <h1 style="font-size:32px;color:#ef4444;margin-bottom:5px;">üéØ ${t.title}</h1>\n        <p style="color:#fbbf24;font-size:14px;margin-bottom:15px;font-style:italic;">${t.sub}</p>\n        \n        \x3c!-- Stats --\x3e\n        <div style="margin:15px 0;font-size:16px;color:#cbd5e1;">\n          <p>Score: <strong style="color:#facc15;font-size:20px;">${btState.score.toLocaleString()}</strong> | \n          Kills: <strong style="color:#facc15;">${btState.kills}</strong> | \n          Accuracy: <strong style="color:#facc15;">${btState.accuracy}%</strong></p>\n          ${a}\n        </div>\n        \n        \x3c!-- SCRIPTURE MESSAGE --\x3e\n        <div style="background:linear-gradient(135deg,rgba(254,243,199,0.15),rgba(252,211,77,0.1));border:1px solid #fcd34d;border-radius:12px;padding:15px;margin:15px 0;">\n          <p style="color:#fef3c7;font-size:13px;line-height:1.5;margin-bottom:8px;font-style:italic;">"${s.verse}"</p>\n          <p style="color:#fcd34d;font-size:12px;font-weight:bold;">‚Äî ${s.ref}</p>\n          <p style="color:#22c55e;font-size:11px;margin-top:8px;">‚úùÔ∏è God doesn't want anyone left behind! Will you accept His invitation?</p>\n        </div>\n        \n        \x3c!-- Buttons --\x3e\n        <div style="display:flex;flex-wrap:wrap;justify-content:center;gap:5px;">\n          <button id="gameover-playagain-btn" style="background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff;border:none;padding:12px 25px;font-size:14px;font-weight:bold;border-radius:999px;cursor:pointer;box-shadow:0 4px 15px rgba(34,197,94,0.4);touch-action:manipulation;">üîÑ Play Again</button>\n          ${n}\n          <button id="gameover-video-btn" style="background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none;padding:12px 25px;font-size:14px;font-weight:bold;border-radius:999px;cursor:pointer;box-shadow:0 4px 15px rgba(239,68,68,0.4);touch-action:manipulation;">‚úùÔ∏è Jesus Saves! Watch</button>\n        </div>\n        \n        \x3c!-- Share prompt --\x3e\n        <p style="color:#9ca3af;font-size:10px;margin-top:12px;">Share this game with someone who needs to hear the message! üì¢</p>\n      </div>`,o.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;z-index:10000;padding:10px;",document.body.appendChild(o);const r=document.getElementById("gameover-close-btn"),h=document.getElementById("gameover-playagain-btn"),l=document.getElementById("gameover-leaderboard-btn"),d=document.getElementById("gameover-video-btn");if(r){const e=()=>{o.remove(),"function"==typeof window.restartBirdTurds?window.restartBirdTurds():window.location.href=window.location.pathname+"?restart="+Date.now()};r.addEventListener("click",e),r.addEventListener("touchend",t=>{t.preventDefault(),e()})}if(h){console.log("‚úÖ Play Again button found, attaching restart handlers...");const e=()=>{console.log("üîÑ Restarting game..."),"function"==typeof window.restartBirdTurds?window.restartBirdTurds():(o.remove(),window.location.href=window.location.pathname+"?restart="+Date.now())};h.addEventListener("click",e),h.addEventListener("touchend",t=>{t.preventDefault(),t.stopPropagation(),e()})}else console.warn("‚ö†Ô∏è Play Again button NOT found!");l&&(l.addEventListener("click",()=>showLeaderboardModal()),l.addEventListener("touchend",e=>{e.preventDefault(),showLeaderboardModal()})),d&&(d.addEventListener("click",()=>{"function"==typeof showVideoPlayer&&showVideoPlayer("salvation")}),d.addEventListener("touchend",e=>{e.preventDefault(),"function"==typeof showVideoPlayer&&showVideoPlayer("salvation")}))}}async function showLeaderboardModal(){let e='<div style="text-align:center;color:#9ca3af;">Loading...</div>';if("function"==typeof getLeaderboard)try{const t=await getLeaderboard(20);t.length>0?(e='<table style="width:100%;border-collapse:collapse;"><thead><tr style="color:#facc15;"><th style="padding:10px;text-align:left;">#</th><th style="padding:10px;text-align:left;">Player</th><th style="padding:10px;text-align:right;">Score</th><th style="padding:10px;text-align:right;">Kills</th></tr></thead><tbody>',t.forEach((t,a)=>{e+=`<tr style="border-top:1px solid #374151;"><td style="padding:10px;">${0===a?"ü•á":1===a?"ü•à":2===a?"ü•â":`${a+1}`}</td><td style="padding:10px;color:#e5e7eb;">${t.displayName||"Anonymous"}</td><td style="padding:10px;text-align:right;color:#facc15;font-weight:bold;">${t.score.toLocaleString()}</td><td style="padding:10px;text-align:right;color:#9ca3af;">${t.kills||0}</td></tr>`}),e+="</tbody></table>"):e='<div style="text-align:center;color:#9ca3af;padding:20px;">No scores yet! Be the first!</div>'}catch(t){console.error("Error loading leaderboard:",t),e='<div style="text-align:center;color:#ef4444;padding:20px;">Error loading leaderboard</div>'}const t=document.createElement("div");t.id="leaderboard-modal",t.innerHTML=`<div style="background:linear-gradient(135deg,#1e293b,#0f172a);padding:30px;border-radius:20px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;border:2px solid #facc15;"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;"><h2 style="color:#facc15;font-size:24px;">üèÜ Global Leaderboard</h2><button onclick="document.getElementById('leaderboard-modal').remove()" style="background:#374151;border:none;color:#fff;width:36px;height:36px;border-radius:50%;font-size:20px;cursor:pointer;">√ó</button></div>${e}</div>`,t.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:20000;",document.body.appendChild(t)}let gameInstance=null;function summonBoss(e){return!!(gameInstance&&gameInstance.scene&&gameInstance.scene.scenes[0])&&(gameInstance.scene.scenes[0].spawnSpecificBoss(e),!0)}function changeHunterSkin(e){return btState.currentSkin=e,localStorage.setItem("birdturds_skin",e),!!(gameInstance&&gameInstance.scene&&gameInstance.scene.scenes[0])&&(gameInstance.scene.scenes[0].applyHunterSkin(),!0)}function upgradeArmor(e){return btState.upgrades.armor=Math.min(.5,(btState.upgrades.armor||0)+e),localStorage.setItem("birdturds_armor",btState.upgrades.armor),!!(gameInstance&&gameInstance.scene&&gameInstance.scene.scenes[0])&&(gameInstance.scene.scenes[0].applyArmorOverlay(),!0)}const savedSkin=localStorage.getItem("birdturds_skin");savedSkin&&(btState.currentSkin=savedSkin);const savedArmor=localStorage.getItem("birdturds_armor");function applyOwnedUpgrades(){const e=JSON.parse(localStorage.getItem("birdturds_owned")||"[]");console.log("üéÆ Loading owned items:",e),e.includes("fire_rate_4")?btState.upgrades.fireRate=2:e.includes("fire_rate_3")?btState.upgrades.fireRate=1.5:e.includes("fire_rate_2")&&(btState.upgrades.fireRate=1.25),e.includes("damage_4")?btState.upgrades.damage=2:e.includes("damage_3")?btState.upgrades.damage=1.5:e.includes("damage_2")&&(btState.upgrades.damage=1.25),e.includes("armor_3")?btState.upgrades.armor=.5:e.includes("armor_2")?btState.upgrades.armor=.3:e.includes("armor_1")&&(btState.upgrades.armor=.15),e.includes("ammo_1")&&(btState.ammoMax+=30),e.includes("ammo_2")&&(btState.ammoMax+=60),e.includes("ammo_3")&&(btState.ammoMax+=120),e.includes("coin_3x")?btState.upgrades.coinMultiplier=3:e.includes("coin_2x")&&(btState.upgrades.coinMultiplier=2),e.includes("magnet")&&(btState.hasCoinMagnet=!0),e.includes("lucky")&&(btState.hasLuckyCharm=!0),e.includes("handgun")&&(btState.hasHandgun=!0,btState.handgunAmmo=15),e.includes("revolver")&&(btState.hasRevolver=!0,btState.revolverAmmo=6,btState.revolverDamage=2),e.includes("deagle")&&(btState.hasDeagle=!0,btState.deagleAmmo=7,btState.deagleDamage=2.5),e.includes("shotgun_410")&&(btState.hasShotgun=!0,btState.shotgunPellets=3),e.includes("shotgun_20")&&(btState.hasShotgun=!0,btState.shotgunPellets=5),e.includes("shotgun_12")&&(btState.hasShotgun=!0,btState.shotgunPellets=8),e.includes("pump_action")&&(btState.hasShotgun=!0,btState.shotgunPellets=10,btState.shotgunDamage=1.5),e.includes("auto_shotgun")&&(btState.hasShotgun=!0,btState.shotgunPellets=8,btState.shotgunAuto=!0),e.includes("machinegun")&&(btState.hasMachinegun=!0,btState.machinegunAmmo=200),e.includes("minigun")&&(btState.hasMinigun=!0,btState.minigunAmmo=1e3),e.includes("sniper")&&(btState.hasSniper=!0,btState.sniperAmmo=20,btState.sniperDamage=3),e.includes("barrett")&&(btState.hasBarrett=!0,btState.barrettAmmo=10,btState.barrettDamage=5),e.includes("bazooka")&&(btState.hasBazooka=!0,btState.bazookaAmmo=5),e.includes("rocketlauncher")&&(btState.hasRocketLauncher=!0,btState.rocketAmmo=3),e.includes("minigun_mounted")&&(btState.hasMountedMinigun=!0),e.includes("dirtbike")&&(btState.hasDirtbike=!0,btState.dirtbikeSpeed=1.5),e.includes("atv")&&(btState.hasATV=!0,btState.atvSpeed=1.3,btState.atvArmor=.1),e.includes("truck")&&(btState.hasTruck=!0,btState.truckArmor=.3),e.includes("jeep")&&(btState.hasJeep=!0,btState.jeepSpeed=1.4,btState.jeepArmor=.25,btState.jeepMounted=!0),e.includes("tank")&&(btState.hasTank=!0,btState.tankArmor=.6,btState.tankCannon=!0),e.includes("helicopter")&&(btState.hasHelicopter=!0,btState.canFly=!0,btState.heliRockets=!0);const t=localStorage.getItem("birdturds_skin")||"default";btState.currentSkin=t,"camo"===t&&e.includes("skin_camo")&&(btState.camoActive=!0),"winter"===t&&e.includes("skin_winter")&&(btState.damageModifier=1.1),"desert"===t&&e.includes("skin_desert")&&(btState.speedModifier=1.1),"tactical"===t&&e.includes("skin_tactical")&&(btState.fireRateModifier=1.15),"armor_light"===t&&e.includes("skin_armor_light")&&(btState.armorReduction=Math.max(btState.armorReduction,.15)),"armor_heavy"===t&&e.includes("skin_armor_heavy")&&(btState.armorReduction=.3,btState.speedModifier=.9),"hazmat"===t&&e.includes("skin_hazmat")&&(btState.hazmatImmune=!0),"gold"===t&&e.includes("skin_gold")&&(btState.coinDropModifier=1.25),"legendary"===t&&e.includes("skin_legendary")&&(btState.damageModifier=1.1,btState.armorReduction=Math.max(btState.armorReduction,.1),btState.speedModifier=1.1,btState.coinDropModifier=1.1),e.includes("extra_eagle")&&(btState.extraEagles=1),e.includes("golden_eagle")&&(btState.goldenEagles=2),e.includes("falcon")&&(btState.hasFalcon=!0),e.includes("owl_helper")&&(btState.hasOwlHelper=!0),console.log("‚úÖ All upgrades applied!"),console.log("  - Fire Rate:",btState.upgrades.fireRate),console.log("  - Damage:",btState.upgrades.damage),console.log("  - Armor:",btState.upgrades.armor),console.log("  - Ammo Max:",btState.ammoMax),console.log("  - Coin Mult:",btState.upgrades.coinMultiplier),console.log("  - Skin:",btState.currentSkin)}function applyConsumable(e){if(!gameInstance||!gameInstance.scene.scenes[0])return console.log("Game not ready"),!1;const t=gameInstance.scene.scenes[0];switch(e){case"sturdy_hat":btState.hatProtection=!0,btState.hatTimer=45,t.showNotification("üé© Hat Protection: 45 seconds!",2278750);break;case"sturdy_hat_xl":btState.hatProtection=!0,btState.hatTimer=90,t.showNotification("üé©üé© ULTRA Hat: 90 seconds!",2278750);break;case"ammo_refill":btState.ammo=btState.ammoMax,t.showNotification("üîÑ Ammo Refilled!",3900150);break;case"health_pack":btState.health=Math.min(btState.maxHealth,btState.health+50),t.showNotification("‚ù§Ô∏è +50 Health!",15680580);break;case"full_heal":btState.health=btState.maxHealth,btState.turdMeter=0,t.showNotification("‚ù§Ô∏è‚ù§Ô∏è Fully Healed!",15680580);break;case"shield_temp":btState.invincible=!0,t.time.delayedCall(1e4,()=>{btState.invincible=!1}),t.showNotification("üåü Invincible: 10 seconds!",16766720);break;case"shield_long":btState.invincible=!0,t.time.delayedCall(3e4,()=>{btState.invincible=!1}),t.showNotification("üåüüåü Invincible: 30 seconds!",16766720);break;case"double_points":btState.doublePoints=!0,t.time.delayedCall(3e4,()=>{btState.doublePoints=!1}),t.showNotification("‚≠ê Double Points: 30 seconds!",16436245);break;case"triple_points":btState.doublePoints=!0,btState.triplePoints=!0,t.time.delayedCall(3e4,()=>{btState.doublePoints=!1,btState.triplePoints=!1}),t.showNotification("‚≠ê‚≠ê Triple Points: 30 seconds!",16436245);break;case"slow_motion":btState.slowMotion=!0,t.time.delayedCall(15e3,()=>{btState.slowMotion=!1}),t.showNotification("‚è±Ô∏è Slow-Mo: 15 seconds!",11032055);break;case"freeze":btState.timeFrozen=!0,t.time.delayedCall(1e4,()=>{btState.timeFrozen=!1}),t.showNotification("‚ùÑÔ∏è Time Frozen: 10 seconds!",6333946);break;case"grenade":case"grenade_pack":btState.grenades=(btState.grenades||0)+("grenade_pack"===e?10:5),t.showNotification("üí£ Grenades: "+btState.grenades,16096779);break;case"molotov":btState.molotovs=(btState.molotovs||0)+3,t.showNotification("üî• Molotovs: "+btState.molotovs,15680580);break;case"flashbang":btState.flashbangs=(btState.flashbangs||0)+1,t.showNotification("üí• Flashbang Ready!",16777215);break;case"jetpack":btState.jetpackActive=!0,btState.jetpackFuel=30,btState.jetpackMaxFuel=30,t.activateJetpack(30),t.showNotification("üöÄ JETPACK ACTIVATED! 30 seconds of flight!",16739072);break;case"jetpack_xl":btState.jetpackActive=!0,btState.jetpackFuel=60,btState.jetpackMaxFuel=60,t.activateJetpack(60),t.showNotification("üöÄüöÄ MEGA JETPACK! 60 seconds of flight!",16739072);break;default:return console.log("Unknown consumable:",e),!1}return!0}savedArmor&&(btState.upgrades.armor=parseFloat(savedArmor)),applyOwnedUpgrades();const config={type:Phaser.AUTO,parent:"game-container",width:1280,height:640,backgroundColor:"#000000",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:BirdTurdsScene,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_HORIZONTALLY,width:1280,height:640}};window.startBirdTurdsGame=function(){gameInstance||(console.log("üéÆ Starting BirdTurds game..."),gameInstance=new Phaser.Game(config))},document.addEventListener("DOMContentLoaded",()=>{console.log("üéÆ BirdTurds ready - waiting for PLAY button...")});